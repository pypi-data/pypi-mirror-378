"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[58542],{74490:(e,n,t)=>{t.r(n),t.d(n,{default:()=>b});var a=t(89379),o=t(65043),s=t(97326),i=t(22019),l=t(85672),r=t(6051),c=t(12624),d=t(8354),h=t(42261),u=t(43716),m=t(4015),f=t(76399),p=t(32513),g=t(75337),v=t(58168);const x={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M464 720a48 48 0 1096 0 48 48 0 10-96 0zm16-304v184c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V416c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8zm475.7 440l-416-720c-6.2-10.7-16.9-16-27.7-16s-21.6 5.3-27.7 16l-416 720C56 877.4 71.4 904 96 904h832c24.6 0 40-26.6 27.7-48zm-783.5-27.9L512 239.9l339.8 588.2H172.2z"}}]},name:"warning",theme:"outlined"};var A=t(22172),y=function(e,n){return o.createElement(A.A,(0,v.A)({},e,{ref:n,icon:x}))};const C=o.forwardRef(y);var j=t(70579);const{Panel:w}=s.A,b=e=>{let{visible:n,onClose:t}=e;const[v,x]=(0,o.useState)(null),[A,y]=(0,o.useState)(""),[b,k]=(0,o.useState)(!1);(0,o.useEffect)((()=>{n&&E()}),[n]);const E=async()=>{try{const e=await fetch("/api/mcp/shell-config");if(e.ok){const n=await e.json();x(n)}}catch(e){console.error("Failed to fetch shell config:",e),x({enabled:!0,allowedCommands:[],gitOperationsEnabled:!0,safeGitOperations:[],timeout:10})}},O=async e=>{try{await fetch("/api/mcp/toggle-server",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({server_name:"shell",enabled:e})})}catch(n){console.warn("Failed to sync MCP server toggle:",n)}},S=()=>{v&&A.trim()&&!v.allowedCommands.includes(A.trim())&&(x((e=>(0,a.A)((0,a.A)({},e),{},{allowedCommands:[...e.allowedCommands,A.trim()]}))),y(""))},G=["rm","rmdir","mv","cp","chmod","chown","sudo","su"],B=e=>G.some((n=>e.toLowerCase().includes(n.toLowerCase())));return v?(0,j.jsx)(l.A,{title:"Shell Command Configuration",open:n,onCancel:t,onOk:async()=>{if(v){k(!0);try{const e=await fetch("/api/mcp/shell-config",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(v)});if(e.ok){const n=await e.json();n.success?(await O(v.enabled),window.dispatchEvent(new CustomEvent("mcpStatusChanged",{detail:{serverName:"shell",enabled:v.enabled}})),i.Ay.success(n.message||"Shell configuration updated instantly")):i.Ay.error(n.message||"Failed to update shell configuration"),t()}else i.Ay.error("Failed to save shell configuration")}catch(e){i.Ay.error("Failed to save shell configuration"),console.error("Save error:",e)}finally{k(!1)}}},confirmLoading:b,width:600,okText:"Save Configuration",children:(0,j.jsxs)(r.A,{direction:"vertical",style:{width:"100%"},size:"large",children:[(0,j.jsxs)("div",{children:[(0,j.jsxs)(r.A,{align:"center",children:[(0,j.jsx)(c.A,{checked:v.enabled,onChange:async e=>{x((n=>(0,a.A)((0,a.A)({},n),{},{enabled:e}))),await O(e)}}),(0,j.jsx)("span",{children:"Enable shell command execution"})]}),(0,j.jsx)("div",{style:{marginTop:8,color:"#666",fontSize:"12px"},children:"When enabled, the AI agent can execute whitelisted shell commands"})]}),(0,j.jsx)(d.A,{}),(0,j.jsx)(h.A,{message:"Security Notice",description:"Only enable commands that are safe for AI execution. Git operations are limited to read-only and safe operations by default.",type:"info",showIcon:!0,style:{marginBottom:16}}),(0,j.jsxs)(s.A,{defaultActiveKey:["1"],ghost:!0,children:[(0,j.jsxs)(w,{header:"Basic Configuration",children:[(0,j.jsxs)("div",{children:[(0,j.jsx)("h4",{children:"Allowed Commands"}),(0,j.jsx)("div",{style:{marginBottom:12,color:"#666",fontSize:"12px"},children:"Commands that the AI agent can execute. These are loaded from the server configuration."}),(0,j.jsx)("div",{style:{marginBottom:12},children:(0,j.jsxs)(u.A.Group,{compact:!0,children:[(0,j.jsx)(u.A,{placeholder:"Add additional command",value:A,onChange:e=>y(e.target.value),onPressEnter:S,style:{width:"calc(100% - 80px)"}}),(0,j.jsx)(m.Ay,{type:"primary",icon:(0,j.jsx)(g.A,{}),onClick:S,style:{width:80},children:"Add"})]})}),v.allowedCommands&&v.allowedCommands.length>0&&(0,j.jsx)("div",{style:{display:"flex",flexWrap:"wrap",gap:"8px",marginBottom:16},children:v.allowedCommands.map((e=>(0,j.jsxs)(f.A,{closable:!0,color:B(e)?"red":"blue",onClose:()=>(e=>{v&&x((n=>(0,a.A)((0,a.A)({},n),{},{allowedCommands:n.allowedCommands.filter((n=>n!==e))})))})(e),style:{marginBottom:"4px"},children:[e,B(e)&&(0,j.jsx)(C,{style:{marginLeft:4,color:"#ff4d4f"}})]},e)))})]}),(0,j.jsx)(d.A,{}),(0,j.jsxs)("div",{children:[(0,j.jsx)("h4",{children:"Command Timeout"}),(0,j.jsx)(u.A,{type:"number",value:v.timeout,onChange:e=>x((n=>(0,a.A)((0,a.A)({},n),{},{timeout:parseInt(e.target.value)||10}))),suffix:"seconds",style:{width:150}})]}),(0,j.jsx)(d.A,{}),(0,j.jsxs)("div",{children:[(0,j.jsxs)(r.A,{align:"center",style:{marginBottom:12},children:[(0,j.jsx)(c.A,{checked:v.gitOperationsEnabled,onChange:e=>x((n=>(0,a.A)((0,a.A)({},n),{},{gitOperationsEnabled:e})))}),(0,j.jsx)("span",{children:"Enable safe Git operations"})]}),(0,j.jsx)("div",{style:{marginBottom:12,color:"#666",fontSize:"12px"},children:"When enabled, allows read-only and safe Git commands"}),v.gitOperationsEnabled&&(0,j.jsxs)("div",{style:{marginLeft:24},children:[(0,j.jsx)("h5",{children:"Allowed Git Operations:"}),(0,j.jsx)("div",{style:{display:"flex",flexWrap:"wrap",gap:"8px"},children:["status","log","show","diff","branch","remote","config --get","ls-files","ls-tree","blame","tag","stash list","reflog","rev-parse","describe","shortlog","whatchanged"].map((e=>(0,j.jsxs)(p.A,{checked:v.safeGitOperations.includes(e),onChange:()=>(e=>{v&&x((n=>(0,a.A)((0,a.A)({},n),{},{safeGitOperations:n.safeGitOperations.includes(e)?n.safeGitOperations.filter((n=>n!==e)):[...n.safeGitOperations,e]})))})(e),children:["git ",e]},e)))})]})]})]},"1"),(0,j.jsx)(w,{header:"Advanced Configuration",children:(0,j.jsx)(h.A,{message:"Advanced Configuration",description:"This section is reserved for future advanced shell configuration options.",type:"info",showIcon:!0})},"2")]})]})}):(0,j.jsx)(l.A,{title:"Shell Command Configuration",open:n,onCancel:t,footer:null,children:(0,j.jsx)("div",{style:{textAlign:"center",padding:"40px"},children:"Loading configuration..."})})}},88042:(e,n,t)=>{t.d(n,{A:()=>s});var a=t(65043),o=t(45818);function s(e){const n=a.useRef(null),t=()=>{o.A.cancel(n.current),n.current=null};return[()=>{t(),n.current=(0,o.A)((()=>{n.current=null}))},a=>{n.current&&(a.stopPropagation(),t()),null===e||void 0===e||e(a)}]}},79688:(e,n,t)=>{t.d(n,{A:()=>m});var a=t(58168),o=t(89379),s=t(64467),i=t(5544),l=t(80045),r=t(98139),c=t.n(r),d=t(28678),h=t(65043),u=["prefixCls","className","style","checked","disabled","defaultChecked","type","title","onChange"];const m=(0,h.forwardRef)((function(e,n){var t=e.prefixCls,r=void 0===t?"rc-checkbox":t,m=e.className,f=e.style,p=e.checked,g=e.disabled,v=e.defaultChecked,x=void 0!==v&&v,A=e.type,y=void 0===A?"checkbox":A,C=e.title,j=e.onChange,w=(0,l.A)(e,u),b=(0,h.useRef)(null),k=(0,h.useRef)(null),E=(0,d.A)(x,{value:p}),O=(0,i.A)(E,2),S=O[0],G=O[1];(0,h.useImperativeHandle)(n,(function(){return{focus:function(e){var n;null===(n=b.current)||void 0===n||n.focus(e)},blur:function(){var e;null===(e=b.current)||void 0===e||e.blur()},input:b.current,nativeElement:k.current}}));var B=c()(r,m,(0,s.A)((0,s.A)({},"".concat(r,"-checked"),S),"".concat(r,"-disabled"),g));return h.createElement("span",{className:B,title:C,style:f,ref:k},h.createElement("input",(0,a.A)({},w,{className:"".concat(r,"-input"),ref:b,onChange:function(n){g||("checked"in e||G(n.target.checked),null===j||void 0===j||j({target:(0,o.A)((0,o.A)({},e),{},{type:y,checked:n.target.checked}),stopPropagation:function(){n.stopPropagation()},preventDefault:function(){n.preventDefault()},nativeEvent:n.nativeEvent}))},disabled:g,checked:!!S,type:y})),h.createElement("span",{className:"".concat(r,"-inner")}))}))}}]);
//# sourceMappingURL=58542.08fb5cf4.chunk.js.map