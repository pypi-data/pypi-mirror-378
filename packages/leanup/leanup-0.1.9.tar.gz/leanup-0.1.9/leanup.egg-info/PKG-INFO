Metadata-Version: 2.4
Name: leanup
Version: 0.1.9
Summary: Python package for Lean Environment Management
Author: Lean-zh Community
Author-email: leanprover@outlook.com
Maintainer: Lean-zh Community
Maintainer-email: leanprover@outlook.com
License: MIT license
Requires-Python: >=3.6
Description-Content-Type: text/markdown
License-File: LICENSE
Requires-Dist: gitpython
Requires-Dist: psutil
Requires-Dist: toml
Requires-Dist: click
Requires-Dist: platformdirs
Requires-Dist: loguru
Requires-Dist: requests
Requires-Dist: colorama
Provides-Extra: dev
Requires-Dist: coverage; extra == "dev"
Requires-Dist: mypy; extra == "dev"
Requires-Dist: pytest; extra == "dev"
Requires-Dist: ruff; extra == "dev"
Requires-Dist: mkdocs>=1.4.0; extra == "dev"
Requires-Dist: mkdocs-material>=9.0.0; extra == "dev"
Requires-Dist: mkdocs-static-i18n>=0.5.0; extra == "dev"
Requires-Dist: pytest>=7.0.0; extra == "dev"
Requires-Dist: pytest-cov>=4.0.0; extra == "dev"
Dynamic: license-file

# LeanUp

<div align="center">
    <a href="https://pypi.python.org/pypi/leanup">
        <img src="https://img.shields.io/pypi/v/leanup.svg" alt="PyPI version" />
    </a>
    <a href="https://github.com/Lean-zh/LeanUp/actions/workflows/ci.yaml">
        <img src="https://github.com/Lean-zh/LeanUp/actions/workflows/ci.yaml/badge.svg" alt="Tests" />
    </a>
    <a href="https://codecov.io/gh/Lean-zh/LeanUp">
        <img src="https://codecov.io/gh/Lean-zh/LeanUp/branch/main/graph/badge.svg" alt="Coverage" />
    </a>
</div>

<div align="center">

**ä¸€ä¸ªç”¨äºç®¡ç† Lean æ•°å­¦è¯æ˜è¯­è¨€ç¯å¢ƒçš„ Python å·¥å…·**

[English](README-en.md) | [ç®€ä½“ä¸­æ–‡](README.md)

</div>

## ğŸ¯ åŠŸèƒ½ç‰¹æ€§

- **ğŸ“¦ ä»“åº“ç®¡ç†**: å®‰è£…å’Œç®¡ç† Lean ä»“åº“ï¼Œæ”¯æŒäº¤äº’å¼é…ç½®
- **ğŸŒ è·¨å¹³å°æ”¯æŒ**: æ”¯æŒ Linuxã€macOS å’Œ Windows
- **ğŸ“¦ ç®€å•æ˜“ç”¨**: é€šè¿‡ `pip install leanup` å¿«é€Ÿå®‰è£…
- **ğŸ”„ å‘½ä»¤ä»£ç†**: é€æ˜ä»£ç†æ‰€æœ‰ elan å‘½ä»¤ï¼Œæ— ç¼ä½“éªŒ

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å®‰è£…

```bash
# ä» PyPI å®‰è£…
pip install leanup 

# æˆ–è€…å…‹éš†ä»“åº“åå®‰è£…
git clone https://github.com/Lean-zh/LeanUp.git
cd LeanUp
pip install -e .
```

### åŸºç¡€ä½¿ç”¨

```bash
# æŸ¥çœ‹å¸®åŠ©
leanup --help

# å®‰è£… elan å¹¶åˆå§‹åŒ–é…ç½®
leanup init

# å®‰è£… 
leanup install # stable

# æŸ¥çœ‹çŠ¶æ€
leanup status

# ä»£ç†æ‰§è¡Œ elan å‘½ä»¤
leanup elan --help
leanup elan toolchain list
leanup elan toolchain install stable
leanup elan default stable
```

## ğŸ“– è¯¦ç»†ä½¿ç”¨æŒ‡å—

### ç®¡ç† Lean å·¥å…·é“¾

å®‰è£… elan åï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ `leanup elan` å‘½ä»¤æ¥ç®¡ç† Lean å·¥å…·é“¾ï¼š

```bash
# åˆ—å‡ºæ‰€æœ‰å¯ç”¨çš„å·¥å…·é“¾
leanup elan toolchain list

# å®‰è£…ç¨³å®šç‰ˆå·¥å…·é“¾
leanup elan toolchain install stable

# å®‰è£…å¤œé—´æ„å»ºç‰ˆæœ¬
leanup elan toolchain install leanprover/lean4:nightly

# è®¾ç½®é»˜è®¤å·¥å…·é“¾
leanup elan default stable

# æ›´æ–°æ‰€æœ‰å·¥å…·é“¾
leanup elan update

# æŸ¥çœ‹å½“å‰æ´»åŠ¨çš„å·¥å…·é“¾
leanup elan show
```

### ä»“åº“ç®¡ç†

```bash
# å®‰è£… Mathlib
leanup repo install leanprover-community/mathlib4

# å®‰è£…ç‰¹å®šåˆ†æ”¯æˆ–æ ‡ç­¾
leanup repo install leanprover-community/mathlib4 -b v4.14.0

# å®‰è£…åˆ°è‡ªå®šä¹‰ç›®å½•
leanup repo install Lean-zh/leanup -d /path/to/custom/dir

# æ§åˆ¶æ„å»ºé€‰é¡¹
leanup repo install leanprover-community/mathlib4 --lake-build

# äº¤äº’å¼
leanup repo install leanprover-community/mathlib4 -i

# æŒ‡å®šè¦æ„å»ºçš„åŒ…
leanup repo install Lean-zh/repl --build-packages "REPL,REPL.Main"

# åˆ—å‡ºå·²å®‰è£…çš„ä»“åº“
leanup repo list

# åœ¨æŒ‡å®šç›®å½•ä¸­æœç´¢ä»“åº“
leanup repo list --search-dir /path/to/repos

# æŒ‰åç§°è¿‡æ»¤ä»“åº“
leanup repo list -n mathlib
```

### äº¤äº’å¼å®‰è£…

ä½¿ç”¨ `leanup repo install` çš„ `--interactive` æ ‡å¿—æ—¶ï¼Œæ‚¨å¯ä»¥é…ç½®ï¼š

- ä»“åº“åç§°ï¼ˆå¿…éœ€ï¼‰
- ä»“åº“æºçš„åŸºç¡€ URL
- åˆ†æ”¯æˆ–æ ‡ç­¾
- å­˜å‚¨ä»“åº“çš„ç›®æ ‡ç›®å½•
- è‡ªå®šä¹‰ç›®æ ‡åç§°
- æ˜¯å¦åœ¨å…‹éš†åè¿è¡Œ `lake update`
- æ˜¯å¦åœ¨å…‹éš†åè¿è¡Œ `lake build`
- è¦ç¼–è¯‘çš„ç‰¹å®šæ„å»ºåŒ…
- æ˜¯å¦è¦†ç›–ç°æœ‰ç›®å½•

### ç¼–ç¨‹æ¥å£

#### ä½¿ç”¨ InstallConfig

```python
from leanup.repo.manager import InstallConfig

# åˆ›å»ºå®‰è£…é…ç½®
config = InstallConfig(
    suffix="leanprover-community/mathlib4",
    source="https://github.com",
    branch="main",
    dest_dir=Path("/path/to/repos"),
    dest_name="mathlib4_main",
    lake_update=True,
    lake_build=True,
    build_packages=["REPL", "REPL.Main"],
    override=False
)

# æ‰§è¡Œå®‰è£…
config.install()
```

#### ä½¿ç”¨ RepoManager

```python
from leanup.repo.manager import RepoManager

# åˆ›å»ºä»“åº“ç®¡ç†å™¨
repo = RepoManager("/path/to/directory")

# å…‹éš†ä»“åº“
repo.clone_from("https://github.com/owner/repo.git", branch="main")

# æ–‡ä»¶æ“ä½œ
repo.write_file("test.txt", "Hello world")
content = repo.read_file("test.txt")
repo.edit_file("test.txt", "world", "universe")

# åˆ—å‡ºæ–‡ä»¶å’Œç›®å½•
files = repo.list_files("*.lean")
dirs = repo.list_dirs()
```

#### ä½¿ç”¨ LeanRepo

```python
from leanup.repo.manager import LeanRepo

# åˆ›å»º Lean ä»“åº“ç®¡ç†å™¨
lean_repo = LeanRepo("/path/to/lean/project")

# è·å–é¡¹ç›®ä¿¡æ¯
info = lean_repo.get_project_info()
print(f"Lean ç‰ˆæœ¬: {info['lean_version']}")
print(f"æœ‰ lakefile: {info['has_lakefile_toml']}")

# Lake æ“ä½œ
stdout, stderr, returncode = lean_repo.lake_init("my_project", "std")
stdout, stderr, returncode = lean_repo.lake_update()
stdout, stderr, returncode = lean_repo.lake_build()
stdout, stderr, returncode = lean_repo.lake_env_lean("Main.lean")
```

## ğŸ› ï¸ å¼€å‘

### ç¯å¢ƒè®¾ç½®

```bash
# å…‹éš†ä»“åº“
git clone https://github.com/Lean-zh/LeanUp.git
cd LeanUp

# å®‰è£…å¼€å‘ä¾èµ–
pip install -e ".[dev]"

# å®‰è£…é¡¹ç›®ï¼ˆå¯ç¼–è¾‘æ¨¡å¼ï¼‰
pip install -e .
```

### è¿è¡Œæµ‹è¯•

```bash
# è¿è¡Œæ‰€æœ‰æµ‹è¯•
pytest tests/ -v

# è¿è¡Œæµ‹è¯•å¹¶ç”Ÿæˆè¦†ç›–ç‡æŠ¥å‘Š
coverage run -m pytest tests/
coverage report -m
```

## âš™ï¸ é…ç½®

LeanUp ä½¿ç”¨ä½äº `~/.leanup/config.toml` çš„é…ç½®æ–‡ä»¶ã€‚æ‚¨å¯ä»¥è‡ªå®šä¹‰ï¼š

- é»˜è®¤ä»“åº“æº
- ä»“åº“ç¼“å­˜ç›®å½•
- elan è‡ªåŠ¨å®‰è£…è®¾ç½®
- ä»“åº“å‰ç¼€å’ŒåŸºç¡€ URL

## ğŸŒ è·¨å¹³å°æ”¯æŒ

LeanUp åœ¨ä»¥ä¸‹å¹³å°ä¸Šç»è¿‡æµ‹è¯•ï¼š

- **Linux**: Ubuntu 20.04+, CentOS 7+, Debian 10+
- **macOS**: macOS 10.15+ï¼ˆIntel å’Œ Apple Siliconï¼‰
- **Windows**: Windows 10+

## ğŸ“Š é¡¹ç›®çŠ¶æ€

| åŠŸèƒ½ | çŠ¶æ€ | è¯´æ˜ |
|------|------|------|
| elan å®‰è£… | âœ… | æ”¯æŒè‡ªåŠ¨æ£€æµ‹å¹³å°å’Œç‰ˆæœ¬ |
| å‘½ä»¤ä»£ç† | âœ… | é€æ˜ä¼ é€’æ‰€æœ‰ elan å‘½ä»¤ |
| ä»“åº“ç®¡ç† | âœ… | å®‰è£…å’Œç®¡ç† Lean ä»“åº“ |
| äº¤äº’å¼é…ç½® | âœ… | ç”¨æˆ·å‹å¥½çš„è®¾ç½®è¿‡ç¨‹ |
| è·¨å¹³å°æ”¯æŒ | âœ… | Linux/macOS/Windows |
| å•å…ƒæµ‹è¯• | âœ… | è¦†ç›–ç‡ > 85% |
| CI/CD | âœ… | GitHub Actions å¤šå¹³å°æµ‹è¯• |

## ğŸ¤ è´¡çŒ®

æ¬¢è¿è´¡çŒ®ä»£ç ï¼è¯·æŸ¥çœ‹ [è´¡çŒ®æŒ‡å—](CONTRIBUTING.md) äº†è§£è¯¦ç»†ä¿¡æ¯ã€‚

## ğŸ“ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ã€‚è¯¦ç»†ä¿¡æ¯è¯·æŸ¥çœ‹ [LICENSE](LICENSE) æ–‡ä»¶ã€‚

## ğŸ”— ç›¸å…³é“¾æ¥

- [Lean å®˜æ–¹ç½‘ç«™](https://leanprover.github.io/)
- [Lean ç¤¾åŒºæ–‡æ¡£](https://leanprover-community.github.io/)
- [elan å·¥å…·é“¾ç®¡ç†å™¨](https://github.com/leanprover/elan)
