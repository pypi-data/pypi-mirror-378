<body class="bg-gradient-animated overflow-hidden sparkles-enabled">
    <!-- Floating Particles Component -->
    <div class="floating-particles">
        <!-- Particles auto-generated by JavaScript -->
    </div>

    <!-- Main Content -->
    <main class="centered-layout">
        <div class="glass-card glass-card--center animate-card-enter">
            <!-- Success Icon with Bounce Animation -->
            <div class="icon-container icon-lg icon-success mb-xl animate-bounce-in">
                <div class="icon-content">âœ“</div>
            </div>

            <!-- Success Title -->
            <h1 class="text-white font-bold text-3xl mb-lg animate-fade-in-up animate-delay-400">
                Login Successful!
            </h1>

            <!-- Success Message -->
            <p class="text-white mb-xl animate-fade-in-up animate-delay-600">
                You have been successfully authenticated with Microsoft.
            </p>

            <!-- Return Button with Ripple Effect -->
            <button class="btn btn-primary btn-ripple mb-xl animate-fade-in-up animate-delay-800"
                    onclick="returnHome()">
                Return to Homepage
            </button>

            <!-- Footer Text -->
            <p class="text-sm text-white-70 animate-fade-in animate-delay-800">
                You can also close this window and return to the application.
            </p>
        </div>
    </main>

    {% if fastj2_js %}
        <script>{{ fastj2_js | safe }}</script>
    {% endif %}

    <!-- Page-specific JavaScript -->
    <script>
        function returnHome() {
            // Add success ripple effect
            const button = event.target;
            const ripple = document.createElement('div');
            ripple.className = 'ripple';

            const rect = button.getBoundingClientRect();
            const size = Math.max(rect.width, rect.height);
            ripple.style.width = ripple.style.height = size + 'px';
            ripple.style.left = (event.clientX - rect.left - size / 2) + 'px';
            ripple.style.top = (event.clientY - rect.top - size / 2) + 'px';

            button.appendChild(ripple);

            setTimeout(() => {
                if (ripple.parentNode) {
                    ripple.parentNode.removeChild(ripple);
                }
            }, 600);

            // Navigate with delay for ripple effect
            setTimeout(() => {
                if (window.opener && window.opener !== window) {
                    window.opener.location.href = '{{ redirect_url }}';
                    window.close();
                } else {
                    window.location.href = '{{ redirect_url }}';
                }
            }, 150);
        }

        // Auto-close popup after 10 seconds
        setTimeout(function() {
            if (window.opener && window.opener !== window) {
                window.close();
            }
        }, 10000);
    </script>
</body>