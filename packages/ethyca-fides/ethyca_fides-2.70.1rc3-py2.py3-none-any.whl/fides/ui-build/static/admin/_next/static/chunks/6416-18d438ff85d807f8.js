"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6416],{77213:function(e,t,n){n.d(t,{Z:function(){return f}});var i=n(24246),o=n(96306),a=n(88038),s=n.n(a),r=n(86677);n(27378);var l=n(25980),u=n(90867),d=n(42478),c=n(77830),g=()=>{let e=(0,r.useRouter)();return(0,i.jsx)(o.xuv,{bg:"gray.50",border:"1px solid",borderColor:"blue.400",borderRadius:"md",justifyContent:"space-between",p:5,mb:5,mt:5,children:(0,i.jsxs)(o.xuv,{children:[(0,i.jsxs)(o.Kqy,{direction:{base:"column",sm:"row"},justifyContent:"space-between",children:[(0,i.jsx)(o.xvT,{fontWeight:"semibold",children:"Configure your storage and messaging provider"}),(0,i.jsx)(o.wpx,{onClick:()=>{e.push(c.AD)},children:"Configure"})]}),(0,i.jsxs)(o.xvT,{children:["Before Fides can process your privacy requests we need two simple steps to configure your storage and email client."," "]})]})})},f=e=>{let{children:t,title:n,padded:a=!0,mainProps:c}=e,f=(0,l.hz)(),v=(0,r.useRouter)(),p="/privacy-requests"===v.pathname||"/datastore-connection"===v.pathname,m=!(f.flags.messagingConfiguration&&p),{data:y}=(0,d.JE)(void 0,{skip:m}),{data:h}=(0,u.PW)(void 0,{skip:m}),C=f.flags.messagingConfiguration&&(!y||!h)&&p;return(0,i.jsxs)(o.kCb,{"data-testid":n,direction:"column",h:"100vh",children:[(0,i.jsxs)(s(),{children:[(0,i.jsxs)("title",{children:["Fides Admin UI - ",n]}),(0,i.jsx)("meta",{name:"description",content:"Privacy Engineering Platform"}),(0,i.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,i.jsxs)(o.kCb,{as:"main",direction:"column",py:a?6:0,px:a?10:0,h:a?"calc(100% - 48px)":"full",flex:1,minWidth:0,overflow:"auto",...c,children:[C?(0,i.jsx)(g,{}):null,t]})]})}},71248:function(e,t,n){n.d(t,{A:function(){return l}});var i=n(24246),o=n(34090),a=n(46782),s=n(97181),r=n(40324);let l=e=>{var t,n;let{name:l,fieldSchema:u,isRequired:d,layout:c="stacked",secretsSchema:g,validate:f}=e,v=(null===(n=u.allOf)||void 0===n?void 0:null===(t=n[0])||void 0===t?void 0:t.$ref)&&u.allOf[0].$ref!==a.j?null==g?void 0:g.definitions[u.allOf[0].$ref.replace("#/definitions/","")]:void 0,p=!!(null==v?void 0:v.enum)||u.options,m="boolean"===u.type,y=()=>{var e;if((null===(e=u.allOf)||void 0===e?void 0:e[0].$ref)===a.j)return"Enter dataset.collection.field"};return(0,i.jsx)(o.gN,{id:l,name:l,validate:f,children:e=>{let{field:t}=e;if(p){var n,o,a;let e=null!==(a=null==v?void 0:null===(n=v.enum)||void 0===n?void 0:n.map(e=>({label:e,value:e})))&&void 0!==a?a:null===(o=u.options)||void 0===o?void 0:o.map(e=>({label:e,value:e}));return(0,i.jsx)(s.d,{name:t.name,id:t.name,label:u.title,isRequired:d,tooltip:u.description,layout:c,options:e,mode:u.multiselect?"multiple":void 0},t.name)}return m?(0,i.jsx)(s.d,{name:t.name,id:t.name,label:u.title,isRequired:d,tooltip:u.description,layout:c,options:[{label:"False",value:"false"},{label:"True",value:"true"}]},t.name):(0,i.jsx)(r.j0,{...t,label:u.title,tooltip:u.description,isRequired:d,type:u.sensitive?"password":"text",placeholder:y(),autoComplete:"off",color:"gray.700",variant:c})}},l)}},46782:function(e,t,n){n.d(t,{j:function(){return a},l:function(){return s}});var i=n(30454),o=n.n(i);let a="#/definitions/FidesDatasetReference",s=e=>{let t=(e,t,n)=>{let i;return(void 0===t||""===t||void 0===t)&&(i="".concat(e," is required")),n===a&&((null==t?void 0:t.includes("."))?t.split(".").length<3&&(i="Dataset reference must include at least three parts"):i="Dataset reference must be dot delimited"),i},n=t=>{var n,i;return null!==(i=null==e?void 0:null===(n=e.required)||void 0===n?void 0:n.includes(t))&&void 0!==i&&i};return{validateField:t,isRequiredField:n,getFieldValidation:(e,i)=>{if(n(e))return e=>{var n;return t(i.title,e,null===(n=i.allOf)||void 0===n?void 0:n[0].$ref)}},preprocessValues:t=>{let n=o()(t);return e&&Object.keys(e.properties).forEach(t=>{var i,o;if((null===(i=e.properties[t].allOf)||void 0===i?void 0:i[0].$ref)===a){let e=null===(o=n.secrets[t])||void 0===o?void 0:o.split(".");e&&(n.secrets[t]={dataset:e.shift(),field:e.join("."),direction:"from"})}"WebsiteSchema"!==e.title||"URL"!==e.properties[t].title||n.secrets[t].startsWith("http://")||n.secrets[t].startsWith("https://")||(n.secrets[t]="https://".concat(n.secrets[t]))}),n}}}},41337:function(e,t,n){var i=n(24246),o=n(96306);n(27378);var a=n(88337),s=n(16394),r=n(14746);let l=r.Ny+r.iW.get(a.R.WEBSITE),u=e=>void 0!==e.connection_type,d=e=>void 0!==e.encoded_icon,c=e=>(null==e?void 0:e.connection_type)===a.R.WEBSITE,g=e=>(null==e?void 0:e.connection_type)===a.R.SAAS;t.Z=e=>{let{data:t,...n}=e;return(0,i.jsx)(o.Eep,{boxSize:"32px",objectFit:"cover",src:(()=>{var e,n;let i;if(d(t)&&t.encoded_icon)return"data:image/svg+xml;base64,".concat(t.encoded_icon);if(c(t)){let n=null===(e=t.secrets)||void 0===e?void 0:e.url;if(!n)return l;let i=(0,s.ge)(n);return(0,s.tl)(i,100)}if(u(t)){if(g(t)&&(null===(n=t.saas_config)||void 0===n?void 0:n.type)){let e=t.saas_config.type,n=r.LN.get(e);return n?r.Ny+n:r.Ny+r.iW.get(a.R.SAAS)}i=[...r.iW].find(e=>{let[n]=e;return t.connection_type.toString()===n.toString()})}else if(d(t)){let{identifier:e}=t;i=[...r.iW].find(t=>{let[n]=t;return n.toLowerCase()===e.toLowerCase()})}return i?r.Ny+i[1]:r.VD})(),fallbackSrc:c(t)?l:r.VD,alt:(()=>{if(u(t)){var e;return null!==(e=t.name)&&void 0!==e?e:t.key}return d(t)?t.human_readable:t})(),...n})}},19812:function(e,t,n){n.d(t,{t:function(){return r}});var i=n(17245),o=n(14207),a=n(27378),s=n(41966);let r=e=>{var t,n,r;let{connectionConfig:l}=e,[u]=(0,o.S6)(),{data:d}=(0,o.Eg)(null!==(n=null==l?void 0:l.key)&&void 0!==n?n:""),c=null!==(r=null==d?void 0:null===(t=d.items)||void 0===t?void 0:t.map(e=>e.fides_key))&&void 0!==r?r:[],g=c.map(e=>({label:e,value:e})),{data:f}=(0,s.LH)({onlyUnlinkedDatasets:!0,minimal:!0}),v=(0,a.useMemo)(()=>{var e;return null!==(e=null==f?void 0:f.map(e=>({value:e.fides_key,label:"".concat(e.name," (").concat(e.fides_key,")")||0})))&&void 0!==e?e:[]},[f]),{errorAlert:p,successAlert:m}=(0,i.VY)();return{dropdownOptions:[...g,...v],initialDatasets:c,patchConnectionDatasetConfig:async function(e,t){var n,i,o;let{showSuccessAlert:a=!0}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=null!==(o=null===(n=e.dataset)||void 0===n?void 0:n.map(e=>({fides_key:e,ctl_dataset_fides_key:e})))&&void 0!==o?o:[],r=await u({connection_key:t,dataset_pairs:s}).unwrap();(null===(i=r.failed)||void 0===i?void 0:i.length)>0?p(r.failed[0].message):a&&m("Dataset successfully updated!")}}}},42478:function(e,t,n){n.d(t,{FU:function(){return u},JE:function(){return o},Ki:function(){return c},SU:function(){return g},W:function(){return f},h9:function(){return a},jc:function(){return i},qt:function(){return l},sn:function(){return d}});let{useGetEmailInviteStatusQuery:i,useGetActiveMessagingProviderQuery:o,useCreateMessagingConfigurationMutation:a,useCreateMessagingConfigurationSecretsMutation:s,useGetMessagingConfigurationDetailsQuery:r,useGetMessagingConfigurationsQuery:l,useGetMessagingConfigurationByKeyQuery:u,useUpdateMessagingConfigurationByKeyMutation:d,useUpdateMessagingConfigurationSecretsByKeyMutation:c,useCreateTestConnectionMessageMutation:g,useDeleteMessagingConfigurationByKeyMutation:f}=n(78780).u.injectEndpoints({endpoints:e=>({getEmailInviteStatus:e.query({query:()=>({url:"/messaging/email-invite/status"}),providesTags:()=>["Email Invite Status"]}),createMessagingConfiguration:e.mutation({query:e=>({url:"messaging/config",method:"POST",body:e}),invalidatesTags:["Messaging Config","Configuration Settings"]}),getActiveMessagingProvider:e.query({queryFn:async(e,t,n,i)=>{let o=await i({url:"messaging/default/active"});return o.error&&404===o.error.status?{data:null}:o},providesTags:["Messaging Config"]}),createMessagingConfigurationSecrets:e.mutation({query:e=>({url:"messaging/default/".concat(e.service_type,"/secret"),method:"PUT",body:e.details}),invalidatesTags:["Messaging Config","Configuration Settings"]}),getMessagingConfigurationDetails:e.query({query:e=>({url:"messaging/default/".concat(e.type)}),providesTags:["Messaging Config"]}),getMessagingConfigurations:e.query({query:()=>({url:"messaging/config"}),providesTags:["Messaging Config"]}),getMessagingConfigurationByKey:e.query({query:e=>({url:"messaging/config/".concat(e.key)}),providesTags:["Messaging Config"]}),createTestConnectionMessage:e.mutation({query:e=>({url:"messaging/test/".concat(e.service_type),method:"POST",body:e.details}),invalidatesTags:["Messaging Config"]}),updateMessagingConfigurationByKey:e.mutation({query:e=>({url:"messaging/config/".concat(e.key),method:"PATCH",body:e.config}),invalidatesTags:["Messaging Config","Configuration Settings"]}),updateMessagingConfigurationSecretsByKey:e.mutation({query:e=>({url:"messaging/config/".concat(e.key,"/secret"),method:"PUT",body:e.secrets}),invalidatesTags:["Messaging Config","Configuration Settings"]}),deleteMessagingConfigurationByKey:e.mutation({query:e=>({url:"messaging/config/".concat(e.key),method:"DELETE"}),invalidatesTags:["Messaging Config","Configuration Settings"]})})})}}]);