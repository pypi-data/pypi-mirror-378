Metadata-Version: 2.4
Name: fundrive-ossutil
Version: 0.1.4
Summary: é˜¿é‡Œäº‘OSSå‘½ä»¤è¡Œå·¥å…·ossutilçš„PythonåŒ…è£…å™¨ï¼Œæä¾›æ›´åŠ å‹å¥½çš„Pythonæ¥å£
Author-email: ç‰›å“¥ <niuliangtao@qq.com>, farfarfun <farfarfun@qq.com>
Maintainer-email: ç‰›å“¥ <niuliangtao@qq.com>, farfarfun <farfarfun@qq.com>
License: MIT
Project-URL: Organization, https://github.com/farfarfun
Project-URL: Repository, https://github.com/farfarfun/fundrive-ossutil
Project-URL: Releases, https://github.com/farfarfun/fundrive-ossutil/releases
Keywords: oss,aliyun,ossutil,cloud,storage
Classifier: Development Status :: 4 - Beta
Classifier: Intended Audience :: Developers
Classifier: License :: OSI Approved :: MIT License
Classifier: Operating System :: OS Independent
Classifier: Programming Language :: Python :: 3
Classifier: Programming Language :: Python :: 3.8
Classifier: Programming Language :: Python :: 3.9
Classifier: Programming Language :: Python :: 3.10
Classifier: Programming Language :: Python :: 3.11
Classifier: Programming Language :: Python :: 3.12
Classifier: Programming Language :: Python :: 3.13
Classifier: Topic :: Software Development :: Libraries :: Python Modules
Classifier: Topic :: System :: Archiving
Classifier: Topic :: Internet :: File Transfer Protocol (FTP)
Requires-Python: >=3.8
Description-Content-Type: text/markdown
Requires-Dist: funutil>=0.1.0
Requires-Dist: requests>=2.25.0
Provides-Extra: dev
Requires-Dist: pytest>=7.0.0; extra == "dev"
Requires-Dist: pytest-cov>=4.0.0; extra == "dev"
Requires-Dist: black>=22.0.0; extra == "dev"
Requires-Dist: flake8>=5.0.0; extra == "dev"
Requires-Dist: mypy>=1.0.0; extra == "dev"
Requires-Dist: pre-commit>=2.20.0; extra == "dev"
Provides-Extra: test
Requires-Dist: pytest>=7.0.0; extra == "test"
Requires-Dist: pytest-cov>=4.0.0; extra == "test"
Requires-Dist: pytest-mock>=3.10.0; extra == "test"

# fundrive-ossutil

é˜¿é‡Œäº‘OSSå‘½ä»¤è¡Œå·¥å…·ossutilçš„PythonåŒ…è£…å™¨ï¼Œæä¾›æ›´åŠ å‹å¥½çš„Pythonæ¥å£ã€‚æœ¬é¡¹ç›®å°†ossutilçš„å®‰è£…å’Œä½¿ç”¨åŒ…è£…æˆä¸€ä¸ªPythonåŒ…ï¼Œå½“ç”¨æˆ·å®‰è£…PythonåŒ…çš„æ—¶å€™ï¼Œä¼šæŒ‰ç…§ossutilçš„å®‰è£…æµç¨‹ï¼Œè‡ªåŠ¨ä¸‹è½½ossutilçš„å®‰è£…åŒ…å¹¶å®‰è£…ã€‚


## åŠŸèƒ½ç‰¹æ€§

- ğŸš€ ç®€å•æ˜“ç”¨çš„Python API
- ğŸ“ æ”¯æŒæ–‡ä»¶ä¸Šä¼ ã€ä¸‹è½½ã€åˆ é™¤ç­‰åŸºæœ¬æ“ä½œ
- ğŸ“‹ æ”¯æŒå¯¹è±¡åˆ—è¡¨æŸ¥è¯¢
- ğŸ”§ è‡ªåŠ¨å®‰è£…å’Œé…ç½®ossutilå‘½ä»¤è¡Œå·¥å…·
- ğŸ“ å®Œæ•´çš„æ—¥å¿—è®°å½•å’Œé”™è¯¯å¤„ç†
- ğŸ”’ æ”¯æŒå¤šç§è®¤è¯æ–¹å¼
- ğŸŒ å…¼å®¹æ‰€æœ‰é˜¿é‡Œäº‘OSSåŒºåŸŸ

## å¿«é€Ÿå¼€å§‹

### å®‰è£…

```bash
pip install fundrive-ossutil
```

**ğŸ‰ æ™ºèƒ½è‡ªåŠ¨å®‰è£…**: å½“æ‚¨é¦–æ¬¡ä½¿ç”¨ `OSSUtil` ç±»æ—¶ï¼Œç¨‹åºä¼šè‡ªåŠ¨æ£€æµ‹å¹¶å®‰è£… ossutil å‘½ä»¤è¡Œå·¥å…·ï¼

### å®‰è£…æµç¨‹è¯´æ˜

#### ç¬¬ä¸€æ­¥ï¼šå®‰è£… Python åŒ…
```bash
pip install fundrive-ossutil
```

#### ç¬¬äºŒæ­¥ï¼šè‡ªåŠ¨å®‰è£… ossutilï¼ˆæ¨èï¼‰
```python
# é¦–æ¬¡ä½¿ç”¨æ—¶ä¼šè‡ªåŠ¨æ£€æµ‹å¹¶å®‰è£…ossutil
from fundrives.ossutil import OSSUtil

# å¦‚æœossutilæœªå®‰è£…ï¼Œä¼šçœ‹åˆ°ä»¥ä¸‹æç¤ºï¼š
# ğŸ”§ fundrive-ossutil: æ£€æµ‹åˆ°ossutilæœªå®‰è£…ï¼Œæ­£åœ¨è‡ªåŠ¨å®‰è£…...
# ğŸ’¡ å¦‚éœ€ç¦ç”¨è‡ªåŠ¨å®‰è£…ï¼Œè¯·è®¾ç½®ç¯å¢ƒå˜é‡: FUNDRIVE_OSSUTIL_NO_AUTO_INSTALL=1
# âœ… fundrive-ossutil: ossutilå®‰è£…æˆåŠŸï¼

oss = OSSUtil()  # ç°åœ¨å¯ä»¥æ­£å¸¸ä½¿ç”¨äº†
```

#### æ‰‹åŠ¨å®‰è£…æ–¹å¼
å¦‚æœæ‚¨å¸Œæœ›æ‰‹åŠ¨æ§åˆ¶å®‰è£…è¿‡ç¨‹ï¼š

**æ–¹å¼1ï¼šä½¿ç”¨å‘½ä»¤è¡Œå·¥å…·**
```bash
pip install fundrive-ossutil
install-ossutil
```

**æ–¹å¼2ï¼šä½¿ç”¨Pythonä»£ç **
```python
from fundrives.ossutil import install_ossutil
success = install_ossutil()
if success:
    print("ossutilå®‰è£…æˆåŠŸï¼")
```

**æ–¹å¼3ï¼šç¡®ä¿å®‰è£…å‡½æ•°**
```python
from fundrives.ossutil import ensure_ossutil_installed
if ensure_ossutil_installed():
    print("ossutilå¯ç”¨")
else:
    print("ossutilä¸å¯ç”¨ï¼Œè¯·æ£€æŸ¥å®‰è£…")
```

#### ç¦ç”¨è‡ªåŠ¨å®‰è£…
å¦‚æœæ‚¨ä¸å¸Œæœ›è‡ªåŠ¨å®‰è£…ossutilï¼š
```bash
export FUNDRIVE_OSSUTIL_NO_AUTO_INSTALL=1
```

è®¾ç½®æ­¤ç¯å¢ƒå˜é‡åï¼Œç¨‹åºä¸ä¼šè‡ªåŠ¨å®‰è£…ossutilï¼Œæ‚¨éœ€è¦æ‰‹åŠ¨å®‰è£…ã€‚

### åŸºæœ¬é…ç½®

1. **ä½¿ç”¨é…ç½®æ–‡ä»¶ï¼ˆæ¨èï¼‰**

åˆ›å»ºé…ç½®æ–‡ä»¶ `~/.ossutilconfig`ï¼š
```ini
[Credentials]
language=CH
endpoint=https://oss-cn-hangzhou.aliyuncs.com
accessKeyID=your_access_key_id
accessKeySecret=your_access_key_secret
```

2. **ä½¿ç”¨ç¯å¢ƒå˜é‡**

```bash
export OSS_ENDPOINT="https://oss-cn-hangzhou.aliyuncs.com"
export OSS_ACCESS_KEY_ID="your_access_key_id"
export OSS_ACCESS_KEY_SECRET="your_access_key_secret"
```

### åŸºæœ¬ä½¿ç”¨

```python
from fundrives.ossutil import OSSUtil

# åˆå§‹åŒ–ï¼ˆä½¿ç”¨é…ç½®æ–‡ä»¶ï¼‰
oss = OSSUtil()

# æˆ–è€…ç›´æ¥ä¼ å…¥å‚æ•°
oss = OSSUtil(
    endpoint="https://oss-cn-hangzhou.aliyuncs.com",
    access_key_id="your_access_key_id",
    access_key_secret="your_access_key_secret"
)

# ä¸Šä¼ æ–‡ä»¶
success = oss.upload_file("./local_file.txt", "remote/path/file.txt", "my-bucket")
if success:
    print("ä¸Šä¼ æˆåŠŸ")

# ä¸‹è½½æ–‡ä»¶
success = oss.download_file("remote/path/file.txt", "./downloaded_file.txt", "my-bucket")
if success:
    print("ä¸‹è½½æˆåŠŸ")

# åˆ—å‡ºå¯¹è±¡
objects = oss.list_objects(prefix="images/", bucket="my-bucket")
for obj in objects:
    print(obj)

# åˆ é™¤å¯¹è±¡
success = oss.delete_object("remote/path/file.txt", "my-bucket")
if success:
    print("åˆ é™¤æˆåŠŸ")
```

## ä½¿ç”¨è¯´æ˜

### åŸºæœ¬ç”¨æ³•

#### æ–‡ä»¶æ“ä½œ

```python
from fundrives.ossutil import OSSUtil

oss = OSSUtil()

# ä¸Šä¼ å•ä¸ªæ–‡ä»¶
oss.upload_file("local.txt", "remote/file.txt", "bucket-name")

# æ‰¹é‡ä¸Šä¼ 
files = [
    ("local1.txt", "remote/file1.txt"),
    ("local2.txt", "remote/file2.txt")
]
for local, remote in files:
    oss.upload_file(local, remote, "bucket-name")

# ä¸‹è½½æ–‡ä»¶
oss.download_file("remote/file.txt", "local_copy.txt", "bucket-name")
```

#### å¯¹è±¡ç®¡ç†

```python
# åˆ—å‡ºæ‰€æœ‰å¯¹è±¡
all_objects = oss.list_objects(bucket="bucket-name")

# æŒ‰å‰ç¼€è¿‡æ»¤
image_objects = oss.list_objects(prefix="images/", bucket="bucket-name")

# åˆ é™¤å¯¹è±¡
oss.delete_object("remote/unwanted_file.txt", "bucket-name")
```

### é«˜çº§åŠŸèƒ½

#### è‡ªåŠ¨å®‰è£…ossutil

```python
from fundrives.ossutil import install_ossutil

# è‡ªåŠ¨æ£€æµ‹å¹¶å®‰è£…ossutilå‘½ä»¤è¡Œå·¥å…·
install_ossutil()
```

#### é”™è¯¯å¤„ç†

```python
from fundrives.ossutil import OSSUtil

oss = OSSUtil()

try:
    success = oss.upload_file("nonexistent.txt", "remote/file.txt", "bucket")
    if not success:
        print("ä¸Šä¼ å¤±è´¥ï¼Œè¯·æ£€æŸ¥æ—¥å¿—")
except Exception as e:
    print(f"å‘ç”Ÿå¼‚å¸¸: {e}")
```

## APIæ–‡æ¡£

è¯¦ç»†çš„APIæ–‡æ¡£è¯·å‚è€ƒï¼š[docs/API.md](docs/API.md)

## å¼€å‘æŒ‡å—

### ç¯å¢ƒæ­å»º

1. å…‹éš†é¡¹ç›®
```bash
git clone https://github.com/farfarfun/fundrive-ossutil.git
cd fundrive-ossutil
```

2. å®‰è£…å¼€å‘ä¾èµ–
```bash
pip install -e .
pip install pytest pytest-cov black flake8 mypy
```

3. è¿è¡Œæµ‹è¯•
```bash
pytest --cov=src/fundrives/ossutil
```

### ä»£ç è§„èŒƒ

- éµå¾ªPEP8è§„èŒƒ
- ä½¿ç”¨ä¸­æ–‡æ³¨é‡Š
- å‡½æ•°å’Œç±»å¿…é¡»æœ‰æ–‡æ¡£å­—ç¬¦ä¸²
- ä½¿ç”¨ `funutil.getLogger` è¿›è¡Œæ—¥å¿—è®°å½•

è¯¦ç»†çš„å¼€å‘è§„èŒƒè¯·å‚è€ƒï¼š[docs/DEVELOPMENT_GUIDE.md](docs/DEVELOPMENT_GUIDE.md)

### æµ‹è¯•

```bash
# è¿è¡Œæ‰€æœ‰æµ‹è¯•
pytest

# ç”Ÿæˆè¦†ç›–ç‡æŠ¥å‘Š
pytest --cov=src/fundrives/ossutil --cov-report=html

# è¿è¡Œç‰¹å®šæµ‹è¯•
pytest tests/test_ossutil.py
```

## å˜æ›´æ—¥å¿—

è¯¦ç»†çš„ç‰ˆæœ¬å˜æ›´è®°å½•è¯·å‚è€ƒï¼š[docs/CHANGELOG.md](docs/CHANGELOG.md)

## è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ã€‚è¯¦æƒ…è¯·å‚é˜… [LICENSE](LICENSE) æ–‡ä»¶ã€‚

## è´¡çŒ®æŒ‡å—

æˆ‘ä»¬æ¬¢è¿æ‰€æœ‰å½¢å¼çš„è´¡çŒ®ï¼è¯·éµå¾ªä»¥ä¸‹æ­¥éª¤ï¼š

1. Fork æœ¬é¡¹ç›®
2. åˆ›å»ºæ‚¨çš„åŠŸèƒ½åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ‚¨çš„æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. å¼€å¯ä¸€ä¸ª Pull Request

### è´¡çŒ®è¦æ±‚

- ä»£ç å¿…é¡»é€šè¿‡æ‰€æœ‰æµ‹è¯•
- æ–°åŠŸèƒ½éœ€è¦æ·»åŠ ç›¸åº”çš„æµ‹è¯•
- éµå¾ªé¡¹ç›®çš„ä»£ç è§„èŒƒ
- æ›´æ–°ç›¸å…³æ–‡æ¡£

## è”ç³»æ–¹å¼

- **é¡¹ç›®ä¸»é¡µ**: https://github.com/farfarfun/fundrive-ossutil
- **PyPI**: https://pypi.org/project/fundrive-ossutil/
- **ç»„ç»‡**: https://github.com/farfarfun
- **é—®é¢˜åé¦ˆ**: https://github.com/farfarfun/fundrive-ossutil/issues

## ç›¸å…³é¡¹ç›®

fundrive-ossutil æ˜¯ farfarfun ç”Ÿæ€ç³»ç»Ÿçš„ä¸€éƒ¨åˆ†ï¼š

- **fundrive**: https://github.com/farfarfun/fundrive - ç»Ÿä¸€çš„äº‘å­˜å‚¨é©±åŠ¨å™¨
- **funutil**: https://pypi.org/project/funutil/ - é€šç”¨å·¥å…·åº“
- **æ›´å¤šé¡¹ç›®**: https://github.com/farfarfun

## å‚è€ƒèµ„æ–™

- [é˜¿é‡Œäº‘OSSå®˜æ–¹æ–‡æ¡£](https://help.aliyun.com/zh/oss/)
- [ossutilå‘½ä»¤è¡Œå·¥å…·](https://help.aliyun.com/zh/oss/developer-reference/ossutil-overview/)
- [Python OSS SDK](https://help.aliyun.com/zh/oss/developer-reference/python/)
