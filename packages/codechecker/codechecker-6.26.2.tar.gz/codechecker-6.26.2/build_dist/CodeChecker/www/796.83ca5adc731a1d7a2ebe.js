(self.webpackChunkcodechecker=self.webpackChunkcodechecker||[]).push([[796],{3350:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});var o=r(98215);const n={name:"Alerts",props:{success:{type:Boolean,default:!1},error:{type:Boolean,default:!1},successMsg:{type:String,default:null},errorMsg:{type:String,default:null}}},s=(0,r(14486).A)(n,(function(){var e=this,t=e._self._c;return t("span",[t(o.A,{attrs:{dismissible:"",color:"success",border:"left",elevation:"2","colored-border":"",icon:"mdi-check"},model:{value:e.success,callback:function(t){e.success=t},expression:"success"}},[e._v("\n    "+e._s(e.successMsg)+"\n  ")]),e._v(" "),t(o.A,{attrs:{dismissible:"",color:"error",border:"left",elevation:"2","colored-border":"",icon:"mdi-alert-outline"},model:{value:e.error,callback:function(t){e.error=t},expression:"error"}},[e._v("\n    "+e._s(e.errorMsg)+"\n  ")])],1)}),[],!1,null,null,null).exports},28140:(e,t,r)=>{var o=r(98937);o.__esModule&&(o=o.default),"string"==typeof o&&(o=[[e.id,o,""]]),o.locals&&(e.exports=o.locals),(0,r(70534).A)("60d73541",o,!0,{})},50796:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>S});var o=r(7349),n=r(56936),s=r(89873),i=r(50621),a=r(22871),l=r(72084),c=r(86641),u=r(84523),d=r(17733),p=r(69653),f=r(95309),h=r(50649),v=r(64989),m=r(13843),g=(r(25276),r(52675),r(89463),r(2259),r(45700),r(2008),r(51629),r(23792),r(89572),r(2892),r(67945),r(84185),r(83851),r(81278),r(79432),r(26099),r(3362),r(27495),r(47764),r(25440),r(23500),r(62953),r(76031),r(95353)),y=r(34387),b=r(23706);function w(e){return w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},w(e)}function k(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function x(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?k(Object(r),!0).forEach((function(t){_(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):k(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function _(e,t,r){return(t=function(e){var t=function(e){if("object"!=w(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=w(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==w(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const A={name:"Login",components:{Alerts:r(3350).A},data:function(){return{placeholder:null,username:null,password:null,success:!1,error:!1,errorMsg:null,valid:!1,providers:[],dialog:!1,on:!1,optionsShow:!1}},computed:x(x({},(0,g.L8)(["authParams","isAuthenticated"])),{},{ssoButtonText:function(){return 1===this.providers.length?"Login with ".concat(this.providers[0]):"SSO Login"}}),watch:{username:function(){this.resetPlaceholder()},password:function(){this.resetPlaceholder()}},created:function(){if(this.isAuthenticated&&this.authParams.sessionStillActive){var e=this.$router.currentRoute.query.return_to;this.$router.replace(e||{name:"products"})}},mounted:function(){this.fixAutocomplete(),this.getProviders()},methods:{openModal:function(){this.dialog=!0,this.on=!0},toggleOtherLoginOptions:function(){this.optionsShow=!this.optionsShow},ssoButtonHandleClickEvent:function(){return 1===this.providers.length?this.oauth(this.providers[0]):this.openModal()},login:function(){var e=this;this.valid&&this.$store.dispatch(y.S3,{username:this.username,password:this.password,type:"password"}).then((function(){e.success=!0,e.error=!1;var t=e.$router.currentRoute.query.return_to;e.$router.replace(t||{name:"products"})})).catch((function(t){e.errorMsg="Failed to log in! ".concat(t.message),e.error=!0}))},getProviders:function(){var e=this;new Promise((function(e){b.y1.getClient().getOauthProviders((0,b.sm)((function(t){e(t)})))})).then((function(t){t&&(e.providers=t),e.optionsShow=0===e.providers.length})).catch((function(t){e.errorMsg="Providers list was passed incorrectly. ".concat(t.message),e.error=!0}))},oauth:function(e){var t=this;new Promise((function(t){localStorage.setItem("oauth_provider",e),b.y1.getClient().createLink(e,(0,b.sm)((function(e){t(e)})))})).then((function(e){e?(t.success=!1,t.error=!1,window.location.href=e):(t.errorMsg="Server returned an invalid URL: ".concat(e),t.error=!0)})).catch((function(e){t.errorMsg="Failed to access link. ".concat(e.message),t.error=!0}))},fixAutocomplete:function(){var e=this,t=0,r=setInterval((function(){t+=1,(e.placeholder||20===t)&&clearInterval(r);var o=e.$el.querySelector('input[name="username"]:-webkit-autofill'),n=e.$el.querySelector('input[name="password"]:-webkit-autofill');(o||n)&&e.$nextTick((function(){e.placeholder="` `"}))}),100)},resetPlaceholder:function(){this.placeholder=null}}};r(28140);const S=(0,r(14486).A)(A,(function(){var e=this,t=e._self._c;return t(l.A,{staticClass:"fill-height",attrs:{fluid:""}},[t(h.A,{attrs:{align:"center",justify:"center"}},[t(a.A,{attrs:{cols:"12",sm:"8",md:"3"}},[t(s.A,{staticClass:"elevation-1 pa-8",attrs:{outlined:""}},[t(i.ri,[t(l.A,{staticClass:"text-center pt-4"},[t(o.A,{attrs:{id:"avatar",color:"primary",size:120}},[t(p.A,{attrs:{size:100,dark:""}},[e._v("\n                mdi-account\n              ")])],1),e._v(" "),t("div",{staticClass:"display-1 grey--text"},[e._v("\n              Login\n            ")])],1)],1),e._v(" "),0!==e.providers.length?t(i.SL,{staticClass:"d-flex justify-center flex-column",attrs:{id:"btn-container"}},[t(n.A,{attrs:{block:"","x-large":"",color:"primary"},on:{click:e.ssoButtonHandleClickEvent}},[e._v("\n            "+e._s(e.ssoButtonText)+"\n          ")]),e._v(" "),t("a",{staticClass:"text-button text-no-wrap",attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.toggleOtherLoginOptions.apply(null,arguments)}}},[e._v("\n            "+e._s(e.optionsShow?"Hide other options":"Show other options")+"\n          ")])],1):e._e(),e._v(" "),t(u.Qo,[e.optionsShow?t(f.A,[t(i.OQ,{staticClass:"px-0 pb-0"},[t("alerts",{attrs:{success:e.success,"success-msg":"Successfully logged in!",error:e.error,"error-msg":e.errorMsg}}),e._v(" "),t(d.A,{model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[t(m.A,{attrs:{autocomplete:"username",label:"Username",name:"username","append-icon":"mdi-account",type:"text",required:"",outlined:"",rules:[function(){return!!e.username||"This field is required"}],placeholder:e.placeholder},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.login.apply(null,arguments)}},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}}),e._v(" "),t(m.A,{attrs:{id:"password",autocomplete:"current-password",label:"Password",name:"password","append-icon":"mdi-lock",type:"password",required:"",outlined:"",rules:[function(){return!!e.password||"This field is required"}],placeholder:e.placeholder},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.login.apply(null,arguments)}},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1)],1),e._v(" "),t(i.SL,{staticClass:"d-flex justify-center flex-column",attrs:{id:"btn-container"}},[t(n.A,{attrs:{id:"login-btn",block:"","x-large":"",color:"primary"},on:{click:e.login}},[e._v("\n                Login\n              ")])],1)],1):e._e()],1)],1)],1)],1),e._v(" "),t(c.A,{attrs:{width:"500",scrollable:!0},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[t(s.A,[t(i.ri,{staticClass:"headline primary white--text",attrs:{"primary-title":""}},[e._v("\n        Login Methods\n\n        "),t(v.A),e._v(" "),t(n.A,{attrs:{icon:"",dark:""},on:{click:function(t){e.dialog=!1}}},[t(p.A,[e._v("mdi-close")])],1)],1),e._v(" "),t(i.OQ,e._l(e.providers,(function(r){return t(n.A,{key:r,staticStyle:{"margin-top":"10px"},attrs:{id:e.login-e.btn-{provider:r},block:"","x-large":"",color:"primary"},on:{click:function(t){return e.oauth(r)}}},[e._v("\n          Login with "+e._s(r)+"\n        ")])})),1)],1)],1)],1)}),[],!1,null,"7533a2a1",null).exports},98937:(e,t,r)=>{var o=r(31601),n=r(76314)(o);n.push([e.id,"#btn-container>button[data-v-7533a2a1]{margin:0 !important;margin-top:10px !important}#avatar[data-v-7533a2a1]{position:absolute;margin:0 auto;left:0;right:0;top:-70px;width:95px;height:95px;border-radius:50%;z-index:9;padding:15px;box-shadow:0px 2px 2px rgba(0,0,0,.1)}#login-btn[data-v-7533a2a1]{font-size:1.2em}",""]),e.exports=n}}]);