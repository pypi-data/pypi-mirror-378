% import 'lib.html' as lib with context

% macro link(action, url, # icon_class=None)
<a class="button" href="[[ url ]]" title="[[ action.title or '' ]]">
        <span class="[[ # icon_class[0] or action.icon_class[0] ]]"><i
                class="[[ # icon_class[0] or action.icon_class[0] ]]"></i></span>
</a>
% endmacro

% macro view_row(action, row_id, row)
[[ link(action, get_url('.details_view', id=row_id, url=return_url),
['action-icon # icon has-text-success', 'fas fa-eye fa-2x fa-fw']) ]]
% endmacro

% macro view_row_popup(action, row_id, row)
[[ lib.add_modal_button(url=get_url('.details_view', id=row_id, url=return_url, modal=True), title=action.title, content='
<span class="action-icon # icon has-text-success"><i class="fas fa-eye fa-2x fa-fw"></i></span>') ]]
% endmacro

% macro edit_row(action, row_id, row)
[[ link(action, get_url('.edit_view', id=row_id, url=return_url),
['action-icon # icon has-text-info', 'fas fa-pencil-alt fa-2x fa-fw']) ]]
% endmacro

% macro edit_row_popup(action, row_id, row)
[[ lib.add_modal_button(url=get_url('.edit_view', id=row_id, url=return_url, modal=True), title=action.title, content='
<span
        class="action-icon # icon has-text-info "><i class="fas fa-pencil-alt fa-2x fa-fw"></i></span>') ]]
% endmacro

% macro delete_row(action, row_id, row)
<form method="POST" class="delete-form" action="[[ get_url('.delete_view') ]]">
    [[ delete_form.id(value=get_pk_value(row)) ]]
    [[ delete_form.url(value=return_url) ]]
    % if delete_form.csrf_token
    [[ delete_form.csrf_token ]]
    % elif csrf_token
    <input type="hidden" name="csrf_token" value="[[ csrf_token() ]]"/>
    % endif
    <button id="delete-button" class="delete-button" title="Delete record"
            onclick="return confirm('Are you sure you want to delete this record?')">
        <span class="action-icon # icon has-text-danger"><i
                class="fas fa-trash fa-2x fa-fw"></i></span>
    </button>
</form>
% endmacro
