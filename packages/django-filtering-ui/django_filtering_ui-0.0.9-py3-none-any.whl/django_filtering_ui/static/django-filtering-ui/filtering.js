(function(){"use strict";try{if(typeof document<"u"){var a=document.createElement("style");a.appendChild(document.createTextNode(`.df-ui-lozenge[data-v-0f86c33f]{--lozenge-color: #000;--lozenge-border-color: var(--django-filtering-ui-tertiary);--lozenge-background-color: var(--django-filtering-ui-tertiary-shaded);display:flex;align-items:center;gap:.25em;padding:2px .75em;border-radius:10px;color:var(--lozenge-color);border:1px solid var(--lozenge-border-color);background-color:var(--lozenge-background-color)}.df-ui-lozenge-value[data-v-0f86c33f]{font-weight:700}.df-ui-lozenge-clear[data-v-0f86c33f]{text-decoration:none;color:var(--lozenge-border-color)}.df-ui-lozenge-clear[data-v-0f86c33f]:before{content:"|";margin-left:.25em}.df-ui-lozenge-clear[data-v-0f86c33f]:after{content:"×";margin-left:.5em}.df-ui-lozenges-form[data-v-b5a6cf70]{display:none}.df-ui-lozenges[data-v-b5a6cf70]{display:flex;flex-direction:row;flex-wrap:wrap;align-items:center;margin:20px 0;gap:5px}.df-ui-lozenges-preamble[data-v-b5a6cf70]{margin-right:5px}
.df-ui-debug-data[data-v-03e54b24]{margin:20px 0}.df-ui-debug-data-header[data-v-03e54b24]{display:flex}.df-ui-debug-data-header h4[data-v-03e54b24]{margin:0;flex:1}.df-ui-filtering[data-v-b919a4a5]{margin:30px 0}.df-ui-row.df-ui-match-type[data-v-b919a4a5]{margin:20px 0}.df-ui-row.df-ui-condition[data-v-b919a4a5]{display:flex;margin:10px 0;align-items:center;gap:10px}[data-v-b919a4a5] .df-ui-row.df-ui-condition .df-ui-col{flex:1}[data-v-b919a4a5] .df-ui-row.df-ui-condition input[type=text],[data-v-b919a4a5] .df-ui-row.df-ui-condition select{width:100%}[data-v-b919a4a5] .df-ui-row.df-ui-condition .df-ui-row-actions{display:flex;gap:5px;justify-content:right}.df-ui-form-actions[data-v-b919a4a5]{display:flex;gap:10px;margin:30px 0}
:root{--django-filtering-ui-primary-light: #fff;--django-filtering-ui-primary-dark: #000;--django-filtering-ui-primary: var(--django-filtering-ui-primary-light);--django-filtering-ui-primary-inverse: var( --django-filtering-ui-primary-dark );--django-filtering-ui-secondary: #ffc20e;--django-filtering-ui-secondary-shaded: rgba(255, 194, 14, .4);--django-filtering-ui-tertiary: #e07e26;--django-filtering-ui-tertiary-shaded: rgba(224, 126, 39, .2);--django-filtering-ui-shaded: #494948;--django-filtering-ui-shaded-more: #acacac}`)),document.head.appendChild(a)}}catch(e){console.error("vite-plugin-css-injected-by-js",e)}})();
import{_ as O,a as u,o as a,l as H,e as m,m as Q,p as z,w as b,v as L,d as E,F as C,r as x,t as k,q as P,c as $,b as o,s as r,x as V,y as G,z as p,A as B,B as U,u as K,i as S,f as W,g as s,j as A,C as R,k as X,D as Y}from"./assets/useQueryFilters-3i8om310.js";const Z={},_={type:"button",class:"btn"};function ee(e,d){return a(),u("button",_,[H(e.$slots,"default",{},()=>[d[0]||(d[0]=m("button",-1))])])}const w=O(Z,[["render",ee]]),ie={key:0,value:""},ne=["label"],te=["value","disabled"],oe=["value","disabled"],h={__name:"Select",props:Q({options:{},includeBlank:{default:!0}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(e){const d=z(e,"modelValue");return(y,f)=>b((a(),u("select",{"onUpdate:modelValue":f[0]||(f[0]=l=>d.value=l)},[e.includeBlank?(a(),u("option",ie)):E("",!0),(a(!0),u(C,null,x(e.options,l=>(a(),u(C,null,[Array.isArray(l.value)?(a(),u("optgroup",{key:0,label:l.label},[(a(!0),u(C,null,x(l.value,t=>(a(),u("option",{key:t.value,value:t.value,disabled:t.disabled},k(t.label),9,te))),128))],8,ne)):(a(),u("option",{key:l.value,value:l.value,disabled:l.disabled},k(l.label),9,oe))],64))),256))],512)),[[L,d.value]])}},le={class:"df-ui-debug-data"},de={class:"df-ui-debug-data-header"},ae={__name:"DebugDataDisplay",props:["name","data","expanded"],setup(e){const d=P(!!e.expanded),y=$(()=>JSON.stringify(e.data,null,2)),f=()=>{d.value=!d.value};return(l,t)=>(a(),u("div",le,[o("div",de,[o("h4",null,k(e.name),1),r(w,{class:"btn-tiny",onClick:f},{default:V(()=>[m(k(d.value?"hide":"show"),1)]),_:1})]),b(o("pre",null,k(y.value),513),[[G,d.value]])]))}},D=O(ae,[["__scopeId","data-v-03e54b24"]]),ue={class:"df-ui-row df-ui-condition"},se={class:"df-ui-col"},ce={class:"df-ui-col"},re={class:"df-ui-col"},ve={key:0},fe={key:1},me={key:2},be=["id","value","name"],ye=["for"],$e=["id","value","name"],ke=["for"],ge={key:3},he={class:"df-ui-col df-ui-row-actions"},Ve={__name:"ConditionRow",props:["condition","schema"],setup(e){const d=$(()=>e.schema.filters[e.condition.identifier]),y=$(()=>Object.entries(e.schema.filters).map(([t,i])=>({value:t,label:i.label,description:i.description,disabled:i.disabled||!1})));p(()=>e.condition.identifier,t=>{(!e.condition.relative||d.value&&!(e.condition.relative in d.value.lookups))&&(e.condition.relative=d.value.default_lookup,e.condition.value=void 0)}),p(()=>e.condition.relative,t=>{d.value.lookups[t].type=="date-range"&&typeof e.condition.value!="array"&&(e.condition.value=[void 0,void 0])});const f=$(()=>d.value?Object.entries(d.value.lookups).map(([t,i])=>({value:t,label:i.label})):[]),l=$(()=>{const t={...d.value.lookups[e.condition.relative]},i=([n,g])=>({value:n,label:g});return t.type==="choice"&&(t.choices=t.choices.map(([n,g])=>Array.isArray(g)?{label:n,value:g.map(i)}:i([n,g]))),t});return(t,i)=>(a(),u("div",ue,[o("div",se,[r(h,{options:y.value,modelValue:e.condition.identifier,"onUpdate:modelValue":i[0]||(i[0]=n=>e.condition.identifier=n)},null,8,["options","modelValue"])]),o("div",ce,[r(h,{options:f.value,includeBlank:!1,disabled:!e.condition.identifier,modelValue:e.condition.relative,"onUpdate:modelValue":i[1]||(i[1]=n=>e.condition.relative=n)},null,8,["options","disabled","modelValue"])]),o("div",re,[e.condition.identifier?l.value.type==="choice"?(a(),u("span",fe,[r(h,{options:l.value.choices,includeBlank:!1,disabled:!e.condition.identifier,modelValue:e.condition.value,"onUpdate:modelValue":i[2]||(i[2]=n=>e.condition.value=n)},null,8,["options","disabled","modelValue"])])):l.value.type==="toggle"?(a(),u("span",me,[b(o("input",{type:"radio",id:`true-value-${e.condition.id}`,value:l.value.true_choice[0],name:`value-${e.condition.id}`,"onUpdate:modelValue":i[3]||(i[3]=n=>e.condition.value=n)},null,8,be),[[B,e.condition.value]]),o("label",{for:`true-value-${e.condition.id}`},k(l.value.true_choice[1]),9,ye),b(o("input",{type:"radio",id:`false-value-${e.condition.id}`,value:l.value.false_choice[0],name:`value-${e.condition.id}`,"onUpdate:modelValue":i[4]||(i[4]=n=>e.condition.value=n)},null,8,$e),[[B,e.condition.value]]),o("label",{for:`false-value-${e.condition.id}`},k(l.value.false_choice[1]),9,ke)])):l.value.type==="date-range"?(a(),u("span",ge,[b(o("input",{type:"date","onUpdate:modelValue":i[5]||(i[5]=n=>e.condition.value[0]=n)},null,512),[[U,e.condition.value[0]]]),i[11]||(i[11]=m(" - ",-1)),b(o("input",{type:"date","onUpdate:modelValue":i[6]||(i[6]=n=>e.condition.value[1]=n)},null,512),[[U,e.condition.value[1]]])])):b((a(),u("input",{key:4,type:"text","onUpdate:modelValue":i[7]||(i[7]=n=>e.condition.value=n)},null,512)),[[U,e.condition.value]]):(a(),u("span",ve,[...i[10]||(i[10]=[o("input",{type:"text",disabled:""},null,-1)])]))]),o("div",he,[r(w,{id:"remove-condition",class:"btn-tiny",onClick:i[8]||(i[8]=n=>t.$emit("remove"))},{default:V(()=>[...i[12]||(i[12]=[m("－",-1)])]),_:1}),r(w,{id:"add-condition",class:"btn-tiny",onClick:i[9]||(i[9]=n=>t.$emit("add"))},{default:V(()=>[...i[13]||(i[13]=[m("＋",-1)])]),_:1})])]))}},we={class:"df-ui-row df-ui-condition df-ui-condition-sticky"},Ce={class:"df-ui-col"},Se={class:"df-ui-col"},Ue={class:"df-ui-col"},xe={key:0},Be={key:1},De={key:2},pe=["id","value","name"],Ae=["for"],Oe=["id","value","name"],Fe=["for"],je={class:"df-ui-col df-ui-row-actions"},Ne={__name:"StickyConditionRow",props:["condition","schema"],setup(e){const d=$(()=>e.schema.filters[e.condition.identifier]),y=$(()=>Object.entries(e.schema.filters).map(([t,i])=>({value:t,label:i.label,description:i.description,disabled:i.disabled||!1})));p(()=>e.condition.identifier,t=>{(!e.condition.relative||d.value&&!(e.condition.relative in d.value.lookups))&&(e.condition.relative=d.value.default_lookup,e.condition.value=null)});const f=$(()=>d.value?Object.entries(d.value.lookups).map(([t,i])=>({value:t,label:i.label})):[]),l=$(()=>{const t={...d.value.lookups[e.condition.relative]};return t.type==="choice"&&(t.choices=t.choices.map(([i,n])=>({value:i.toString(),label:n}))),t});return(t,i)=>(a(),u("div",we,[o("div",Ce,[r(h,{options:y.value,modelValue:e.condition.identifier,"onUpdate:modelValue":i[0]||(i[0]=n=>e.condition.identifier=n),disabled:""},null,8,["options","modelValue"])]),o("div",Se,[r(h,{options:f.value,includeBlank:!1,disabled:!e.condition.identifier,modelValue:e.condition.relative,"onUpdate:modelValue":i[1]||(i[1]=n=>e.condition.relative=n)},null,8,["options","disabled","modelValue"])]),o("div",Ue,[e.condition.identifier?l.value.type==="choice"?(a(),u("span",Be,[r(h,{options:l.value.choices,includeBlank:!1,disabled:!e.condition.identifier,modelValue:e.condition.value,"onUpdate:modelValue":i[2]||(i[2]=n=>e.condition.value=n)},null,8,["options","disabled","modelValue"])])):l.value.type==="toggle"?(a(),u("span",De,[b(o("input",{type:"radio",id:`true-value-${e.condition.id}`,value:l.value.true_choice[0],name:`value-${e.condition.id}`,"onUpdate:modelValue":i[3]||(i[3]=n=>e.condition.value=n)},null,8,pe),[[B,e.condition.value]]),o("label",{for:`true-value-${e.condition.id}`},k(l.value.true_choice[1]),9,Ae),b(o("input",{type:"radio",id:`false-value-${e.condition.id}`,value:l.value.false_choice[0],name:`value-${e.condition.id}`,"onUpdate:modelValue":i[4]||(i[4]=n=>e.condition.value=n)},null,8,Oe),[[B,e.condition.value]]),o("label",{for:`false-value-${e.condition.id}`},k(l.value.false_choice[1]),9,Fe)])):b((a(),u("input",{key:3,type:"text","onUpdate:modelValue":i[5]||(i[5]=n=>e.condition.value=n)},null,512)),[[U,e.condition.value]]):(a(),u("span",xe,[...i[7]||(i[7]=[o("input",{type:"text",disabled:""},null,-1)])]))]),o("div",je,[r(w,{id:"remove-condition",class:"btn-tiny btn-disabled"},{default:V(()=>[...i[8]||(i[8]=[m("－",-1)])]),_:1}),r(w,{id:"add-condition",class:"btn-tiny",onClick:i[6]||(i[6]=n=>t.$emit("add"))},{default:V(()=>[...i[9]||(i[9]=[m("＋",-1)])]),_:1})])]))}},Me={class:"df-ui-filtering"},Re=["value"],Ee=["value"],Je={class:"df-ui-row df-ui-match-type"},qe={class:"df-ui-col"},Ie={class:"df-ui-row df-ui-form-actions"},Te={key:0,class:"df-ui-debug"},He={__name:"ComposableFilters",setup(e){const d=K(),y=S("model-listing-url"),f=S("filtering-options-schema"),l=S("filtering-json-schema"),t=S("debug-enabled"),{grouping:i,stickies:n,changedStickies:g,rendered:F}=W({createDefault:!0,optionsSchema:f}),I=[{value:"and",label:"all"},{value:"or",label:"any"}],j=()=>{window.location.assign(y)},T=async N=>{const v=[];for(const c of i.conditions)c.identifier==null||c.relative==null||c.value==null?v.push(c):c.validate()||v.push(c);i.removeConditions(...v),i.conditions.length==0&&g.value.length==0&&(N.preventDefault(),j())};return(N,v)=>(a(),u(C,null,[o("div",Me,[o("form",{method:"post",onSubmit:T},[o("input",{type:"hidden",name:"csrfmiddlewaretoken",value:s(d)},null,8,Re),o("input",{type:"hidden",name:"q",value:s(F)},null,8,Ee),o("div",Je,[o("div",qe,[v[1]||(v[1]=m(" Match ",-1)),r(h,{id:"top-level-operator",modelValue:s(i).operation,"onUpdate:modelValue":v[0]||(v[0]=c=>s(i).operation=c),options:I,includeBlank:!1},null,8,["modelValue"]),v[2]||(v[2]=m(" of the following criteria: ",-1))])]),(a(!0),u(C,null,x(s(n),c=>(a(),A(s(Ne),{key:c.id,condition:c,schema:s(f),onAdd:M=>s(i).addConditionsAfter(c,new(s(R)))},null,8,["condition","schema","onAdd"]))),128)),(a(!0),u(C,null,x(s(i).conditions,c=>(a(),A(s(Ve),{key:c.id,condition:c,schema:s(f),onAdd:M=>s(i).addConditionsAfter(c,new(s(R))),onRemove:M=>s(i).removeConditions(c)},null,8,["condition","schema","onAdd","onRemove"]))),128)),o("div",Ie,[r(w,{class:"btn-action",type:"submit"},{default:V(()=>[...v[3]||(v[3]=[m("Filter",-1)])]),_:1}),r(w,{class:"cancel btn-secondary",onClick:j},{default:V(()=>[...v[4]||(v[4]=[m("Cancel",-1)])]),_:1})])],32)]),s(t)?(a(),u("div",Te,[v[5]||(v[5]=o("h3",null,"Debug",-1)),r(D,{name:"Query filters data",data:JSON.parse(s(F)),expanded:!0},null,8,["data"]),r(D,{name:"Options schema",data:s(f)},null,8,["data"]),r(D,{name:"JSON schema",data:s(l)},null,8,["data"])])):E("",!0)],64))}},Qe=O(He,[["__scopeId","data-v-b919a4a5"]]),ze={__name:"Filtering",setup(e){return(d,y)=>(a(),A(s(Qe)))}},J=document.getElementById("vue-app"),q=X(ze);q.use(Y,{rootElement:J});q.mount(J);
