<?xml version="1.0"?>
<odoo>
  <record id="view_ba_tree_lead_line_isp_infos_switchboard_view" model="ir.ui.view">
    <field name="name">crm.lead.line.broadband.ISP.info.switchboard.tree.view</field>
    <field name="model">crm.lead.line</field>
    <field name="inherit_id" ref="somconnexio.view_ba_tree_lead_line_isp_infos"/>
    <field name="arch" type="xml">
      <button name="get_formview_action" position="attributes">
        <attribute name="context">{
            'crm_lead_id': id, 'is_mobile': False, 'is_switchboard': False
          }</attribute>
      </button>
    </field>
  </record>
  <record id="view_switchboard_tree_lead_line_isp_infos" model="ir.ui.view">
    <field name="name">crm.lead.line switchboard ISP infos tree view (in crm lead)</field>
    <field name="model">crm.lead.line</field>
    <field name="arch" type="xml">
      <tree editable="bottom">
        <field name="active" invisible="1"/>
        <button type="object" name="get_formview_action" string="Open" icon="fa-edit" context="{'crm_lead_id': id, 'is_switchboard': True}"/>
        <field name="id" attrs="{'readonly':True}"/>
        <field name="product_id" attrs="{'readonly':True}"/>
        <field name="switchboard_isp_info_phone_number"/>
        <field name="switchboard_isp_info_extension"/>
        <field name="switchboard_isp_info_agent_name"/>
        <field name="switchboard_isp_info_agent_email"/>
        <field name="switchboard_isp_info_mobile_phone_number"/>
        <field name="create_reason"/>
        <field name="tree_view_notes"/>
      </tree>
    </field>
  </record>
  <record id="view_form_lead_line_switchboard" model="ir.ui.view">
    <field name="name">crm.lead.line switchboard form view</field>
    <field name="model">crm.lead.line</field>
    <field name="arch" type="xml">
      <form string="Switchboard Lead Line Form" duplicate="0">
        <header>
          <button name="action_archive" string="Archive" type="object" class="oe_highlight" confirm="Are you sure you want to archive this crm lead line?" attrs="{'invisible': [('active','=',False)]}"/>
          <button name="action_restore" string="Restore" type="object" class="oe_highlight" attrs="{'invisible': [('active','=',True)]}"/>
        </header>
        <sheet>
          <group name="left">
            <field name="active" invisible="1"/>
            <group>
              <field name="switchboard_isp_info_icc" attrs="{'readonly':False}"/>
              <field name="switchboard_isp_info_has_sim" attrs="{'readonly':False}"/>
              <field name="product_id"/>
            </group>
            <group>
              <field name="lead_id" attrs="{'readonly':True}"/>
              <field name="stage_id" attrs="{'readonly':True}"/>
            </group>
            <group>
              <field name="partner_id"/>
              <field name="partner_category_id" widget="many2many_tags" options="{'color_field': 'color', 'no_create_edit': True}"/>
            </group>
            <group>
              <field name="iban"/>
              <field name="create_date"/>
            </group>
          </group>
          <group name="right">
            <group>
              <field name="switchboard_isp_info"/>
              <field name="switchboard_isp_info_type"/>
              <field name="switchboard_isp_info_phone_number"/>
              <field name="switchboard_isp_info_extension"/>
            </group>
          </group>
          <notebook>
            <page string="Notes">
              <field name="notes"/>
            </page>
            <page string="Other addresses">
              <group string="Invoice address" attrs="{'invisible': [('switchboard_isp_info_invoice_street' ,'=', False)]}">
                <field name="switchboard_isp_info_invoice_street"/>
                <field name="switchboard_isp_info_invoice_zip_code"/>
                <field name="switchboard_isp_info_invoice_city"/>
                <field name="switchboard_isp_info_invoice_state_id"/>
              </group>
              <group string="Delivery address">
                <field name="switchboard_isp_info_delivery_street"/>
                <field name="switchboard_isp_info_delivery_zip_code"/>
                <field name="switchboard_isp_info_delivery_city"/>
                <field name="switchboard_isp_info_delivery_state_id"/>
              </group>
            </page>
          </notebook>
        </sheet>
      </form>
    </field>
  </record>
  <record id="crm_lead_line_search_view_switchboard" model="ir.ui.view">
    <field name="name">crm.lead.line.search.view.switchboard</field>
    <field name="model">crm.lead.line</field>
    <field name="inherit_id" ref="somconnexio.crm_lead_line_search_view"/>
    <field name="arch" type="xml">
      <xpath expr="/search/filter[@name='type'][1]" position="attributes">
        <attribute name="domain">
                  ['|', '|', ('mobile_isp_info_type', '=', 'new'),
                              ('broadband_isp_info_type', '=', 'new'),
                              ('switchboard_isp_info_type', '=', 'new')]
              </attribute>
      </xpath>
      <xpath expr="/search/filter[@name='type'][2]" position="attributes">
        <attribute name="domain">
                  ['|', '|', ('mobile_isp_info_type', '=', 'portability'),
                              ('broadband_isp_info_type', '=', 'portability'),
                              ('switchboard_isp_info_type', '=', 'portability')]
              </attribute>
      </xpath>
    </field>
  </record>
</odoo>
