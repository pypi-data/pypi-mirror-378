import"../chunks/DsnmJJEf.js";import{o as Ue,s as Me}from"../chunks/CxYln1hn.js";import{p as ct,u as ye,d as De,s as w,b as te,j as m,g as e,l as ie,k as Ze,e as le,b2 as mt,m as Q,c as Te,f as me,a as k,b3 as ze,r as z,v as je,h as ve,i as ft,t as yt,n as vt}from"../chunks/Drxlg-Xn.js";import{i as xe,b as pt}from"../chunks/BbB4DTre.js";import{F as _t,n as Le,r as xt,b as ke,S as bt,c as wt,t as Et,h as Ct}from"../chunks/C6Y5c09E.js";import{e as Je,i as Qe,u as Nt,g as $t,b as et}from"../chunks/iLwl9KAB.js";import{A as tt}from"../chunks/se_iUg_v.js";import{D as Ot}from"../chunks/6KI89v4Y.js";import{s as Z}from"../chunks/CpZHtke-.js";import{d as It,e as Lt}from"../chunks/CmpsC6LN.js";import{s as rt}from"../chunks/CTc1z_v2.js";import{d as Bt,n as Dt,s as Se,a as at,b as Tt,c as He,e as Ye,y as St,p as nt,i as ot,f as Rt}from"../chunks/D6s5toP0.js";class q{entries;constructor(t){this.entries=t}static fromRows(t){return new q(t.map(r=>{const c={},s=[];return Object.entries(r).forEach(([h,f])=>{if(isNaN(f)){c[h]=f;return}else s.push(Number(f))}),{index:c,data:s}}))}filterByCriteria(t){const r=this.entries.filter(c=>Object.entries(t).every(([s,h])=>Object.keys(c.index).includes(s)?h.includes(c.index[s]):!0));return new q(r)}groupBy(t){const r={},c={};return this.entries.forEach(s=>{const h=Object.fromEntries(t.map(g=>[g,s.index[g]])),f=Object.values(h).join("_");c[f]||(c[f]=h),r[f]?s.data.forEach((g,d)=>{r[f][d]+=Number(g)}):r[f]=s.data}),new q(Object.entries(r).map(([s,h])=>({index:c[s],data:h})))}dump(){return console.table(this.entries.map(t=>({...t.index,...Object.fromEntries(t.data.map((r,c)=>[c.toString(),r]))}))),this}*[Symbol.iterator](){return this.entries[Symbol.iterator]()}forEach(t){return this.entries.forEach(t),this}reduce(t,r){return this.entries.reduce(t,r)}find(t){return this.entries.find(t)}filter(t){return new q(this.entries.filter(t))}get length(){return this.entries.length}get(t){return this.entries[t]}toArray(){return this.entries}}const be=120,st=16,Mt=200,jt=140,At=32,Be=5,Ae=20,it=-10,lt=2,pe=16;let M=[],Ee=[];function we(a,t){return a.reduce((r,c)=>r+t(c),0)}function Ft(){M.forEach(a=>{a.linksOut=Ee.filter(t=>t.source===a),a.linksIn=Ee.filter(t=>t.target===a)})}function Pt(){M.forEach(a=>{a.value=Math.max(we(a.linksIn,t=>t.value),we(a.linksOut,t=>t.value))})}function kt(){M=M.filter(a=>a.linksIn.length>0||a.linksOut.length>0)}function Ht(){let a=0,t=[];Ee.forEach(r=>{dt(r.source,r.target,t)?(r.causesCycle=!0,r.cycleIndex=++a):(r.causesCycle=!1,t.push(r))})}function dt(a,t,r){let c=r.filter(s=>s.source===t);return r.length==0||c.length==0?!1:c.some(s=>s.target===a||dt(a,s.target,r))}function Yt(){let a=M,t=[],r=0;for(;a.length;)t=[],a.forEach(c=>{c.x=r,c.linksOut.forEach(s=>{s.causesCycle||t.push(s.target)})}),a=t,r++;for(a=M;a.length;)t=[],a.forEach(c=>{if(c.linksOut.length>0){const s=c.linksOut.filter(h=>!h.causesCycle).map(h=>h.target.x);s.length>0&&(c.x=Math.max(c.x,Math.min(...s)-1))}c.linksIn.forEach(s=>{s.causesCycle||t.push(s.source)})}),a=t;Ut(jt+be)}function Ut(a){M.forEach(t=>{t.x*=a})}function Wt(){let a={};return M.forEach(t=>{const r=t.x;a[r]||(a[r]=[]),a[r].push(t)}),Object.values(a).sort((t,r)=>t[0].x-r[0].x)}function Fe(a){return a.y+a.dy/2}function zt(){let a=Wt();t(),s();for(let f=1,g=0;g<At;++g,f*=.99)c(f),s(),r(f),s();h();function t(){const f=Math.min(...M.map(g=>g.value>1e-6?Mt/g.value:1/0));a.forEach(g=>{let d=0;g.forEach(_=>{_.y=d,_.dy=_.value*f,d+=_.dy+st})}),Ee.forEach(g=>{g.dy=g.value*f})}function r(f){a.forEach(g=>{g.forEach(d=>{if(d.linksIn.length==0)return;const _=we(d.linksIn,E=>Fe(E.source)*E.value)/we(d.linksIn,E=>E.value);d.y+=(_-Fe(d))*f})})}function c(f){a.slice().reverse().forEach(g=>{g.forEach(d=>{if(d.linksOut.length==0)return;const _=we(d.linksOut,E=>Fe(E.target)*E.value)/we(d.linksOut,E=>E.value);d.y+=(_-Fe(d))*f})})}function s(){a.forEach(f=>{let g=f[0],d,_=0,E=f.length,X;for(f.sort((L,ne)=>L.y-ne.y),X=0;X<E;++X)g=f[X],d=_-g.y,d>0&&(g.y+=d),_=g.y+g.dy+st})}function h(){let f=Math.min(...M.map(g=>g.y));M.forEach(g=>{g.y-=f})}}function gt(){let a=t=>(r,c)=>r.causesCycle&&c.causesCycle?r.cycleIndex-c.cycleIndex:r.causesCycle?-1:c.causesCycle?1:r[t].y-c[t].y;M.forEach(t=>{t.linksIn.sort(a("source")),t.linksOut.sort(a("target"))}),M.forEach(t=>{let r=0,c=0;t.linksOut.forEach(s=>{s.sy=r,r+=s.dy}),t.linksIn.forEach(s=>{s.ty=c,c+=s.dy})})}function qt(a,t){M=a,Ee=t,Ft(),Pt(),kt(),Ht(),Yt(),zt(),gt()}function Xt(a,t){a<0||a>=M.length||(M[a].y=t,gt())}function ut(){const a=M.map(r=>({label:r.label,color:r.color,value:r.value,unit:r.unit,x:r.x,y:r.y,dy:r.dy,numLinksIn:r.linksIn.length,numLinksOut:r.linksOut.length})),t=Ee.map(r=>({source:a[M.indexOf(r.source)],target:a[M.indexOf(r.target)],value:r.value,color:r.color,unit:r.unit,causesCycle:r.causesCycle,cycleIndex:r.cycleIndex,dy:r.dy,sy:r.sy,ty:r.ty}));return[a,t]}const Pe=a=>()=>a;function We(a,{sourceEvent:t,subject:r,target:c,identifier:s,active:h,x:f,y:g,dx:d,dy:_,dispatch:E}){Object.defineProperties(this,{type:{value:a,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:r,enumerable:!0,configurable:!0},target:{value:c,enumerable:!0,configurable:!0},identifier:{value:s,enumerable:!0,configurable:!0},active:{value:h,enumerable:!0,configurable:!0},x:{value:f,enumerable:!0,configurable:!0},y:{value:g,enumerable:!0,configurable:!0},dx:{value:d,enumerable:!0,configurable:!0},dy:{value:_,enumerable:!0,configurable:!0},_:{value:E}})}We.prototype.on=function(){var a=this._.on.apply(this._,arguments);return a===this._?this:a};function Vt(a){return!a.ctrlKey&&!a.button}function Gt(){return this.parentNode}function Kt(a,t){return t??{x:a.x,y:a.y}}function Zt(){return navigator.maxTouchPoints||"ontouchstart"in this}function Jt(){var a=Vt,t=Gt,r=Kt,c=Zt,s={},h=Bt("start","drag","end"),f=0,g,d,_,E,X=0;function L(o){o.on("mousedown.drag",ne).filter(c).on("touchstart.drag",re).on("touchmove.drag",fe,Dt).on("touchend.drag touchcancel.drag",de).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function ne(o,C){if(!(E||!a.call(this,o,C))){var O=oe(this,t.call(this,o,C),o,C,"mouse");O&&(Se(o.view).on("mousemove.drag",ue,at).on("mouseup.drag",ce,at),Tt(o.view),He(o),_=!1,g=o.clientX,d=o.clientY,O("start",o))}}function ue(o){if(Ye(o),!_){var C=o.clientX-g,O=o.clientY-d;_=C*C+O*O>X}s.mouse("drag",o)}function ce(o){Se(o.view).on("mousemove.drag mouseup.drag",null),St(o.view,_),Ye(o),s.mouse("end",o)}function re(o,C){if(a.call(this,o,C)){var O=o.changedTouches,B=t.call(this,o,C),S=O.length,D,U;for(D=0;D<S;++D)(U=oe(this,B,o,C,O[D].identifier,O[D]))&&(He(o),U("start",o,O[D]))}}function fe(o){var C=o.changedTouches,O=C.length,B,S;for(B=0;B<O;++B)(S=s[C[B].identifier])&&(Ye(o),S("drag",o,C[B]))}function de(o){var C=o.changedTouches,O=C.length,B,S;for(E&&clearTimeout(E),E=setTimeout(function(){E=null},500),B=0;B<O;++B)(S=s[C[B].identifier])&&(He(o),S("end",o,C[B]))}function oe(o,C,O,B,S,D){var U=h.copy(),V=nt(D||O,C),j,A,ae;if((ae=r.call(o,new We("beforestart",{sourceEvent:O,target:L,identifier:S,active:f,x:V[0],y:V[1],dx:0,dy:0,dispatch:U}),B))!=null)return j=ae.x-V[0]||0,A=ae.y-V[1]||0,function ge(se,he,_e){var n=V,i;switch(se){case"start":s[S]=ge,i=f++;break;case"end":delete s[S],--f;case"drag":V=nt(_e||he,C),i=f;break}U.call(se,o,new We(se,{sourceEvent:he,subject:ae,target:L,identifier:S,active:i,x:V[0]+j,y:V[1]+A,dx:V[0]-n[0],dy:V[1]-n[1],dispatch:U}),B)}}return L.filter=function(o){return arguments.length?(a=typeof o=="function"?o:Pe(!!o),L):a},L.container=function(o){return arguments.length?(t=typeof o=="function"?o:Pe(o),L):t},L.subject=function(o){return arguments.length?(r=typeof o=="function"?o:Pe(o),L):r},L.touchable=function(o){return arguments.length?(c=typeof o=="function"?o:Pe(!!o),L):c},L.on=function(){var o=h.on.apply(h,arguments);return o===h?L:o},L.clickDistance=function(o){return arguments.length?(X=(o=+o)*o,L):Math.sqrt(X)},L}var Qt=ze('<path class="cycle-link svelte-1joeiwq"><title> </title></path>'),er=ze('<path class="link svelte-1joeiwq"><title> </title></path>'),tr=ze('<g class="node svelte-1joeiwq"><rect class="svelte-1joeiwq"><title> </title></rect><text text-anchor="middle" alignment-baseline="middle"> </text></g>'),rr=le('<div class="position-relative border rounded overflow-hidden"><svg class="svelte-1joeiwq"><g><g class="links"></g><g class="nodes"></g></g></svg> <div class="position-absolute top-0 end-0 m-2"><button class="btn btn-secondary"><i class="bi bi-house"></i> <div class="visually-hidden">Reset zoom</div></button></div></div>');function ar(a,t){ct(t,!0);let r=w(936),c=w(800),s=w(void 0),h=E(L,100);ye(()=>{t.nodes.length&&De(()=>{X(t.nodes,t.links),h()})});let f=[],g=[],d=w(te([])),_=w(te([]));function E(n,i){let v;return function(){clearTimeout(v),v=setTimeout(()=>n(),i)}}function X(n,i){f=n.map(v=>({label:v.label??"Unnamed",color:v.color??"#ccc",id:v.id??"",value:0,unit:v.unit??"",linksIn:[],linksOut:[],x:0,y:0,dy:0})),g=i.flatMap(v=>{let l=f.find($=>$.id===v.source.id&&$.label===v.source.label),p=f.find($=>$.id===v.target.id&&$.label===v.target.label);return!l||!p?(console.warn("Link refers to unknown node",v),[]):[{source:l,target:p,value:v.value,color:v.color,unit:v.unit,causesCycle:!1,cycleIndex:0,dy:0,sy:0,ty:0}]})}function L(){qt(f,g),(n=>{var i=Ze(n,2);m(d,i[0],!0),m(_,i[1],!0)})(ut())}function ne(n,i){return v=>n*(1-v)+i*v}function ue(n){if(n.causesCycle){const y=Be,I=n.source.x+be,x=n.source.y+n.sy+n.dy,H=n.target.x,R=n.target.y,b=I+Ae,T=x,W=b,ee=it-n.cycleIndex*(y+lt),J=H-Ae,F=ee,Y=J,G=R+n.ty+n.dy,P=pe/2-Be;return`M${I},${x}L${b},${T}C${b+pe},${T} ${W+pe},${ee} ${W},${ee}H${J-y}C${J-pe},${F} ${Y-pe},${G} ${Y},${G}H${H}V${R+n.ty}H${Y}C${Y-P},${R} ${J-P},${F+y} ${J},${F+y}H${W-y}C${W+P},${ee+y} ${b+P},${T-n.dy} ${b},${T-n.dy}L${I},${x-n.dy}`}const i=n.source.x+be,v=n.target.x,p=ne(i,v)(.5),$=n.source.y+n.sy+n.dy/2,N=n.target.y+n.ty+n.dy/2;return`M${i},${$} C${p},${$} ${p},${N} ${v},${N}`}let ce=ie(()=>{if(!e(_).length)return 0;const n=Math.max(...e(_).map(i=>i.cycleIndex));return n==0?0:it-n*(Be+lt)}),re=ie(()=>e(d).length&&e(d).some(n=>n.x===0&&n.numLinksIn>0)?-Ae-Be-pe:0),fe=ie(()=>{if(!e(d).length)return e(r);const n=Math.max(...e(d).map(i=>i.x+be));return e(d).some(i=>i.x===n&&i.numLinksOut>0)?n+Ae+Be+pe-e(re):n-e(re)}),de=ie(()=>e(d).length?Math.max(...e(d).map(n=>n.y+n.dy)):e(c));function oe(n,i=6){const v=10**i;return Math.round(n*v)/v}function o(n){return`${n.source.label} → ${n.target.label}:
${oe(n.value)} ${n.unit}`}function C(n){return`${n.label}:
${oe(n.value)} ${n.unit}`}function O(){if(!e(s))return;const{width:n,height:i}=e(s).parentElement.getBoundingClientRect();m(r,n,!0),m(c,i,!0),h()}Ue(O);let B=w(te(ot.toString())),S=Rt().scaleExtent([1,1/0]).on("zoom",n=>{m(B,n.transform.toString(),!0)});ye(()=>{S=S.translateExtent([[e(re)-5,e(ce)-5],[e(fe)+5,e(de)+5]])}),Ue(()=>{e(s)&&Se(e(s)).call(S)});function D(){e(s)&&Se(e(s)).call(S.transform,ot)}let U=Jt().on("start",function(){this.parentNode&&this.parentNode.appendChild(this)}).on("drag",function(n){const i=Number(this.dataset.idx);isNaN(i)||V(n,i)});ye(()=>{e(d),e(s)&&Se(e(s)).selectAll(".node").call(U)});function V(n,i){if(n.clientY===0||i<0||i>=e(d).length)return;const v=e(d)[i].y+n.dy,l=Math.max(0,Math.min(e(c)-e(d)[i].dy,v));Xt(i,l),(p=>{var $=Ze(p,2);m(d,$[0],!0),m(_,$[1],!0)})(ut())}var j=rr();Lt("resize",mt,O);var A=Q(j),ae=Q(A),ge=Q(ae);Je(ge,21,()=>e(_).toSorted((n,i)=>i.value-n.value),Qe,(n,i)=>{var v=Te(),l=me(v);{var p=N=>{var y=Qt();let I;var x=Q(y),H=Q(x,!0);z(x),z(y),je((R,b,T)=>{Z(y,"d",R),I=rt(y,"",I,b),Me(H,T)},[()=>ue(e(i)),()=>({fill:e(i).color}),()=>o(e(i))]),k(N,y)},$=N=>{var y=er();let I;var x=Q(y),H=Q(x,!0);z(x),z(y),je((R,b,T)=>{Z(y,"d",R),I=rt(y,"",I,b),Me(H,T)},[()=>ue(e(i)),()=>({stroke:e(i).color,"stroke-width":Math.max(1,e(i).dy)}),()=>o(e(i))]),k(N,y)};xe(l,N=>{e(i).causesCycle?N(p):N($,!1)})}k(n,v)}),z(ge);var se=ve(ge);Je(se,21,()=>e(d),Qe,(n,i,v)=>{var l=tr();Z(l,"data-idx",v);var p=Q(l),$=Q(p),N=Q($,!0);z($),z(p);var y=ve(p),I=Q(y,!0);z(y),z(l),je((x,H)=>{Z(p,"x",e(i).x),Z(p,"y",e(i).y),Z(p,"width",be),Z(p,"height",x),Z(p,"fill",e(i).color),Me(N,H),Z(y,"x",e(i).x+be/2),Z(y,"y",e(i).y+e(i).dy/2),Me(I,e(i).label)},[()=>Math.max(.1,e(i).dy-2),()=>C(e(i))]),k(n,l)}),z(se),z(ae),z(A),pt(A,n=>m(s,n),()=>e(s));var he=ve(A,2),_e=Q(he);_e.__click=D,z(he),z(j),je(()=>{Z(A,"width",e(r)),Z(A,"height",e(c)),Z(A,"viewBox",`${e(re)-1} ${e(ce)} ${e(fe)+4} ${e(de)}`),Z(ae,"transform",e(B))}),k(a,j),ft()}It(["click"]);var nr=le("<!> <!>",1),or=le("<!> <!> <!>",1),sr=le('<div class="text-center"><div class="spinner-border center" role="status"><span class="visually-hidden">Loading...</span></div></div>'),ir=le('<div class="text-center">No solution selected</div>'),lr=le('<div class="text-center">No carriers selected</div>'),ur=le('<div class="text-center">No nodes selected</div>'),cr=le('<div class="text-center">No data available for the selected filters</div>'),fr=le('<h1 class="mt-2 mb-4">The Energy System</h1> <!> <h2 class="visually-hidden">Sankey Diagram</h2> <div class="plot my-4"><!></div>',1);function Cr(a,t){ct(t,!0);let r=w(te([])),c=w(!1),s=w(!1),h=w(null),f=w(te([])),g=w(te([])),d=w(null),_=w(te([])),E=w(te([])),X=w(null),L=w(null),ne=w(null),ue=w(null),ce=w(null),re=w(null),fe=w(null),de=w(null),oe=w(null),o=w(null),C=w(te([])),O=w(te([])),B=w(te([]));function S(){V()}let D=ie(()=>e(h)?e(h).detail.system.set_carriers.slice().sort():[]),U=ie(()=>e(h)?e(h).detail.system.set_nodes.slice().sort():[]);ye(()=>{if(!e(r).length){m(d,null);return}m(d,e(r)[0].toString(),!0)}),ye(()=>{e(D),De(()=>{e(_).length?(e(D).length&&m(f,e(_).map(l=>e(D)[l]).filter(l=>l!==void 0),!0),m(_,[],!0)):m(f,e(D),!0)})}),ye(()=>{e(U),De(()=>{e(E).length?(e(U).length&&m(g,e(E).map(l=>e(U)[l]).filter(l=>l!==void 0),!0),m(E,[],!0)):m(g,e(U),!0)})}),ye(()=>{e(f),e(g),e(d),De(()=>{ge()})}),ye(()=>{e(d),e(f),e(g),yt().then(()=>{De(()=>{Nt({year:e(d),car:e(f).map(l=>e(D).indexOf(l)).join("~")||null,nodes:e(g).map(l=>e(U).indexOf(l)).join("~")||null})})})}),Ue(()=>{m(d,$t("year"),!0),m(_,et("car"),!0),m(E,et("nodes"),!0)});async function V(){if(!e(h))return;m(s,!0);let l=await Ct(e(h).solution_name,["flow_conversion_input","flow_conversion_output","flow_storage_charge","flow_storage_discharge","flow_import","flow_export","demand","shed_demand","flow_storage_inflow","flow_storage_spillage"],e(h).scenario_name,"demand");m(X,q.fromRows(l.flow_conversion_input?.data??[])),m(L,q.fromRows(l.flow_conversion_output?.data??[]),!0),m(ne,q.fromRows(l.flow_storage_charge?.data??[]),!0),m(ue,q.fromRows(l.flow_storage_discharge?.data??[]),!0),m(ce,q.fromRows(l.flow_import?.data??[]),!0),m(re,q.fromRows(l.flow_export?.data??[]),!0),m(fe,q.fromRows(l.demand?.data??[]),!0),m(de,q.fromRows(l.shed_demand?.data??[]),!0),m(oe,q.fromRows(l.flow_storage_inflow?.data??[]),!0),m(o,q.fromRows(l.flow_storage_spillage?.data??[]),!0),m(C,l.unit?.data||[],!0),m(s,!1),ge()}function j(l){let p=e(C).find($=>$.carrier===l)||{};return p[0]||p.units||""}function A(l){return e(h)&&e(h).detail.reference_carrier[l]||""}function ae(l){return e(h)?e(h).detail.system.set_technologies.filter(p=>l.includes(A(p))):[]}function ge(){if(!e(h)||!e(X)||!e(L)||!e(ne)||!e(ue)||!e(ce)||!e(re)||!e(fe)||!e(de)||!e(oe)||!e(o))return[];const l="rgb(180,180,180)",p=e(h)?.detail.system.set_storage_technologies||[],$=e(h)?.detail.system.set_conversion_technologies||[];function N(u,K,Ne,$e){return{id:u,label:K,color:Ne,unit:$e}}xt();const y=e(D).map(u=>N(u,u+"_"+j(u),Le(),j(u))),I=$.map(u=>N(u,u,l,j(A(u)))),x=p.map(u=>N(u,u,l,j(A(u)))),H=p.map(u=>N(u,u+"_inflow",l,j(A(u)))),R=p.map(u=>N(u,u+"_spillage",l,j(A(u))));let b=Le();const T=e(D).map(u=>N(u,u+"_import",b,j(u)));b=Le();const W=e(D).map(u=>N(u,u+"_export",b,j(u)));b=Le();const ee=e(D).map(u=>N(u,u+"_shed_demand",b,j(u)));b=Le();const J=e(D).map(u=>N(u,u+"_demand",b,j(u))),F={carrier:e(f),node:e(g),technology:ae(e(f))},Y=e(r).indexOf(Number(e(d))),G=[];function P(u,K,Ne,$e,ht=0){return Oe=>{const qe=Oe.data[Y]-ht;if(Math.abs(qe)<1e-6)return;const Xe=u.find(Ie=>Ie.id===Oe.index[K]),Ve=Ne.find(Ie=>Ie.id===Oe.index[$e]);if(!Xe||!Ve)return;let Ge=l;const Ke=y.find(Ie=>Ie.id===Oe.index.carrier);Ke&&(Ge=Ke.color||l),G.push({source:Xe,target:Ve,value:qe,color:Ge,unit:j(Oe.index.carrier)})}}function Ce(u){const K=A(u.index.technology);K&&(u.index.carrier=K)}e(X).filterByCriteria(F).groupBy(["technology","carrier"]).forEach(P(y,"carrier",I,"technology")),e(L).filterByCriteria(F).groupBy(["technology","carrier"]).forEach(P(I,"technology",y,"carrier")),e(ne).filterByCriteria(F).groupBy(["technology"]).forEach(u=>{const K=A(u.index.technology);K&&(u.index.carrier=K)}).forEach(P(y,"carrier",x,"technology")),e(ue).filterByCriteria(F).groupBy(["technology"]).forEach(Ce).forEach(P(x,"technology",y,"carrier")),e(oe).filterByCriteria(F).groupBy(["technology"]).forEach(Ce).forEach(P(H,"technology",x,"technology")),e(o).filterByCriteria(F).groupBy(["technology"]).forEach(Ce).forEach(P(x,"technology",R,"technology")),e(ce).filterByCriteria(F).groupBy(["carrier"]).forEach(P(T,"carrier",y,"carrier")),e(re).filterByCriteria(F).groupBy(["carrier"]).forEach(P(y,"carrier",W,"carrier"));const Re=e(de).filterByCriteria(F).groupBy(["carrier"]);Re.forEach(P(ee,"carrier",J,"carrier")),e(fe).filterByCriteria(F).groupBy(["carrier"]).forEach(u=>{const K=Re.find($e=>$e.index.carrier===u.index.carrier),Ne=K?K.data[Y]:0;P(y,"carrier",J,"carrier",Ne)(u)}),m(O,[...y,...I,...x,...H,...R,...T,...W,...ee,...J],!0),m(B,G,!0)}var se=fr(),he=ve(me(se),2);_t(he,{children:(l,p)=>{var $=or(),N=me($);ke(N,{title:"Solution Selection",children:(x,H)=>{{let R=ie(()=>e(s)||e(c));bt(x,{solution_selected:S,get disabled(){return e(R)},get years(){return e(r)},set years(b){m(r,b,!0)},get selected_solution(){return e(h)},set selected_solution(b){m(h,b,!0)},get loading(){return e(c)},set loading(b){m(c,b,!0)}})}}});var y=ve(N,2);ke(y,{title:"Carrier Selection",children:(x,H)=>{tt(x,{label:"Carriers",get elements(){return e(D)},get value(){return e(f)},set value(R){m(f,R,!0)}})}});var I=ve(y,2);ke(I,{title:"Data Selection",children:(x,H)=>{var R=nr(),b=me(R);wt(b,{label:"Year",content:(ee,J=vt)=>{{let F=ie(()=>Et(e(r).map(G=>G.toString()))),Y=ie(()=>e(s)||e(c));Ot(ee,{get formId(){return J()},get options(){return e(F)},get disabled(){return e(Y)},get value(){return e(d)},set value(G){m(d,G,!0)}})}}});var T=ve(b,2);tt(T,{label:"Nodes",get elements(){return e(U)},get value(){return e(g)},set value(W){m(g,W,!0)}}),k(x,R)}}),k(l,$)}});var _e=ve(he,4),n=Q(_e);{var i=l=>{var p=sr();k(l,p)},v=l=>{var p=Te(),$=me(p);{var N=I=>{var x=ir();k(I,x)},y=I=>{var x=Te(),H=me(x);{var R=T=>{var W=lr();k(T,W)},b=T=>{var W=Te(),ee=me(W);{var J=Y=>{var G=ur();k(Y,G)},F=Y=>{var G=Te(),P=me(G);{var Ce=u=>{var K=cr();k(u,K)},Re=u=>{ar(u,{get nodes(){return e(O)},get links(){return e(B)}})};xe(P,u=>{e(O).length===0?u(Ce):u(Re,!1)},!0)}k(Y,G)};xe(ee,Y=>{e(g).length===0?Y(J):Y(F,!1)},!0)}k(T,W)};xe(H,T=>{e(f).length===0?T(R):T(b,!1)},!0)}k(I,x)};xe($,I=>{e(h)?I(y,!1):I(N)},!0)}k(l,p)};xe(n,l=>{e(c)||e(s)?l(i):l(v,!1)})}z(_e),k(a,se),ft()}export{Cr as component};
