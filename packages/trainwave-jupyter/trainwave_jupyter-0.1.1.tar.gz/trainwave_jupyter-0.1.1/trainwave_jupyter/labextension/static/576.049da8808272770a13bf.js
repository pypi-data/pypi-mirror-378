"use strict";(self.webpackChunktrainwave_jupyter=self.webpackChunktrainwave_jupyter||[]).push([[576],{576:(e,t,a)=>{a.r(t),a.d(t,{default:()=>T});var n,i,o=a(10),r=a(980),s=a(397),l=a(566);async function c(e="",t={}){const a=l.ServerConnection.makeSettings(),n=s.URLExt.join(a.baseUrl,"trainwave-jupyter",e);let i;try{i=await l.ServerConnection.makeRequest(n,t,a)}catch(e){throw new l.ServerConnection.NetworkError(e)}let o=await i.text();if(o.length>0)try{o=JSON.parse(o)}catch(e){console.log("Not a JSON response body.",i)}if(!i.ok)throw new l.ServerConnection.ResponseError(i,o.message||o);return o}!function(e){e.SUBMIT_CODE="SUBMIT_CODE",e.LAUNCHING="LAUNCHING",e.RUNNING="RUNNING",e.ERROR="ERROR",e.UPLOADING="UPLOADING",e.SUCCESS="SUCCESS",e.USER_PROCESS_FAILED="USER_PROCESS_FAILED",e.SYSTEM_TERMINATED="SYSTEM_TERMINATED",e.USER_CANCELLED="USER_CANCELLED"}(n||(n={})),function(e){e.NOT_FOUND="NOT_FOUND",e.NOT_COMPLETED="NOT_COMPLETED",e.SUCCESS="SUCCESS"}(i||(i={}));class d{constructor(e=null,t="https://backend.trainwave.ai"){this.apiKey=null,this.project="",this.organization="",this.apiKey=e,this.endpoint=t.replace(/\/$/,"")}getEndpoint(){return this.endpoint}getProject(){return this.project}getOrganization(){return this.organization}async createCliAuthSession(){return await c("auth/create_session",{method:"POST",body:JSON.stringify({name:navigator.userAgent})})}async checkCliAuthSessionStatus(e){return await c("auth/session_status",{method:"POST",body:JSON.stringify({token:e})})}async getMyself(){if(!this.apiKey)throw new Error("API key is required");return await c("api/users/me",{method:"GET",headers:{"X-Api-Key":this.apiKey}})}async listOrganizations(){if(!this.apiKey)throw new Error("API key is required");return(await c("api/organizations",{method:"GET",headers:{"X-Api-Key":this.apiKey}})).results}async listProjects(e){if(!this.apiKey)throw new Error("API key is required");const t=e?`api/projects?org=${e}`:"api/projects";return(await c(t,{method:"GET",headers:{"X-Api-Key":this.apiKey}})).results}async createProject(e,t){if(!this.apiKey)throw new Error("API key is required");return await c("api/projects",{method:"POST",headers:{"X-Api-Key":this.apiKey,"Content-Type":"application/json"},body:JSON.stringify({name:e,organization:t})})}async listJobs(e,t){if(!this.apiKey)throw new Error("API key is required");let a="api/jobs";const n=new URLSearchParams;return e&&n.append("org",e),t&&n.append("project",t),n.toString()&&(a+=`?${n.toString()}`),(await c(a,{method:"GET",headers:{"X-Api-Key":this.apiKey}})).results}async checkApiKey(){if(!this.apiKey)return!1;try{return(await c("api/organizations",{method:"GET",headers:{"X-Api-Key":this.apiKey}})).results.length>0}catch(e){return!1}}setApiKey(e){this.apiKey=e}getApiKey(){return this.apiKey}setProject(e){this.project=e}setOrganization(e){this.organization=e}async listOffers(){if(!this.apiKey)throw new Error("API key is required");return(await c("api/offers",{method:"GET",headers:{"X-Api-Key":this.apiKey}})).results}}class u{constructor(e,t){this._settings=null,this._token=null,this._config=e,this._settings=t||null,this._apiClient=new d(null,e.endpoint),this._loadToken()}isAuthenticated(){return!(!this._token||this._token.expires_at&&Date.now()>=this._token.expires_at&&(this._clearToken(),1))}getToken(){var e,t;return this.isAuthenticated()&&((null===(e=this._token)||void 0===e?void 0:e.api_token)||(null===(t=this._token)||void 0===t?void 0:t.access_token))||null}getConfig(){return this._config}getUser(){var e;return this.isAuthenticated()&&(null===(e=this._token)||void 0===e?void 0:e.user)||null}getApiClient(){const e=this.getToken();return e&&this._apiClient.setApiKey(e),this._apiClient}getApiKey(){return this.getToken()}async authenticate(){try{const e=await this._apiClient.createCliAuthSession(),{url:t,token:a}=e;if(console.log("Opening your browser to complete the login."),console.log(`URL: ${t}`),!window.open(t,"trainwave-auth","width=600,height=700,scrollbars=yes,resizable=yes"))throw new Error("Failed to open authentication window. Please allow popups.");const n=await this._pollForAuthCompletion(a);if(n){this._apiClient.setApiKey(n);const e=await this._apiClient.getMyself();return console.log("âœ… Success!"),console.log(`Logged in as: ${e.email}`),this._token={api_token:n,user:e},this._apiClient.setApiKey(n),await this._saveToken(),!0}throw new Error("Authentication failed or timed out")}catch(e){throw console.error("Authentication error:",e),e}}async logout(){this._clearToken(),this._apiClient.setApiKey(null),await Promise.all([this._clearTokenFromDisk(),this._clearAllSettingsFromDisk()])}async _pollForAuthCompletion(e){const t=Date.now()+1e3*this._config.polling_timeout;for(;Date.now()<t;)try{const{status:t,api_token:a}=await this._apiClient.checkCliAuthSessionStatus(e);if(t===i.SUCCESS&&a)return a;await new Promise(e=>setTimeout(e,1e3*this._config.polling_interval))}catch(e){console.error("Error checking auth status:",e),await new Promise(e=>setTimeout(e,1e3*this._config.polling_interval))}return null}_loadToken(){if(this._settings)try{const e=this._settings.get("token").composite;if(e&&(e.api_token||e.access_token)){this._token=e;const t=e.api_token||e.access_token;t&&this._apiClient.setApiKey(t)}}catch(e){console.warn("Failed to load token from settings:",e)}}async _saveToken(){if(this._settings)try{await this._settings.set("token",this._token)}catch(e){console.error("Failed to save token:",e)}}_clearToken(){this._token=null}async _clearTokenFromDisk(){if(this._settings)try{await this._settings.set("token",{access_token:"",refresh_token:"",expires_at:0,token_type:""})}catch(e){console.error("Failed to clear token from disk:",e)}}async _clearAllSettingsFromDisk(){if(this._settings)try{await this._settings.set("settings",{organization_id:"",organization_rid:"",project_id:"",project_rid:"",gpu_type:"CPU",gpu_count:1})}catch(e){console.error("Failed to clear settings from disk:",e)}}loadSettings(){if(!this._settings)return{organization_id:"",organization_rid:"",project_id:"",project_rid:"",gpu_type:"CPU",gpu_count:1};try{const e=this._settings.get("settings").composite||{};return{organization_id:e.organization_id||"",organization_rid:e.organization_rid||"",project_id:e.project_id||"",project_rid:e.project_rid||"",gpu_type:e.gpu_type||"CPU",gpu_count:e.gpu_count||1}}catch(e){return console.warn("Could not load settings:",e),{organization_id:"",organization_rid:"",project_id:"",project_rid:"",gpu_type:"CPU",gpu_count:1}}}async saveSettings(e){if(this._settings)try{const t={...this._settings.get("settings").composite||{},...e};await this._settings.set("settings",t)}catch(e){console.error("Failed to save settings:",e)}else console.warn("No settings registry available")}}var m=a(345),p=a.n(m),h=a(436);class g extends p().Component{constructor(e){super(e),this.loadOrganizations=async()=>{this.setState({loading:!0,error:null});try{const e=this.props.authService.getApiClient();if(!e)throw new Error("No API client available");const t=await e.listOrganizations();this.setState({organizations:t})}catch(e){const t=e instanceof Error?e.message:"Failed to load organizations";this.setState({error:t}),console.error("Failed to load organizations:",e)}finally{this.setState({loading:!1})}},this.handleOrganizationSelect=e=>{this.setState({selectedOrganizationId:e})},this.handleContinue=async()=>{var e,t;if(this.state.selectedOrganizationId)try{this.setState({loading:!0,error:null});const a=this.state.organizations.find(e=>e.rid===this.state.selectedOrganizationId);if(!a)throw new Error("Selected organization not found");await this.props.authService.saveSettings({organization_id:a.id,organization_rid:a.rid});const n=this.props.authService.getApiClient();if(!n)throw new Error("No API client available");let i=(await n.listProjects(this.state.selectedOrganizationId)).find(e=>"JupyterLab"===e.name);i?console.log("Found existing JupyterLab project:",i):(console.log("Creating new JupyterLab project..."),i=await n.createProject("JupyterLab",a.id),console.log("JupyterLab project created:",i)),await this.props.authService.saveSettings({organization_id:a.id,organization_rid:a.rid,project_id:i.id,project_rid:i.rid}),null===(t=(e=this.props).onOrganizationSelected)||void 0===t||t.call(e,this.state.selectedOrganizationId)}catch(e){const t=e instanceof Error?e.message:"Failed to setup organization and project";this.setState({error:t,loading:!1}),console.error("Failed to setup organization and project:",e)}else this.setState({error:"Please select an organization"})},this.state={organizations:[],selectedOrganizationId:"",loading:!0,error:null}}componentDidMount(){this.loadOrganizations()}render(){const{organizations:e,selectedOrganizationId:t,loading:a,error:n}=this.state;return p().createElement("div",{className:"trainwave-organization-selector"},p().createElement("div",{className:"trainwave-organization-header"},p().createElement("h3",null,"Select Organization"),p().createElement("p",null,"Choose which organization you want to use with Trainwave")),n&&p().createElement("div",{className:"trainwave-organization-error"},p().createElement("strong",null,"Error:")," ",n),p().createElement("div",{className:"trainwave-organization-content"},a?p().createElement("div",{className:"trainwave-organization-loading"},p().createElement("div",{className:"trainwave-loading-spinner"}),p().createElement("p",null,"Loading organizations...")):0===e.length?p().createElement("div",{className:"trainwave-organization-empty"},p().createElement("p",null,"No organizations found. Please create or join an organization by visiting the"," ",p().createElement("a",{href:"https://trainwave.ai/jobs",target:"_blank",rel:"noopener noreferrer"},"Trainwave website"),".")):p().createElement("div",{className:"trainwave-organization-list"},e.map(e=>p().createElement("div",{key:e.id,className:"trainwave-organization-item "+(t===e.rid?"selected":""),onClick:()=>this.handleOrganizationSelect(e.rid)},p().createElement("div",{className:"trainwave-organization-info"},p().createElement("div",{className:"trainwave-organization-name"},e.name),p().createElement("div",{className:"trainwave-organization-balance"},"Credit Balance: $",(e.computed_credit_balance/100).toFixed(2))),p().createElement("div",{className:"trainwave-organization-radio"},p().createElement("input",{type:"radio",name:"organization",value:e.rid,checked:t===e.rid,onChange:()=>this.handleOrganizationSelect(e.rid)})))))),p().createElement("div",{className:"trainwave-organization-footer"},p().createElement("button",{className:"trainwave-organization-button trainwave-organization-button-primary",onClick:this.handleContinue,disabled:a||!t},a?"Setting up...":"Continue"),this.props.onClose&&p().createElement("button",{className:"trainwave-organization-button trainwave-organization-button-secondary",onClick:this.props.onClose},"Cancel")))}}class v extends p().Component{constructor(e){super(e),this._handleAuthenticate=async()=>{var e,t,a,n;this.setState({isLoading:!0,error:null});try{if(await this.props.authService.authenticate())if(this.props.authService.loadSettings().organization_id){null===(t=(e=this.props).onAuthSuccess)||void 0===t||t.call(e),window.refreshTrainwaveDropdown&&window.refreshTrainwaveDropdown();const a=document.querySelector(".jp-Dialog");a&&a.click()}else this.setState({showOrganizationSelector:!0});else this.setState({error:"Authentication failed"})}catch(e){const t=e instanceof Error?e.message:"Authentication failed";this.setState({error:t}),null===(n=(a=this.props).onAuthError)||void 0===n||n.call(a,t)}finally{this.setState({isLoading:!1})}},this._handleOrganizationSelected=e=>{var t,a;null===(a=(t=this.props).onAuthSuccess)||void 0===a||a.call(t)},this._handleLogout=async()=>{var e,t;try{await this.props.authService.logout(),window.updateTrainwaveToolbars&&window.updateTrainwaveToolbars(),window.refreshTrainwaveDropdown&&window.refreshTrainwaveDropdown(),null===(t=(e=this.props).onAuthSuccess)||void 0===t||t.call(e)}catch(e){console.error("Logout failed:",e)}},this.state={isLoading:!1,error:null,showOrganizationSelector:!1}}render(){const{isLoading:e,error:t,showOrganizationSelector:a}=this.state,n=this.props.authService.isAuthenticated();return a?p().createElement(g,{authService:this.props.authService,onOrganizationSelected:this._handleOrganizationSelected}):p().createElement("div",{className:"trainwave-auth-dialog"},p().createElement("div",{className:"trainwave-auth-header"},p().createElement("h3",null,"Trainwave Authentication"),p().createElement("p",null,"Connect your Trainwave account to access GPU workloads")),t&&p().createElement("div",{className:"trainwave-auth-error"},p().createElement("strong",null,"Error:")," ",t),p().createElement("div",{className:"trainwave-auth-content"},n?p().createElement("div",{className:"trainwave-auth-success"},p().createElement("div",{className:"trainwave-auth-status"},p().createElement("span",{className:"trainwave-auth-icon"},"âœ“"),p().createElement("span",null,"You are authenticated with Trainwave")),p().createElement("button",{className:"trainwave-auth-button trainwave-auth-button-secondary",onClick:this._handleLogout,disabled:e},"Logout")):p().createElement("div",{className:"trainwave-auth-login"},p().createElement("div",{className:"trainwave-auth-info"},p().createElement("p",null,"To use Trainwave features, you need to authenticate with your account. This will open a browser window for you to complete the login."),p().createElement("ul",null,p().createElement("li",null,"Access to GPU workloads"),p().createElement("li",null,"Manage your compute resources"),p().createElement("li",null,"Track usage and billing"),p().createElement("li",null,"Secure session-based authentication"))),p().createElement("button",{className:"trainwave-auth-button trainwave-auth-button-primary",onClick:this._handleAuthenticate,disabled:e},e?"Authenticating...":"Authenticate with Trainwave"))),p().createElement("div",{className:"trainwave-auth-footer"},p().createElement("p",null,p().createElement("a",{href:"https://trainwave.ai",target:"_blank",rel:"noopener noreferrer"},"Learn more about Trainwave"))))}}function w(e){return new Promise((t,a)=>{let n=!1;const i=new h.Dialog({title:"Setup",body:p().createElement(v,{authService:e,onAuthSuccess:()=>{n||(n=!0,console.log("Authentication successful, updating toolbars..."),window.updateTrainwaveToolbars?window.updateTrainwaveToolbars():console.warn("updateTrainwaveToolbars function not found"),window.refreshTrainwaveDropdown&&window.refreshTrainwaveDropdown(),i.resolve(),t())},onAuthError:e=>{n||(n=!0,i.reject(),a(new Error(e)))}}),buttons:[h.Dialog.cancelButton({label:"Close"})],focusNodeSelector:".trainwave-auth-button-primary"});i.launch().then(()=>{n||(n=!0,t())}).catch(e=>{n||(n=!0,a(e))})})}class E extends p().Component{constructor(e){super(e),this.loadSettings=()=>{const e=this.props.authService.getConfig(),t=this.props.authService.loadSettings();this.setState({apiEndpoint:e.endpoint||"https://backend.trainwave.ai",pollingTimeout:e.polling_timeout||3e5,pollingInterval:e.polling_interval||2e3,organizationId:t.organization_rid,projectId:t.project_rid,gpuType:t.gpu_type,gpuCount:t.gpu_count}),t.organization_rid&&this.loadProjectOptions(t.organization_rid)},this.loadGpuOptions=async()=>{this.setState({loadingGpuOptions:!0});try{const e=this.props.authService.getApiClient();if(!e)return void console.warn("No API client available for fetching GPU options");const t=await e.listOffers(),a=new Map;t.forEach(e=>{if(e.gpu_type){const t=a.get(e.gpu_type);if(!t||e.offer<t.minPrice){const t=e.gpu_type.replace("NVIDIA-","").replace("AMD-","").replace("-"," ").replace(/(\d+)GB/,"$1GB");a.set(e.gpu_type,{minPrice:e.offer,displayName:t})}}});const n=Array.from(a.entries()).map(([e,t])=>({gpu_type:e,min_price:t.minPrice,display_name:t.displayName})).sort((e,t)=>e.min_price-t.min_price);this.setState({gpuOptions:n})}catch(e){console.error("Failed to load GPU options:",e),this.setState({gpuOptions:[{gpu_type:"NVIDIA-A100-80GB",min_price:2.3,display_name:"A100 80GB"},{gpu_type:"NVIDIA-H100-80GB",min_price:3.1,display_name:"H100 80GB"},{gpu_type:"NVIDIA-V100-16GB",min_price:.5,display_name:"V100 16GB"},{gpu_type:"NVIDIA-RTX-4090-24GB",min_price:1.1,display_name:"RTX 4090 24GB"},{gpu_type:"NVIDIA-RTX-3090-24GB",min_price:.9,display_name:"RTX 3090 24GB"}]})}finally{this.setState({loadingGpuOptions:!1})}},this.loadOrganizationOptions=async()=>{this.setState({loadingOrganizationOptions:!0});try{const e=this.props.authService.getApiClient();if(!e)return void console.warn("No API client available for fetching organization options");const t=await e.listOrganizations();this.setState({organizationOptions:t})}catch(e){console.error("Failed to load organization options:",e),this.setState({organizationOptions:[]})}finally{this.setState({loadingOrganizationOptions:!1})}},this.loadProjectOptions=async e=>{this.setState({loadingProjectOptions:!0});try{const t=this.props.authService.getApiClient();if(!t)return void console.warn("No API client available for fetching project options");const a=await t.listProjects(e);this.setState({projectOptions:a})}catch(e){console.error("Failed to load project options:",e),this.setState({projectOptions:[]})}finally{this.setState({loadingProjectOptions:!1})}},this.saveSettings=async e=>{try{await this.props.authService.saveSettings(e)}catch(e){console.error("Failed to save settings:",e)}},this.handleLogout=async()=>{try{await this.props.authService.logout(),window.updateTrainwaveToolbars&&window.updateTrainwaveToolbars(),window.refreshTrainwaveDropdown&&window.refreshTrainwaveDropdown(),this.props.onClose()}catch(e){console.error("Logout failed:",e)}},this.state={apiEndpoint:"https://backend.trainwave.ai",pollingTimeout:3e5,pollingInterval:2e3,organizationId:"",projectId:"",gpuType:"CPU",gpuCount:1,gpuOptions:[],loadingGpuOptions:!1,organizationOptions:[],loadingOrganizationOptions:!1,projectOptions:[],loadingProjectOptions:!1}}componentDidMount(){this.loadSettings(),this.loadGpuOptions(),this.loadOrganizationOptions()}render(){var e,t;const{authService:a}=this.props,{apiEndpoint:n,pollingTimeout:i,pollingInterval:o,organizationId:r,projectId:s,gpuType:l,gpuCount:c,gpuOptions:d,loadingGpuOptions:u,organizationOptions:m,loadingOrganizationOptions:h,projectOptions:g,loadingProjectOptions:v}=this.state,w=a.getUser();return p().createElement("div",{className:"trainwave-settings-dialog"},p().createElement("div",{className:"trainwave-settings-section"},p().createElement("h4",null,"Authentication"),w?p().createElement("div",{className:"trainwave-auth-status"},p().createElement("div",{className:"trainwave-user-info"},p().createElement("div",{className:"trainwave-user-avatar"},(null===(e=w.first_name)||void 0===e?void 0:e[0])||(null===(t=w.email)||void 0===t?void 0:t[0])||"U"),p().createElement("div",{className:"trainwave-user-details"},p().createElement("div",{className:"trainwave-user-name"},w.first_name&&w.last_name?`${w.first_name} ${w.last_name}`:w.email),p().createElement("div",{className:"trainwave-user-email"},w.email))),p().createElement("div",{className:"trainwave-auth-actions"},p().createElement("button",{className:"trainwave-settings-button trainwave-logout-button",onClick:this.handleLogout},"Logout"))):p().createElement("div",{className:"trainwave-not-authenticated"},p().createElement("p",null,"Not authenticated"),p().createElement("button",{className:"trainwave-settings-button trainwave-primary-button",onClick:()=>{this.props.onClose(),a.authenticate()}},"Authenticate"))),p().createElement("div",{className:"trainwave-settings-section"},p().createElement("h4",null,"Organization & Jobs"),p().createElement("div",{className:"trainwave-settings-field"},p().createElement("label",{htmlFor:"organization-id"},"Organization"),p().createElement("select",{id:"organization-id",value:r,onChange:e=>{const t=e.target.value;this.setState({organizationId:t,projectId:""});const a=this.state.organizationOptions.find(e=>e.rid===t);this.saveSettings({organization_id:(null==a?void 0:a.id)||"",organization_rid:t,project_id:"",project_rid:""}),t?this.loadProjectOptions(t):this.setState({projectOptions:[]})},disabled:h},h?p().createElement("option",{value:""},"Loading organizations..."):0===m.length?p().createElement("option",{value:""},"No organizations available"):p().createElement(p().Fragment,null,p().createElement("option",{value:""},"Select an organization"),m.map(e=>p().createElement("option",{key:e.id,value:e.rid},e.name," ($",(e.computed_credit_balance/100).toFixed(2),")")))),h&&p().createElement("div",{className:"trainwave-loading-text"},"Loading organizations from API...")),p().createElement("div",{className:"trainwave-settings-field"},p().createElement("label",{htmlFor:"project-id"},"Project"),p().createElement("select",{id:"project-id",value:s,onChange:e=>{const t=e.target.value;this.setState({projectId:t});const a=this.state.projectOptions.find(e=>e.rid===t);this.saveSettings({project_id:(null==a?void 0:a.id)||"",project_rid:t})},disabled:!r||v},r?v?p().createElement("option",{value:""},"Loading projects..."):0===g.length?p().createElement("option",{value:""},"No projects available for this organization"):p().createElement(p().Fragment,null,p().createElement("option",{value:""},"Select a project"),g.map(e=>p().createElement("option",{key:e.id,value:e.rid},e.name," (",e.total_job_count," jobs)"))):p().createElement("option",{value:""},"Select an organization first")),v&&p().createElement("div",{className:"trainwave-loading-text"},"Loading projects from API..."),!r&&p().createElement("div",{className:"trainwave-loading-text"},"Please select an organization to view available projects")),p().createElement("div",{className:"trainwave-settings-field"},p().createElement("label",{htmlFor:"gpu-type"},"GPU Type"),p().createElement("select",{id:"gpu-type",value:l,onChange:e=>{const t=e.target.value;this.setState({gpuType:t}),this.saveSettings({gpu_type:t})},disabled:u},u?p().createElement("option",{value:""},"Loading GPU options..."):p().createElement(p().Fragment,null,p().createElement("option",{value:"CPU"},"CPU Only"),d.map(e=>p().createElement("option",{key:e.gpu_type,value:e.gpu_type},e.display_name," - $",e.min_price.toFixed(2),"/hr")))),u&&p().createElement("div",{className:"trainwave-loading-text"},"Loading GPU options from API...")),p().createElement("div",{className:"trainwave-settings-field"},p().createElement("label",{htmlFor:"gpu-count"},"Number of CPUs/GPUs"),p().createElement("input",{id:"gpu-count",type:"number",min:"1",value:c,onChange:e=>{const t=parseInt(e.target.value)||1;this.setState({gpuCount:t}),this.saveSettings({gpu_count:t})}}))),p().createElement("div",{className:"trainwave-settings-section"},p().createElement("h4",null,"API"),p().createElement("div",{className:"trainwave-settings-field"},p().createElement("label",{htmlFor:"api-endpoint"},"API Endpoint"),p().createElement("input",{id:"api-endpoint",type:"text",value:n,onChange:e=>this.setState({apiEndpoint:e.target.value}),placeholder:"https://backend.trainwave.ai"})),p().createElement("div",{className:"trainwave-settings-field"},p().createElement("label",{htmlFor:"polling-timeout"},"Polling Timeout (ms)"),p().createElement("input",{id:"polling-timeout",type:"number",value:i,onChange:e=>this.setState({pollingTimeout:parseInt(e.target.value)||3e5}),min:"10000",max:"600000"})),p().createElement("div",{className:"trainwave-settings-field"},p().createElement("label",{htmlFor:"polling-interval"},"Polling Interval (ms)"),p().createElement("input",{id:"polling-interval",type:"number",value:o,onChange:e=>this.setState({pollingInterval:parseInt(e.target.value)||2e3}),min:"1000",max:"10000"}))))}}class _ extends p().Component{constructor(e){super(e),this.handleNameChange=e=>{this.setState({jobName:e.target.value})},this.handleConfirm=()=>{const e=this.state.jobName.trim();e&&this.props.onConfirm(e)},this.handleKeyPress=e=>{"Enter"===e.key?this.handleConfirm():"Escape"===e.key&&this.props.onCancel()},this.state={jobName:e.defaultName}}render(){const{jobName:e}=this.state,t=e.trim().length>0;return p().createElement("div",{className:"trainwave-job-name-dialog"},p().createElement("div",{className:"trainwave-job-name-content"},p().createElement("div",{className:"trainwave-job-name-field"},p().createElement("label",{htmlFor:"job-name-input"},"Job Name"),p().createElement("input",{id:"job-name-input",type:"text",value:e,onChange:this.handleNameChange,onKeyDown:this.handleKeyPress,placeholder:"Enter job name...",autoFocus:!0,className:"trainwave-job-name-input"}))),p().createElement("div",{className:"trainwave-job-name-footer"},p().createElement("button",{className:"trainwave-job-name-button trainwave-job-name-button-secondary",onClick:this.props.onCancel},"Cancel"),p().createElement("button",{className:"trainwave-launch-job-button",onClick:this.handleConfirm,disabled:!t},p().createElement("span",{className:"trainwave-button-icon"},p().createElement("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",strokeWidth:1.5,className:"trainwave-icon trainwave-icon-white"},p().createElement("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.59 14.37a6 6 0 0 1-5.84 7.38v-4.8m5.84-2.58a14.98 14.98 0 0 0 6.16-12.12A14.98 14.98 0 0 0 9.631 8.41m5.96 5.96a14.926 14.926 0 0 1-5.841 2.58m-.119-8.54a6 6 0 0 0-7.381 5.84h4.8m2.581-5.84a14.927 14.927 0 0 0-2.58 5.84m2.699 2.7c-.103.021-.207.041-.311.06a15.09 15.09 0 0 1-2.448-2.448 14.9 14.9 0 0 1 .06-.312m-2.24 2.39a4.493 4.493 0 0 0-1.757 4.306 4.493 4.493 0 0 0 4.306-1.758M16.5 9a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0Z"}))),"Launch Job")))}}const y=({className:e})=>p().createElement("svg",{className:e,fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},p().createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})),f=({className:e})=>p().createElement("svg",{className:e,fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},p().createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zM8.28 7.22a.75.75 0 00-1.06 1.06L8.94 10l-1.72 1.72a.75.75 0 101.06 1.06L10 11.06l1.72 1.72a.75.75 0 101.06-1.06L11.06 10l1.72-1.72a.75.75 0 00-1.06-1.06L10 8.94 8.28 7.22z",clipRule:"evenodd"})),N=({className:e})=>p().createElement("svg",{className:e,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},p().createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})),b=({className:e})=>p().createElement("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",className:e},p().createElement("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 9v3.75m0-10.036A11.959 11.959 0 0 1 3.598 6 11.99 11.99 0 0 0 3 9.75c0 5.592 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.31-.21-2.57-.598-3.75h-.152c-3.196 0-6.1-1.25-8.25-3.286Zm0 13.036h.008v.008H12v-.008Z"})),S=({className:e})=>p().createElement("svg",{className:e,fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},p().createElement("path",{fillRule:"evenodd",d:"M2 10a8 8 0 1116 0 8 8 0 01-16 0zm5-3.25A.75.75 0 017.75 6h4.5a.75.75 0 01.75.75v6.5a.75.75 0 01-.75.75h-4.5a.75.75 0 01-.75-.75v-6.5z",clipRule:"evenodd"})),k=({className:e})=>p().createElement("svg",{className:e,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},p().createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14.25 9.75L16.5 12l-2.25 2.25m-4.5 0L7.5 12l2.25-2.25M6 20.25h12A2.25 2.25 0 0020.25 18V6A2.25 2.25 0 0018 3.75H6A2.25 2.25 0 003.75 6v12A2.25 2.25 0 006 20.25z"})),j=({className:e})=>p().createElement("svg",{className:e,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},p().createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})),C=({className:e})=>p().createElement("svg",{className:e,fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},p().createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zM6.75 9.25a.75.75 0 000 1.5h6.5a.75.75 0 000-1.5h-6.5z",clipRule:"evenodd"})),z=({authService:e,onSettingsClick:t,onLoginClick:a,notebookTracker:i})=>{var o,r,s;const[l,d]=(0,m.useState)(!1),[u,g]=(0,m.useState)(null),[v,w]=(0,m.useState)([]),[E,z]=(0,m.useState)(!1),[A,T]=(0,m.useState)(!1),[O,P]=(0,m.useState)(null),[I,L]=(0,m.useState)(0),[U,x]=(0,m.useState)(!0),D=()=>{L(e=>e+1)};(0,m.useEffect)(()=>(window.refreshTrainwaveDropdown=D,()=>{delete window.refreshTrainwaveDropdown}),[]),(0,m.useEffect)(()=>{if(e.isAuthenticated()){g(e.getUser());const t=e.getApiClient();P(t),F(t)}else g(null),w([]),P(null)},[e,I]),(0,m.useEffect)(()=>{if(!e.isAuthenticated()||!O)return;const t=setInterval(()=>{F(O,!0)},1e4);return()=>clearInterval(t)},[e,O]),(0,m.useEffect)(()=>{const e=e=>{const t=e.target;l&&!t.closest(".trainwave-dropdown-container")&&d(!1)};if(l)return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[l]);const F=async(t,a=!1)=>{a||z(!0);try{const a=e.loadSettings(),n=await t.listJobs(a.organization_id,a.project_id);w(n),x(!1)}catch(e){console.error("Failed to load jobs:",e)}finally{a||z(!1)}},R=(0,m.useCallback)(e=>{const t=new Date(e),a=(new Date).getTime()-t.getTime(),n=Math.floor(a/6e4),i=Math.floor(a/36e5),o=Math.floor(a/864e5);return n<60?`${n}m ago`:i<24?`${i}h ago`:`${o}d ago`},[]),G=v.filter(e=>e.state===n.RUNNING||e.state===n.SUBMIT_CODE||e.state===n.LAUNCHING).length>0,M=p().memo(({job:e})=>p().createElement("div",{className:"trainwave-job-item"},p().createElement("div",{className:"trainwave-job-header"},p().createElement("span",{className:"trainwave-job-status"},(e=>{switch(e){case n.SUBMIT_CODE:return p().createElement(k,{className:"trainwave-icon trainwave-icon-pink"});case n.LAUNCHING:return p().createElement(N,{className:"trainwave-icon trainwave-icon-cyan trainwave-icon-spin"});case n.RUNNING:return p().createElement(N,{className:"trainwave-icon trainwave-icon-blue trainwave-icon-spin"});case n.SUCCESS:return p().createElement(y,{className:"trainwave-icon trainwave-icon-green"});case n.ERROR:return p().createElement(C,{className:"trainwave-icon trainwave-icon-orange"});case n.SYSTEM_TERMINATED:return p().createElement(j,{className:"trainwave-icon trainwave-icon-orange"});case n.USER_CANCELLED:return p().createElement(S,{className:"trainwave-icon trainwave-icon-gray"});case n.USER_PROCESS_FAILED:return p().createElement(f,{className:"trainwave-icon trainwave-icon-red"});default:return p().createElement(b,{className:"trainwave-icon trainwave-icon-gray"})}})(e.state)),p().createElement("div",{className:"trainwave-job-info"},p().createElement("span",{className:"trainwave-job-name"},p().createElement("a",{href:`https://trainwave.ai/jobs/${e.id}`,target:"_blank",rel:"noopener noreferrer"},e.config.name)),p().createElement("div",{className:"trainwave-job-meta"},p().createElement("a",{href:`https://trainwave.ai/projects/${e.project.id}`,target:"_blank",rel:"noopener noreferrer"},p().createElement("span",{className:"trainwave-job-type"},e.project.name)),p().createElement("span",{className:"trainwave-job-gpu"},e.cloud_offer.gpu_type||"CPU"))),p().createElement("span",{className:"trainwave-job-time"},R(e.created_at)))));return p().createElement("div",{className:"trainwave-dropdown-container"},p().createElement("div",{className:"trainwave-dropdown-trigger",onClick:()=>{d(!l)}},G&&p().createElement("div",{className:"trainwave-job-running-indicator"}),p().createElement("span",{className:"trainwave-dropdown-icon"},p().createElement("svg",{width:"20",height:"20",viewBox:"0 0 38 24",xmlns:"http://www.w3.org/2000/svg"},p().createElement("g",{transform:"translate(-110.711 -46.691)"},p().createElement("path",{d:"M112.683 62.048c.765.357 3.22-.06 4.674.107 1.595.185 2.497 1.15 2.627 2.341.132 1.214 1.118 4.289 1.743 2.01.698-2.547 1.004-9.334 1.455-11.143.295-1.184 1.328-1.639 2.074-1.513.747.125 1.385.848 1.706 1.568s2.361 16.35 2.651 17.05 2.286-21.51 2.485-22.908c.189-1.337.514-2.872 2.095-2.869 1.47.004 2.128-.055 2.38 2.829.34 3.92 1.076 16.858 2.28 16.872.824.01 1.589-6.52 1.702-8.164.08-.97.748-1.85 1.651-1.913 1.006-.07 1.806.146 2.218 2.159.346 1.689.374 1.793.645 2.326.146.288.438.495.875.686 1.43.627 1.493-.213 2.384.51l.02 1.12c-.765.59-2.629.251-3.393-.226-.775-.484-1.983-.928-2.364-4.572-.233-2.23-.497 5.23-1.493 7.975-1.02 2.813-3.704 3.394-4.73-.055-.921-3.1-1.36-15.491-2.048-16.602-.715-1.155-2.133 21.101-2.704 22.817-.612 1.84-3.115 2.723-3.97-.078-.842-2.754-2.185-15.335-2.658-14.434-.47.894-.422 8.324-1.914 10.471-1.183 1.704-3.547 1.387-4.256-.863s-.312-2.692-1.33-3.252c-1.02-.56-4.904-.125-4.904-.125z"}),p().createElement("circle",{cx:"112.552",cy:"63.191",r:"1.84"}),p().createElement("circle",{cx:"147.918",cy:"62.526",r:"1.84"}),p().createElement("circle",{className:"fill-background",cx:"112.532",cy:"63.216",r:".756"})))),p().createElement("span",{className:"trainwave-dropdown-arrow"},l?"â–²":"â–¼")),l&&p().createElement("div",{className:"trainwave-dropdown-menu",style:{display:"block"}},p().createElement("div",{className:"trainwave-dropdown-header"},e.isAuthenticated()&&u?p().createElement("div",{className:"trainwave-user-info"},(null==u?void 0:u.picture)&&p().createElement("img",{src:u.picture,alt:"User",width:40,height:40,className:"trainwave-user-avatar"}),!(null==u?void 0:u.picture)&&p().createElement("div",{className:"trainwave-user-avatar"},(null===(o=null==u?void 0:u.first_name)||void 0===o?void 0:o[0])||(null===(r=null==u?void 0:u.email)||void 0===r?void 0:r[0])||"U",(null===(s=null==u?void 0:u.last_name)||void 0===s?void 0:s[0])||""),p().createElement("div",{className:"trainwave-user-details"},p().createElement("div",{className:"trainwave-user-name"},(null==u?void 0:u.first_name)&&(null==u?void 0:u.last_name)?`${u.first_name} ${u.last_name}`:(null==u?void 0:u.email)||"User"),p().createElement("div",{className:"trainwave-user-email"},null==u?void 0:u.email))):p().createElement("div",{className:"trainwave-login-section"},p().createElement("div",{className:"trainwave-login-info"},p().createElement("div",{className:"trainwave-login-icon"},"ðŸš€"),p().createElement("div",{className:"trainwave-login-text"},p().createElement("div",{className:"trainwave-login-title"},"Welcome to Trainwave"),p().createElement("div",{className:"trainwave-login-subtitle"},"Sign in to access GPU workloads"))),p().createElement("button",{className:"trainwave-login-button",onClick:()=>{d(!1),null==a||a()}},"Sign In"))),e.isAuthenticated()&&p().createElement("div",{className:"trainwave-dropdown-section"},(()=>{const t=e.loadSettings(),a=t.organization_id&&t.project_id,n=A||!a;return p().createElement(p().Fragment,null,p().createElement("button",{className:"trainwave-launch-job-button",disabled:n,onClick:async()=>{try{T(!0),console.log("Launching job...");let a=null,n="Untitled Job";if(i&&i.currentWidget){const e=i.currentWidget;if(e.context&&e.context.path){a=e.context.path,console.log("Current notebook path:",a);const t=a.split("/");n=t[t.length-1].replace(/\.(ipynb|py)$/,"")||"Untitled Job";try{await e.context.save(),console.log("Notebook saved successfully")}catch(e){console.error("Failed to save notebook:",e)}}}const o=await(t=n,new Promise(e=>{let a=null;const n=new h.Dialog({title:"Launch Training Job",body:p().createElement(_,{defaultName:t,onConfirm:e=>{a=e,n.close()},onCancel:()=>{a=null,n.close()}}),buttons:[],focusNodeSelector:".trainwave-job-name-input"});n.launch().then(()=>{e(a)}).catch(t=>{console.error("Dialog error:",t),e(null)})}));if(!o)return void T(!1);const r=e.getApiKey(),s=e.loadSettings();console.log(JSON.stringify({notebook_path:a,project_id:s.project_id,gpu_type:s.gpu_type,gpu_count:s.gpu_count,job_name:o}));const l=await c("launch-job",{method:"POST",headers:{"Content-Type":"application/json","X-Api-Key":r||""},body:JSON.stringify({notebook_path:a,project_id:s.project_id,gpu_type:s.gpu_type,gpu_count:s.gpu_count,job_name:o})});console.log("Launch job response:",l),d(!1)}catch(e){console.error("Failed to launch job:",e)}finally{T(!1)}var t}},p().createElement("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",strokeWidth:1.5,className:"trainwave-icon trainwave-icon-white"},p().createElement("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.59 14.37a6 6 0 0 1-5.84 7.38v-4.8m5.84-2.58a14.98 14.98 0 0 0 6.16-12.12A14.98 14.98 0 0 0 9.631 8.41m5.96 5.96a14.926 14.926 0 0 1-5.841 2.58m-.119-8.54a6 6 0 0 0-7.381 5.84h4.8m2.581-5.84a14.927 14.927 0 0 0-2.58 5.84m2.699 2.7c-.103.021-.207.041-.311.06a15.09 15.09 0 0 1-2.448-2.448 14.9 14.9 0 0 1 .06-.312m-2.24 2.39a4.493 4.493 0 0 0-1.757 4.306 4.493 4.493 0 0 0 4.306-1.758M16.5 9a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0Z"})),A?"Launching...":"Launch Job"),!a&&p().createElement("div",{className:"trainwave-missing-config"},p().createElement(b,{className:"trainwave-icon trainwave-icon-orange"}),p().createElement("div",null,p().createElement("div",{className:"trainwave-missing-config-title"},"Configure Organization & Project"),p().createElement("div",{className:"trainwave-missing-config-message"},"Please select an organization and project in settings to launch jobs."))))})()),p().createElement("div",{className:"trainwave-dropdown-section"},p().createElement("div",{className:"trainwave-section-title"},"Jobs"),(()=>{if(!e.isAuthenticated())return p().createElement("div",{className:"trainwave-no-jobs"},p().createElement("div",{className:"trainwave-missing-config"},p().createElement(b,{className:"trainwave-icon-lg trainwave-icon-red"}),p().createElement("div",null,p().createElement("div",{className:"trainwave-missing-config-title"},"Login Required"),p().createElement("div",{className:"trainwave-missing-config-message"},"Please log in to view your jobs."))));const t=e.loadSettings();return t.organization_id&&t.project_id?E&&U?p().createElement("div",{className:"trainwave-loading"},"Loading jobs..."):0!==v.length||U?p().createElement("div",{className:"trainwave-jobs-list"},v.slice(0,5).map(e=>p().createElement(M,{key:e.id,job:e})),v.length>5&&p().createElement("div",{className:"trainwave-jobs-more"},p().createElement("a",{href:"https://trainwave.ai/jobs",target:"_blank",rel:"noopener noreferrer"},p().createElement("span",{className:"trainwave-jobs-more-text"},"View all jobs")))):p().createElement("div",{className:"trainwave-no-jobs"},"No active jobs"):p().createElement("div",{className:"trainwave-no-jobs"},p().createElement("div",{className:"trainwave-missing-config"},p().createElement(b,{className:"trainwave-icon-lg trainwave-icon-red"}),p().createElement("div",null,p().createElement("div",{className:"trainwave-missing-config-title"},"Select Organization & Project"),p().createElement("div",{className:"trainwave-missing-config-message"},"Please configure your organization and project in settings to view jobs."))))})()),p().createElement("div",{className:"trainwave-dropdown-section"},p().createElement("div",{className:"trainwave-dropdown-actions"},p().createElement("button",{className:"trainwave-dropdown-button",onClick:()=>{t(),d(!1)}},p().createElement("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",className:"trainwave-icon trainwave-icon-gray"},p().createElement("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.325.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 0 1 1.37.49l1.296 2.247a1.125 1.125 0 0 1-.26 1.431l-1.003.827c-.293.241-.438.613-.43.992a7.723 7.723 0 0 1 0 .255c-.008.378.137.75.43.991l1.004.827c.424.35.534.955.26 1.43l-1.298 2.247a1.125 1.125 0 0 1-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.47 6.47 0 0 1-.22.128c-.331.183-.581.495-.644.869l-.213 1.281c-.09.543-.56.94-1.11.94h-2.594c-.55 0-1.019-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 0 1-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 0 1-1.369-.49l-1.297-2.247a1.125 1.125 0 0 1 .26-1.431l1.004-.827c.292-.24.437-.613.43-.991a6.932 6.932 0 0 1 0-.255c.007-.38-.138-.751-.43-.992l-1.004-.827a1.125 1.125 0 0 1-.26-1.43l1.297-2.247a1.125 1.125 0 0 1 1.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.086.22-.128.332-.183.582-.495.644-.869l.214-1.28Z"}),p().createElement("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"})),"Settings")))))},A={id:"trainwave-jupyter:plugin",description:"Make trainwave.ai available right in your notebook for fast, cheap and efficient GPU workloads.",autoStart:!0,requires:[r.INotebookTracker],optional:[o.ISettingRegistry],activate:(e,t,a)=>{console.log("JupyterLab extension trainwave is activated!");const n={endpoint:"https://backend.trainwave.ai",polling_timeout:300,polling_interval:2};let i=null,o=null;const r=e=>{i=e,console.log("Auth service initialized, isAuthenticated:",e.isAuthenticated()),t.forEach(e=>{s(e)})};if(a)a.load(A.id).then(e=>{o=e;const t=new u(n,o);console.log("trainwave settings loaded:",o.composite),r(t)}).catch(e=>{console.error("Failed to load settings for trainwave.",e);const t=new u(n);r(t)});else{const e=new u(n);r(e)}c("get-example").then(e=>{console.log(e)}).catch(e=>{console.error(`The trainwave server extension appears to be missing.\n${e}`)}),e.commands.addCommand("trainwave-jupyter:auth",{label:"Trainwave Authentication",execute:async()=>{if(console.log("Trainwave authentication triggered!"),i)try{await w(i),i.isAuthenticated()&&(console.log("User is authenticated with Trainwave"),t.forEach(e=>{s(e)}))}catch(e){console.error("Authentication failed:",e),alert(`Authentication failed: ${e instanceof Error?e.message:"Unknown error"}`)}else console.error("Auth service not initialized")}});const s=e=>{const a=e.toolbar;console.log("Updating toolbar for panel, authService exists:",!!i,"isAuthenticated:",null==i?void 0:i.isAuthenticated());try{a.removeItem("trainwave-button")}catch(e){}try{a.removeItem("trainwave-dropdown")}catch(e){}if(i){const e=h.ReactWidget.create(p().createElement(z,{authService:i,notebookTracker:t,onSettingsClick:()=>{i&&function(e){new Promise(t=>{let a=!1;const n=new h.Dialog({title:"Trainwave Settings",body:p().createElement(E,{authService:e,onClose:()=>{a||(a=!0,n.resolve(),t())}}),buttons:[h.Dialog.cancelButton({label:"Close"})],focusNodeSelector:".trainwave-primary-button"});n.launch().then(()=>{a||(a=!0,t())})})}(i)},onLoginClick:()=>{i&&w(i)}}));e.addClass("trainwave-dropdown-widget"),a.insertItem(10,"trainwave-dropdown",e)}};i&&t.forEach(e=>{s(e)}),t.widgetAdded.connect((e,t)=>{i&&setTimeout(()=>s(t),100)}),window.updateTrainwaveToolbars=()=>{i&&t.forEach(e=>{s(e)})}}},T=A}}]);