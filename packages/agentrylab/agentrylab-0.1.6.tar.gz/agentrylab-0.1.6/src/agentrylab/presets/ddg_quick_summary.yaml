#########################
# DDG Quick Summary preset
# One agent calls DuckDuckGo for the given topic and summarizes top results.
# Works with llama3 (Ollama). No strict schema; simple and fun.
# Tips:
# - Set a topic with --objective parameter (see `objective`).
# - Single turn is enough: the agent first calls the tool, then writes the summary.
#########################

version: "1.0.0"
id: ddg_quick_summary
name: DDG Quick Summary
description: One agent searches DuckDuckGo and summarizes the first ~5 results with URLs.

# Optional seed topic (pinned into context each turn)
objective: "Pick a topic to summarize from the web."

runtime:
  max_rounds: 1
  trace: { enabled: false }
  scheduler:
    impl: agentrylab.runtime.scheduler.every_n.EveryNScheduler
    params:
      schedule:
        scout: 1
  message_contract:
    require_metadata: false
  context_defaults:
    pin_objective: true

providers:
  - id: ollama_llama3
    impl: agentrylab.runtime.providers.ollama.OllamaProvider
    model: "llama3:latest"
    base_url: "http://localhost:11434"
    timeout: 30

tools:
  - id: search_ddg
    description: DuckDuckGo search (top results)
    impl: agentrylab.runtime.tools.ddg.DuckDuckGoSearchTool
    params:
      max_results: 5
      safesearch: "moderate"
      retries: 1
      backoff: 0.3

agents:
  - id: scout
    role: agent
    provider: ollama_llama3
    tools: [search_ddg]
    description: Web scout that searches and writes a concise summary
    system_prompt: |
      You are a web scout. Use the Objective as your search top      
      First output: emit exactly this JSON tool call using the Objective text verbatim
      as the query (no prose, no code fences/backticks):
      {"tools": [{"tool": "search_ddg", "args": {"query": "OBJECTIVE_TEXT_HERE"}}]}
      
      Replace "OBJECTIVE_TEXT_HERE" with the actual objective text from the context.
      Example if Objective is "quantum computing basics":
      {"tools": [{"tool": "search_ddg", "args": {"query": "quantum computing basics"}}]}

      After the tool returns, write a concise 5‑bullet summary of the first five results.
      - Each bullet: a quick insight plus a URL in parentheses.
      - Only use URLs from the tool results; do not invent URLs.
      - If fewer than 5 results, summarize what is available.
      - Avoid asking the user to type or respond; be self‑contained.
      - Do NOT add closing requests like "let me know if you want more".
      - Keep it to ~120 words total if possible.
      - NEVER leave your response empty. Always provide a complete summary.
