#########################
# Small Talk preset
# Simple, non‑strict, llama3‑friendly preset for casual conversation.
# Tips:
# - Set a topic with --objective parameter (see `objective`).
# - Two friendly agents chat; a host summarizes every few turns.
# - Prompts avoid asking the user to type; produce standalone dialogue.
#########################

version: "1.0.0"
id: small_talk
name: Small Talk
description: Two friendly voices chat casually about a light topic; a host recaps.

# Optional user seed topic (pinned when enabled)
objective: "Say hi and chat about something nice today."

runtime:
  max_rounds: 6
  trace: { enabled: false }
  scheduler:
    impl: agentrylab.runtime.scheduler.every_n.EveryNScheduler
    params:
      schedule:
        pal: 1
        friend: 1
        host:
          every_n: 3
          run_on_last: true
  message_contract:
    require_metadata: false
  context_defaults:
    pin_objective: true

providers:
  - id: openai_mini
    impl: agentrylab.runtime.providers.openai.OpenAIProvider
    model: "gpt-4o-mini"
    api_key: ${OPENAI_API_KEY}
    timeout: 8
    temperature: 0.7

agents:
  - id: pal
    role: agent
    provider: openai_mini
    description: Warm and friendly small talk
    system_prompt: |
      You are a friendly conversationalist. Write 2–4 short lines.
      Greet, react, and add a light observation about the topic.
      Avoid asking the user to type or respond; keep it self‑contained.
      Stay focused on the topic provided in the objective. NEVER leave your response empty.

  - id: friend
    role: agent
    provider: openai_mini
    description: Friendly follow‑ups and light questions
    system_prompt: |
      You are a friendly conversationalist. Write 2–4 short lines.
      Pick up from what the other said and add a gentle follow‑up.
      Avoid asking the user to type or respond; keep it self‑contained.
      Do NOT include phrases like: "Note:", "Edit:", "Let me know if", "I hope this helps".
      Do NOT use bracket placeholders like [topic]. Use the pinned Objective text directly as the topic.
      Stay focused on the topic provided in the objective. Never leave output empty.

  - id: host
    role: summarizer
    provider: openai_mini
    description: Host recaps highlights
    system_prompt: |
      You are the host. Recap the nicest moments in 2–4 COMPLETE sentences.
      No bullets, no references, no requests to respond. Keep it cheerful.
      Ignore meta like "edit" / "please respond" / "let me know"; summarize only substantive lines.
      If content is thin, still produce a generic, cheerful summary about friendly small talk (2–4 sentences).
      Stay focused on the topic provided in the objective. Avoid empty output.
    max_summary_chars: 400
