<table>
  <tr>
    <th rowspan="2">Type</th>
    <th rowspan="2">Message</th>
    <th colspan="2">Value</th>
    <th colspan="2">Line Number</th>
    <th rowspan="2">Error</th>
    <th rowspan="2">Visu</th>
    <th colspan="2">Line(s)</th>
  </tr>
  <tr>
    <th class="test-bg-50">Test</th>
    <th class="refe-bg-50">Ref.</th>
    <th class="test-bg-50">Test</th>
    <th class="refe-bg-50">Ref.</th>
    <th class="test-bg-50">Test</th>
    <th class="refe-bg-50">Ref.</th>
  </tr>


  {% for error_type in [{"data_key": "errors", "class": "ERROR"}, {"data_key": "warnings", "class": "WARNING"}] %}
  {% for item in file[error_type.data_key] %}
  <tr>
    <td class="{{error_type.class}}">{{error_type.class}}</td>
    <td>{{ item.message }}</td>
    <td class="number test-bg-20">{{ item.test }}</td>
    <td class="number refe-bg-20">{{ item.reference }}</td>
    <td class="number test-bg-20">{{ item.line_nb_1 }}</td>
    <td class="number refe-bg-20">{{ item.line_nb_1 }}</td>
    <td class="number">
      {% if item.error_type == 'relative' %}{{ '%0.2f' % (item.error*100)|float}}%{% endif %}
      {% if item.error_type == 'absolute' %}{{ item.error }}{% endif %}
    </td>
  <td>
    {% if item.test and item.reference %}
    <div style="width:200px;height:20px">
      <div class="test-bg-80" style="width:{{100*(item.test|abs)/([(item.test|abs), (item.reference|abs)]|max)}}%;height:10px"></div>
      <div class="refe-bg-80" style="width:{{100*(item.reference|abs)/([(item.test|abs), (item.reference|abs)]|max)}}%; height:10px"></div>
    </div>
    {% endif %}
  </td>
  <td class="test-bg-20"><pre>{{ item.line_1 }}</pre></td>
  <td class="refe-bg-20"><pre>{{ item.line_2 }}</pre></td>
  </tr>
  {% endfor %}
  {% endfor %}
  
</table>
