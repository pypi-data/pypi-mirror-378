import{p as ge,_ as pe,ad as $e,K as l,a0 as D,ae as he,f as h,a as E,s as o,A as w,t as d,d as t,x as be,W as xe,N as G,ab as we,Y as Le,ac as ke,g as n,h as W,r as ye,v as Se,aH as Ue,S as Fe,aG as Ie,e as u,a3 as Y,U as Te,a1 as $,a4 as O,ag as J,ap as Ae}from"./Style.js?v=1758391171";import{S as Be,h as Pe,g as Ee,L as Q,I as V}from"./api.js?v=1758391171";import{T as Ge}from"./Toggle.js?v=1758391171";var Oe=h('<div class="font-bold"> </div> <div> </div>',1),Re=h('<div class="my-5"></div>'),Ne=h("<!> <!>",1),je=h("<div><!></div>"),Me=h('<form method="post"><!> <!> <!> <!> <!> <div class="flex justify-center w-full"><div><!></div> <!></div></form>'),qe=h('<div class="flex justify-center w-full"><div class="w-52 h-52 mt-6 mb-14"><img loading="lazy" alt="LOGO" referrerpolicy="no-referrer"/></div></div> <!> <div class="flex justify-center w-full"><div><!></div></div> <div></div> <div id="loaded" class="h-0 w-0"></div>',1);function Ce(X,Z){ge(Z,!0);const f=()=>Le(ke,"$share",ee),[ee,ae]=xe(),R="/a/login/",N="/a/login/fallback/",re="/a/saml/init/";let j=D(!1),te=Y(se),_=D(!1),L=pe([]);function v(e){return we(f(),e)}function se(){return f().backend.sso?window.location.pathname.includes("fallback")?N:re:R}function M(){if(!l(_))return;let e=document.getElementById("id_username");e&&(localStorage.login_username=e.value)}$e(()=>{l(j)&&(localStorage.login_remember=l(_)?"1":"0",l(_)?M():localStorage.login_username="")});function oe(){if(localStorage.login_remember=="1"){G(_,!0);let e=document.getElementById("id_username");e&&localStorage.login_username&&(e.value=localStorage.login_username)}G(j,!0)}function le(){let e=document.querySelectorAll(".aw-backend-form-alert");if(e)for(let s of e)s.field?L.push({color:"red",title:`${v("common.invalid_value")}: "${s.field}"`,msg:s.innerText}):L.push({color:"red",title:v("common.invalid_form"),msg:s.innerText})}he(()=>{oe(),le()});var q=qe(),C=E(q),ne=n(C),ie=n(ne),H=o(C,2);{var de=e=>{var s=Re();Fe(s,21,()=>L,Te,(k,g)=>{{let y=Y(()=>l(g).color||"red");Ie(k,{get color(){return l(y)},class:"mx-20",children:(S,z)=>{var b=Oe(),U=E(b),F=n(U),I=o(U,2),T=n(I);d(()=>{u(F,l(g).title),u(T,l(g).msg)}),t(S,b)},$$slots:{default:!0}})}}),t(e,s)};w(H,e=>{L.length&&e(de)})}var K=o(H,2),ve=n(K),ce=n(ve);{var ue=e=>{Be(e,{})},me=e=>{var s=Me(),k=n(s);Pe(k,Ee);var g=o(k,2);Q(g,{for:"id_username",children:(a,c)=>{var r=$();d(i=>u(r,i),[()=>v("login.user")]),t(a,r)},$$slots:{default:!0}});var y=o(g,2);V(y,{type:"text",id:"id_username",name:"username",oninput:M});var S=o(y,2);{var z=a=>{var c=Ne(),r=E(c);Q(r,{for:"id_password",class:"mt-2",children:(A,m)=>{var p=$();d(B=>u(p,B),[()=>v("login.pwd")]),t(A,p)},$$slots:{default:!0}});var i=o(r,2);V(i,{type:"password",name:"password",id:"id_password"}),t(a,c)};w(S,a=>{(!f().backend.sso||window.location.pathname.includes("fallback"))&&a(z)})}var b=o(S,2);Ge(b,{class:"mt-2",get checked(){return l(_)},set checked(a){G(_,a,!0)},children:(a,c)=>{var r=$();d(i=>u(r,i),[()=>v("login.saveUser")]),t(a,r)},$$slots:{default:!0}});var U=o(b,2),F=n(U),I=n(F);O(I,{type:"submit",class:"mt-5",children:(a,c)=>{var r=$();d(i=>u(r,i),[()=>v("login.btn")]),t(a,r)},$$slots:{default:!0}});var T=o(F,2);{var _e=a=>{var c=je(),r=n(c);{var i=m=>{O(m,{href:R,get class(){return`ml-2 mt-5 ${J}`},children:(p,B)=>{var x=$();d(P=>u(x,P),[()=>v("login.sso")]),t(p,x)},$$slots:{default:!0}})},A=m=>{O(m,{href:N,get class(){return`ml-2 mt-5 ${J}`},children:(p,B)=>{var x=$();d(P=>u(x,P),[()=>v("login.localUser")]),t(p,x)},$$slots:{default:!0}})};w(r,m=>{window.location.pathname.includes("fallback")?m(i):m(A,!1)})}t(a,c)};w(T,a=>{f().backend.sso&&a(_e)})}d(()=>W(s,"action",l(te))),t(e,s)};w(ce,e=>{f().backend?e(me,!1):e(ue)})}var fe=o(K,2);d(()=>{W(ie,"src",f().backend.logo),ye(fe,1,Se(Ue))}),t(X,q),be(),ae()}Ae(Ce,{target:document.getElementById("login")});
