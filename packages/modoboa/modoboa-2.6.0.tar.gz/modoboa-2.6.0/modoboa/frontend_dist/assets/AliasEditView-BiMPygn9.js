import{a as j,_ as G}from"./AliasRecipientForm-BhQfATiS.js";import{L as I}from"./LoadingData-Cxd490P6.js";import{b as C,B as M,q as S,h as m,d as q,c as p,l as v,o,a,e as E,w as e,k as r,t as i,f as u,F as R,s as z,_ as O}from"./index-YIGRKgNA.js";import{a as w}from"./aliases-Q4uTcEh4.js";import{d as b,c as h,V as A}from"./VAvatar-J563boKh.js";import{V as T,c as $,a as B,b as H}from"./VExpansionPanels-Dnwgt5uT.js";import{V as k,a as f}from"./VRow-CAbOSEHS.js";import{V as J}from"./VChip-DvxO74Mw.js";import{V as K,a as Q}from"./VToolbar-Cs-fVa4M.js";import"./EmailField-DpBYkqam.js";import"./VTextField-C9VUP7V9.js";import"./tag-DV1_zOzl.js";import"./VInput-Dpmea5z9.js";import"./VProgressCircular-CtqQON49.js";import"./forwardRefs-DPrLRqxP.js";import"./ssrBoot-CpJ-7WlH.js";import"./domains.store-CfpnnBGo.js";import"./domains-CQv8gtbQ.js";import"./VForm-BwTUBf4u.js";import"./VSwitch-CixaedmQ.js";import"./VSelectionControl-BN-zQ3C6.js";import"./VSelect-Cdh0qO5m.js";import"./VMenu-DDmBlbM8.js";import"./VCheckboxBtn-CLh3m66z.js";import"./VTextarea-B28SmJ2v.js";import"./VContainer-L2EoH3dT.js";/* empty css              */const W={key:1},X={key:0},Y={class:"mr-2"},Z={key:0},ee={class:"mt-4 d-flex justify-end"},ae={__name:"AliasEditForm",setup(N){const{$gettext:n}=C(),c=M(),y=S(),s=m({pk:c.params.id}),V=m(0),d=m(!0),g=m(!1),x=m(),F=m(),P={generalForm:x,recipientForm:F};async function D(){g.value=!1,V.value=[];for(const[_,t]of Object.entries(P))if(t.value!=null){const{valid:l}=await t.value.vFormRef.validate();l||(g.value=!0,V.value.push(_))}if(!g.value){d.value=!0;try{await w.patch(c.params.id,s.value),y.push({name:"AliasDetail",params:{id:c.params.id}})}finally{d.value=!1}}}return q(()=>{w.get(c.params.id).then(_=>{s.value=_.data,d.value=!1})}),(_,t)=>d.value?(o(),p(I,{key:0})):(o(),v("div",W,[a(H,{modelValue:V.value,"onUpdate:modelValue":t[2]||(t[2]=l=>V.value=l),multiple:g.value},{default:e(()=>[a(T,{eager:"",value:"generalForm"},{default:e(()=>[a($,null,{default:e(({expanded:l})=>[a(k,{"no-gutters":""},{default:e(()=>[a(f,{cols:"4"},{default:e(()=>[r(i(u(n)("General")),1)]),_:1}),a(f,{cols:"8",class:"text-medium-emphasis"},{default:e(()=>[a(b,{"leave-absolute":""},{default:e(()=>[l?(o(),v("span",X)):(o(),p(k,{key:1,"no-gutters":"",style:{width:"100%"}},{default:e(()=>[a(f,{cols:"6"},{default:e(()=>[r(i(u(n)("Address"))+": "+i(s.value.address),1)]),_:1}),a(f,{cols:"6"},{default:e(()=>[E("div",Y,i(u(n)("Enabled")),1),s.value.enabled?(o(),p(h,{key:0,color:"success"},{default:e(()=>t[4]||(t[4]=[r("mdi-check-circle-outline")])),_:1,__:[4]})):(o(),p(h,{key:1},{default:e(()=>t[5]||(t[5]=[r("mdi-close-circle-outline")])),_:1,__:[5]}))]),_:1})]),_:1}))]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:1}),a(B,null,{default:e(()=>[a(j,{ref_key:"generalForm",ref:x,modelValue:s.value,"onUpdate:modelValue":t[0]||(t[0]=l=>s.value=l)},null,8,["modelValue"])]),_:1})]),_:1}),a(T,{eager:"",value:"recipientForm"},{default:e(()=>[a($,null,{default:e(({expanded:l})=>[a(k,{"no-gutters":""},{default:e(()=>[a(f,{cols:"4"},{default:e(()=>[r(i(u(n)("Recipients")),1)]),_:1}),a(f,{cols:"8",class:"text-medium-emphasis"},{default:e(()=>[a(b,{"leave-absolute":""},{default:e(()=>[l?(o(),v("span",Z)):(o(),p(k,{key:1,"no-gutters":"",style:{width:"100%"}},{default:e(()=>[(o(!0),v(R,null,z(s.value.recipients,(L,U)=>(o(),p(J,{key:U,size:"small"},{default:e(()=>[r(i(L),1)]),_:2},1024))),128))]),_:1}))]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:1}),a(B,null,{default:e(()=>[a(u(G),{ref_key:"recipientForm",ref:F,modelValue:s.value.recipients,"onUpdate:modelValue":t[1]||(t[1]=l=>s.value.recipients=l)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue","multiple"]),E("div",ee,[a(A,{loading:d.value,onClick:t[3]||(t[3]=l=>_.$router.go(-1))},{default:e(()=>[r(i(u(n)("Cancel")),1)]),_:1},8,["loading"]),a(A,{class:"ml-4",color:"primary darken-1",loading:d.value,onClick:D},{default:e(()=>[r(i(u(n)("Save")),1)]),_:1},8,["loading"])])]))}},te={__name:"AliasEditView",setup(N){const{$gettext:n}=C();return(c,y)=>(o(),v(R,null,[a(K,{flat:""},{default:e(()=>[a(Q,null,{default:e(()=>[r(i(u(n)("Edit alias")),1)]),_:1})]),_:1}),a(ae)],64))}},Be=O(te,[["__scopeId","data-v-0edc6d33"]]);export{Be as default};
