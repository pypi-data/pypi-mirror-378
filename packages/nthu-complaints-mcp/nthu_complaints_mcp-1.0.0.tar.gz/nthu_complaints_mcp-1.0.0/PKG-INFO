Metadata-Version: 2.4
Name: nthu-complaints-mcp
Version: 1.0.0
Summary: FastMCP server for NTHU Complaints System
Project-URL: Homepage, https://github.com/nthu-complaints-system/mcp-server
Project-URL: Repository, https://github.com/nthu-complaints-system/mcp-server.git
Project-URL: Issues, https://github.com/nthu-complaints-system/mcp-server/issues
Author: NTHU Complaints System Team
License: MIT
License-File: LICENSE
Keywords: complaints,fastmcp,mcp,nthu
Classifier: Development Status :: 4 - Beta
Classifier: Intended Audience :: Developers
Classifier: License :: OSI Approved :: MIT License
Classifier: Programming Language :: Python :: 3
Classifier: Programming Language :: Python :: 3.8
Classifier: Programming Language :: Python :: 3.9
Classifier: Programming Language :: Python :: 3.10
Classifier: Programming Language :: Python :: 3.11
Classifier: Programming Language :: Python :: 3.12
Requires-Python: >=3.8
Requires-Dist: fastmcp>=0.2.0
Requires-Dist: firebase-admin>=6.0.0
Requires-Dist: google-cloud-firestore>=2.0.0
Requires-Dist: python-dotenv>=1.0.0
Provides-Extra: dev
Requires-Dist: black>=22.0.0; extra == 'dev'
Requires-Dist: isort>=5.0.0; extra == 'dev'
Requires-Dist: mypy>=1.0.0; extra == 'dev'
Requires-Dist: pytest>=7.0.0; extra == 'dev'
Description-Content-Type: text/markdown

# NTHU Complaints System - FastMCP Server

ä¸€å€‹å°ˆç‚º NTHU ç”³è¨´ç³»çµ±è¨­è¨ˆçš„ FastMCP ä¼ºæœå™¨ï¼Œæä¾›å®Œæ•´çš„ç”³è¨´ç®¡ç†åŠŸèƒ½ã€‚

## ğŸš€ åŠŸèƒ½ç‰¹é»

### ğŸ” ç”¨æˆ¶èªè­‰
- **ç™»å…¥/ç™»å‡º**: å®‰å…¨çš„ç”¨æˆ¶æœƒè©±ç®¡ç†
- **æœƒè©±é©—è­‰**: è‡ªå‹•æœƒè©±éæœŸå’Œé©—è­‰
- **æ¬Šé™æ§åˆ¶**: åŸºæ–¼è§’è‰²çš„å­˜å–æ§åˆ¶

### ğŸ“ ç”³è¨´ç®¡ç†
- **æäº¤ç”³è¨´**: æ”¯æ´åŒ¿åå’Œå¯¦åç”³è¨´
- **æŸ¥çœ‹æ‘˜è¦**: ç²å–æ‰€æœ‰ç”³è¨´çš„æ¦‚è¦½
- **è©³ç´°æŸ¥çœ‹**: æŸ¥çœ‹ç‰¹å®šç”³è¨´çš„å®Œæ•´è³‡è¨Š
- **ç‹€æ…‹è¿½è¹¤**: å³æ™‚æ›´æ–°ç”³è¨´è™•ç†ç‹€æ…‹

### ğŸ›  ç³»çµ±ç›£æ§
- **ä¼ºæœå™¨ç‹€æ…‹**: ç›£æ§ä¼ºæœå™¨å’Œè³‡æ–™åº«é€£ç·š
- **æœƒè©±ç®¡ç†**: è¿½è¹¤æ´»èºç”¨æˆ¶æœƒè©±

## ğŸ“¦ å®‰è£æ–¹å¼

### ä½¿ç”¨ UVX (æ¨è–¦)

```bash
# ç›´æ¥åŸ·è¡Œï¼Œç„¡éœ€æ‰‹å‹•å®‰è£
uvx nthu-complaints-mcp
```

### ä½¿ç”¨ UV

```bash
# å®‰è£åˆ°å…¨åŸŸç’°å¢ƒ
uv tool install nthu-complaints-mcp

# åŸ·è¡Œ
nthu-complaints-mcp
```

### ä½¿ç”¨ Pip

```bash
# å¾æœ¬åœ°å®‰è£
pip install .

# æˆ–å¾ PyPI å®‰è£ (å¦‚æœå·²ç™¼å¸ƒ)
pip install nthu-complaints-mcp

# åŸ·è¡Œ
nthu-complaints-mcp
```

## âš™ï¸ è¨­ç½®

### 1. Firebase é…ç½®

åœ¨åŸ·è¡Œå‰ï¼Œéœ€è¦è¨­ç½® Firebase æœå‹™å¸³æˆ¶é‡‘é‘°ï¼š

1. å¾ [Firebase Console](https://console.firebase.google.com/) ä¸‹è¼‰æœå‹™å¸³æˆ¶é‡‘é‘°
2. å°‡æª”æ¡ˆæ”¾ç½®åœ¨ä»¥ä¸‹ä»»ä¸€ä½ç½®ï¼š
   - `./firebase-service-account.json` (ç•¶å‰ç›®éŒ„)
   - `~/.nthu-complaints/firebase-service-account.json` (ç”¨æˆ¶ç›®éŒ„)
   - `/etc/nthu-complaints/firebase-service-account.json` (ç³»çµ±ç›®éŒ„)

### 2. ç’°å¢ƒè®Šæ•¸ (å¯é¸)

```bash
export GOOGLE_APPLICATION_CREDENTIALS="/path/to/firebase-service-account.json"
```

## ğŸ”§ é–‹ç™¼è¨­ç½®

### æœ¬åœ°é–‹ç™¼

```bash
# å…‹éš†å€‰åº«
git clone <repository-url>
cd nthu-complaints-mcp

# ä½¿ç”¨ UV è¨­ç½®é–‹ç™¼ç’°å¢ƒ
uv venv
source .venv/bin/activate  # Linux/macOS
# .venv\Scripts\activate   # Windows

# å®‰è£ä¾è³´
uv pip install -e ".[dev]"

# åŸ·è¡Œä¼ºæœå™¨
python -m nthu_complaints_mcp.server
```

### æ¸¬è©¦

```bash
# åŸ·è¡Œæ¸¬è©¦
pytest

# åŸ·è¡Œæ¸¬è©¦ä¸¦é¡¯ç¤ºè¦†è“‹ç‡
pytest --cov=nthu_complaints_mcp
```

### ä»£ç¢¼å“è³ª

```bash
# æ ¼å¼åŒ–ä»£ç¢¼
black src/
isort src/

# é¡å‹æª¢æŸ¥
mypy src/
```

## ğŸ“š API åƒè€ƒ

### å¯ç”¨å·¥å…·

| å·¥å…·åç¨± | æè¿° | åƒæ•¸ |
|---------|------|------|
| `mcp_login_user` | ç”¨æˆ¶ç™»å…¥ | `email`, `password` |
| `mcp_logout_user` | ç”¨æˆ¶ç™»å‡º | `session_token` |
| `mcp_check_session_status` | æª¢æŸ¥æœƒè©±ç‹€æ…‹ | `session_token` |
| `mcp_submit_complaint` | æäº¤ç”³è¨´ | `session_token`, `title`, `description`, `category`, `department`, `priority`, `anonymous`, `contact_info` |
| `mcp_get_user_complaints_summary` | ç²å–ç”³è¨´æ‘˜è¦ | `session_token` |
| `mcp_get_complaint_details` | ç²å–ç”³è¨´è©³æƒ… | `session_token`, `case_number` |
| `mcp_server_status` | ç²å–ä¼ºæœå™¨ç‹€æ…‹ | ç„¡ |

### ä½¿ç”¨ç¯„ä¾‹

#### 1. ç™»å…¥ç”¨æˆ¶

```python
result = mcp_login_user("user@example.com", "password123")
if result["success"]:
    session_token = result["session_token"]
    print(f"ç™»å…¥æˆåŠŸ: {result['user']['display_name']}")
```

#### 2. æäº¤ç”³è¨´

```python
complaint = mcp_submit_complaint(
    session_token=session_token,
    title="åœ–æ›¸é¤¨è¨­å‚™å•é¡Œ",
    description="åœ–æ›¸é¤¨çš„é›»è…¦ç„¡æ³•æ­£å¸¸ä½¿ç”¨ï¼Œå½±éŸ¿å­¸ç¿’æ•ˆç‡",
    category="è¨­æ–½è¨­å‚™",
    department="åœ–æ›¸é¤¨",
    priority="medium",
    anonymous=False,
    contact_info={"phone": "0912345678", "preferred_contact": "email"}
)

if complaint["success"]:
    print(f"ç”³è¨´å·²æäº¤ï¼Œæ¡ˆä»¶ç·¨è™Ÿ: {complaint['case_number']}")
```

#### 3. æŸ¥çœ‹ç”³è¨´æ‘˜è¦

```python
summary = mcp_get_user_complaints_summary(session_token)
if summary["success"]:
    print(f"ç¸½å…±æœ‰ {summary['total_count']} å€‹ç”³è¨´")
    for complaint in summary["complaints"]:
        print(f"- {complaint['case_number']}: {complaint['title']} ({complaint['status']})")
```

#### 4. æŸ¥çœ‹ç”³è¨´è©³æƒ…

```python
details = mcp_get_complaint_details(session_token, "NTHU20241219120000")
if details["success"]:
    complaint = details["complaint"]
    print(f"æ¨™é¡Œ: {complaint['title']}")
    print(f"ç‹€æ…‹: {complaint['status']}")
    print(f"æè¿°: {complaint['description']}")
```

## ğŸ— æ¶æ§‹

### æ¨¡çµ„çµæ§‹

```
src/nthu_complaints_mcp/
â”œâ”€â”€ __init__.py          # å¥—ä»¶åˆå§‹åŒ–
â”œâ”€â”€ config.py            # é…ç½®ç®¡ç†
â”œâ”€â”€ firebase_client.py   # Firebase å®¢æˆ¶ç«¯
â”œâ”€â”€ session_manager.py   # æœƒè©±ç®¡ç†
â”œâ”€â”€ tools.py            # MCP å·¥å…·å¯¦ç¾
â””â”€â”€ server.py           # ä¸»ä¼ºæœå™¨
```

### è³‡æ–™æµ

1. **èªè­‰**: ç”¨æˆ¶é€šé `mcp_login_user` ç™»å…¥ï¼Œç²å¾—æœƒè©±ä»¤ç‰Œ
2. **æˆæ¬Š**: æ¯å€‹æ“ä½œéƒ½éœ€è¦æœ‰æ•ˆçš„æœƒè©±ä»¤ç‰Œ
3. **è³‡æ–™å­˜å–**: é€šé Firebase Firestore é€²è¡Œè³‡æ–™æŒä¹…åŒ–
4. **æœƒè©±ç®¡ç†**: è‡ªå‹•è™•ç†æœƒè©±éæœŸå’Œæ¸…ç†

## ğŸ”’ å®‰å…¨æ€§

- **æœƒè©±ç®¡ç†**: ä½¿ç”¨ UUID ä½œç‚ºæœƒè©±ä»¤ç‰Œï¼Œè‡ªå‹•éæœŸæ©Ÿåˆ¶
- **æ¬Šé™æ§åˆ¶**: ç”¨æˆ¶åªèƒ½æŸ¥çœ‹è‡ªå·±çš„ç”³è¨´ (ç®¡ç†å“¡é™¤å¤–)
- **è³‡æ–™é©—è­‰**: æ‰€æœ‰è¼¸å…¥éƒ½ç¶“éé©—è­‰å’Œæ¸…ç†
- **Firebase å®‰å…¨è¦å‰‡**: é…åˆ Firestore å®‰å…¨è¦å‰‡é€²è¡Œå¤šå±¤ä¿è­·

## ğŸ› æ•…éšœæ’é™¤

### å¸¸è¦‹å•é¡Œ

#### Firebase åˆå§‹åŒ–å¤±æ•—
```
è§£æ±ºæ–¹æ¡ˆ:
1. æª¢æŸ¥ firebase-service-account.json æ˜¯å¦å­˜åœ¨
2. ç¢ºèª JSON æ ¼å¼æ­£ç¢º
3. é©—è­‰ Firebase å°ˆæ¡ˆè¨­ç½®
```

#### ç”¨æˆ¶ç™»å…¥å¤±æ•—
```
è§£æ±ºæ–¹æ¡ˆ:
1. ç¢ºèª Firebase Authentication å·²å•Ÿç”¨
2. æª¢æŸ¥ç”¨æˆ¶æ˜¯å¦å­˜åœ¨æ–¼ Firestore 'users' é›†åˆ
3. é©—è­‰ç”¨æˆ¶æ¬Šé™è¨­ç½®
```

#### æ¬Šé™è¢«æ‹’çµ•
```
è§£æ±ºæ–¹æ¡ˆ:
1. æª¢æŸ¥ Firestore å®‰å…¨è¦å‰‡
2. ç¢ºèªæœå‹™å¸³æˆ¶æ¬Šé™
3. é©—è­‰ç”¨æˆ¶è§’è‰²è¨­ç½®
```

### æ—¥èªŒå’Œèª¿è©¦

```bash
# å•Ÿç”¨è©³ç´°æ—¥èªŒ
export PYTHONPATH=.
python -m nthu_complaints_mcp.server --log-level DEBUG
```

## ğŸ“„ è¨±å¯è­‰

MIT License - è©³è¦‹ [LICENSE](LICENSE) æª”æ¡ˆ

## ğŸ¤ è²¢ç»

æ­¡è¿æäº¤ Issue å’Œ Pull Requestï¼

### é–‹ç™¼æµç¨‹

1. Fork å°ˆæ¡ˆ
2. å‰µå»ºåŠŸèƒ½åˆ†æ”¯ (`git checkout -b feature/amazing-feature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add amazing feature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/amazing-feature`)
5. é–‹å•Ÿ Pull Request

## ğŸ“ æ”¯æ´

- **Issues**: [GitHub Issues](https://github.com/nthu-complaints-system/mcp-server/issues)
- **æ–‡ä»¶**: [FastMCP å®˜æ–¹æ–‡ä»¶](https://github.com/jlowin/fastmcp)
- **Firebase**: [Firebase å®˜æ–¹æ–‡ä»¶](https://firebase.google.com/docs)

---

**æ³¨æ„**: é€™æ˜¯ä¸€å€‹é–‹ç™¼ç‰ˆæœ¬ï¼Œå»ºè­°åœ¨ç”Ÿç”¢ç’°å¢ƒä¸­ä½¿ç”¨å‰é€²è¡Œå……åˆ†æ¸¬è©¦ã€‚