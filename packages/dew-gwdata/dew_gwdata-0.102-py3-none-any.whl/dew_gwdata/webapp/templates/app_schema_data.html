{% extends "app_layout_schema.html" %}

{% block content %}

<p>
    <form>
        <div class="floating-block">
            <div class="invisible-floating-block">
                <p class="form">
                    <label for="owner">Owner: </label>
                    <br>
                    <input type="text" name="owner" value="{{ owner }}" />
                </p>
            </div>
            <div class="invisible-floating-block">
                <p class="form">
                    <label for="table_name">Table or view name: </label><br>
                    <input type="text" name="table_name" value="{{ table_name }}" />
                </p>
            </div>
            <div class="invisible-floating-block">
                <p class="form">
                    <label for="limit">Maximum number of records shown: </label>
                    <br>
                    <input type="number" name="limit" value={{ limit }} />
                </p>
            </div>
            <div class="invisible-floating-block">
                <p class="form">
                    <label for="filter_by">Filter by: </label>
                    <br>
                    <input type="text" name="filter_by" value="{{ filter_by }}"/>
                </p>
            </div>
            <div class="invisible-floating-block">
                <p class="form">
                    <label for="select">Select clause: </label>
                    <br>
                    <input type="text" name="select" value="{{ select }}" />
                </p>
            </div>
            <div class="invisible-floating-block">
                <p class="form">
                    <label for="where">Where clause: </label>
                    <br>
                    <input type="text" name="where" value="{{ where }}" />
                </p>
            </div>
            <div class="invisible-floating-block">
                <p class="form">
                    <label for="order_by">Order by clause: </label>
                    <br>
                    <input type="text" name="order_by" value="{{ order_by }}" />
                </p>
            </div>
            <div class="invisible-floating-block">
                <p class="form">
                    <label for="env">Environment: </label>
                    <br>
                    <input type="select" list="envs" name="env" value="{{ env }}" />
                    <datalist id="envs">
                        <option value="prod@pirsa"></option>
                        <option value="test@pirsa"></option>
                        <option value="dev@pirsa"></option>
                        <option value="prod@dew"></option>
                        <option value="test@dew"></option>
                        <option value="qa@dew"></option>
                    </datalist>
                </p>
            </div>
            <div class="invisible-floating-block">
                <p class="form">
                    
                    <input id="transpose" type="checkbox" name="transpose" value="Y" {% if transpose %}checked{% endif %}/>
                    <label for="transpose">Transpose</label>
                </p>
            </div>
        </div>
            
            <button type="submit" formaction="/app/schema_data">
                Search
            </button>
        </p>
    </form>    
</p>

{% if is_view %}
<p><a href="/app/schema_view?owner={{ owner }}&view_name={{ table_name }}">See SQL definition of view</a>.</p>
{% endif %}

<h2>SQL</h2>

{{ final_sql }}

<h2>Data</h2>
  
{{ data_html|safe }}

{% endblock %}