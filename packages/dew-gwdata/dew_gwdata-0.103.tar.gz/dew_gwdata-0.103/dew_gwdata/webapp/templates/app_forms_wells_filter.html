            {% if query %}
                <!-- Use { set xxx = query.xxx } to redefine, as local variables, anything used in the template below.
                This is because this is re-used between wells_* templates and well_* templates. The wells_*
                templates will have their query model variable (from dew_gwdata.webapp.query_models.wells)
                present, but the well_* templates will not. -->
                {% set filter_aq_mon = query.filter_aq_mon %}
                {% set filter_aquifer_code = query.filter_aquifer_code %}
                {% set filter_latest_tds_above = query.filter_latest_tds_above %}
                {% set filter_latest_tds_below = query.filter_latest_tds_below %}
                {% set filter_log_types = query.filter_log_types %}
                {% set filter_log_types_bool = query.filter_log_types_bool %}
            {% endif %}

            <!-- Now ensure that any numeric form fields are populated with zero by default to ensure the form
            submission does not fail if they are not filled and used. -->
            {% if not filter_latest_tds_above %}
                {% set filter_latest_tds_above = 0 %}
            {% endif %}
            {% if not filter_latest_tds_below %}
                {% set filter_latest_tds_below = 0 %}
            {% endif %}

            <b>Filter:</b>
            <p>This section refines the results from the terms in the "Search" section above. Each blue box here is combined with a Boolean AND, so you can use multiple
                types of filters if you want.
            </p>
            <div class="floating-block">
                <div class="floating-block">
                    <p class="form">
                        <label>Aquifer monitored code:</label>
                        <input type="text" name="filter_aq_mon" value="{{ filter_aq_mon }}" /> (Must match exactly)
                    </p>
                    <p class="form">
                        <label>Aquifer code:</label>
                        <input type="text" name="filter_aquifer_code" value="{{ filter_aquifer_code }}" /> ("Tbw" will also match "Qpcb+Tbw")
                        <br>You can include multiple codes separated by commas e.g. "JK1,K-c" will match "K-c+JK1" as well as "JK1+N".
                    </p>
                </div>
                <div class="floating-block">
                    <p class="form">
                        <label>Latest salinity above:</label>
                        <input type="number" name="filter_latest_tds_above" step=1 value="{{ filter_latest_tds_above }}"/> mg/L (use 0 to disable)
                    </p>
                    <p class="form">
                        <label>Latest salinity below:</label>
                        <input type="number" name="filter_latest_tds_below" step=1 value="{{ filter_latest_tds_below }}"/> mg/L (use 0 to disable)
                    </p>
                    <p class="form">
                        <label>Latest salinity measurement since:</label>
                        <input type="date" name="filter_latest_sal_date_since" value="{{ filter_latest_sal_date_since }}" /> 
                    </p>
                </div>
                <div class="floating-block">
                    <p class="form">
                        <label>Has geological log type:</label>
                        <input type="text" name="filter_log_types" value="{{ filter_log_types }}"/>
                        <br>Use D for drillers log, L for lith log, S for strat log, and H for hydrostrat log. 
                        <br>Combine them any way: "DL" or "D,L" will search for wells with drillers and/or lith logs.
                    </p>
                    <p class="form">
                        <label>Combine log types with:</label>
                        <input type="text" name="filter_log_types_bool" value="{{ filter_log_types_bool }}"/>
                        <br>Use "or" to search for wells with ANY of the log types,
                        <br>or "and" to search for wells with ALL of the log types.
                    </p>
                </div>
            </div>
            <br>