"use strict";(globalThis.webpackChunksuperset=globalThis.webpackChunksuperset||[]).push([[7412],{2171:(e,t,n)=>{n.r(t),n.d(t,{default:()=>W});var l=n(98023),r=n.n(l),i=n(2445),o=n(50290),a=n(29898),s=n(52966),u=n(74098),d=n(90924),c=n(65432),m=n(78878),h=n(17437),p=n(96540),f=n(61412),g=n(7142),v=n(68326),b=n(95018),x=n(8558),y=n(82384),w=n(70372),M=n(17102),S=n(2259),I=n(1984);const $=o.I4.span`
  margin: 0 ${({theme:e})=>3*e.sizeUnit}px;
  color: ${({theme:e})=>e.colorSplit};
  font-weight: ${({theme:e})=>e.fontWeightStrong};
  font-size: ${({theme:e})=>e.fontSize}px;
  align-content: center;
`,A=o.I4.div`
  display: flex;
  justify-content: space-between;
  width: 100%;

  .ant-input-number {
    min-width: 80px;
    position: relative;
  }
`,F=o.I4.div`
  ${({theme:e})=>`\n    margin: ${4*e.sizeUnit}px 0;\n    padding: 0 ${e.sizeUnit}px;\n  `}
`,C=o.I4.div`
  ${({theme:e})=>`\n    position: absolute;\n    top: -${6*e.sizeUnit}px;\n    right: 0px;\n    z-index: 100;\n    display: flex;\n    align-items: center;\n\n    .tooltip-icon {\n      margin-left: ${2*e.sizeUnit}px;\n    }\n  `}
`,N=o.I4.div`
  ${({theme:e})=>`\n    display: flex;\n    gap: ${4*e.sizeUnit}px;\n    width: 100%;\n    align-items: center;\n\n    .slider-wrapper {\n      display: flex;\n      align-items: center;\n      flex: 2;\n    }\n\n    .slider-container {\n      flex: 1;\n      min-width: 180px;\n    }\n\n    .inputs-container {\n      min-width: 160px;\n      max-width: 200px;\n    }\n  `}
`,Y=o.I4.div`
  ${({theme:e})=>`\n  border-radius: ${e.borderRadius}px;\n  transition: box-shadow ${e.motionDurationMid} ease-in-out;\n  &:focus {\n    box-shadow: 0 0 0 2px ${e.colorPrimary};\n  }\n  &:focus-visible {\n    outline: none;\n  }`}
`,E=(0,a.gV)(s.A.SMART_NUMBER),k=(e,t,n=!1)=>n&&null!==e||null!==e&&e===t?`x = ${E(e)}`:null!==e&&null!==t?`${E(e)} ≤ x ≤ ${E(t)}`:null!==e?`x ≥ ${E(e)}`:null!==t?`x ≤ ${E(t)}`:"",H=(e,t,n,l,i)=>{const[o,a]=e,s=(0,u.t)("Please provide a valid min or max value"),d=(0,u.t)("Min value cannot be greater than max value"),c=(0,u.t)("Numbers must be within %(min)s and %(max)s",{min:t,max:n});if(void 0!==i){const e=i===I.y.Minimum||i===I.y.Exact?o:a;return r()(e)?r()(e)&&(e<t||e>n)?{isValid:!1,errorMessage:c}:{isValid:!0,errorMessage:null}:{isValid:!1,errorMessage:s}}return l||null!==o||null!==a?l&&null===o&&null===a?{isValid:!1,errorMessage:s}:null!==o&&null!==a&&o>a?{isValid:!1,errorMessage:d}:null!==o&&o<t||null!==a&&a>n?{isValid:!1,errorMessage:c}:{isValid:!0,errorMessage:null}:{isValid:!0,errorMessage:null}};function W(e){const t=(0,o.DP)(),{data:n,formData:l,height:r,width:a,setDataMask:s,setFocusedFilter:W,unsetFocusedFilter:V,setHoveredFilter:z,unsetHoveredFilter:D,setFilterActive:T,filterState:R,inputRef:q,filterBarOrientation:O=f.QI.Vertical,isOverflowingFilterBar:U}=e,[B]=n,{min:L,max:j}=B,{groupby:P,enableSingleValue:Q,enableEmptyFilter:X,defaultValue:K}=l,J=(null==l?void 0:l.rangeDisplayMode)||w.l.SliderAndInput,_=Q===I.y.Exact,[G=""]=(0,d.A)(P).map(c.A),[Z,ee]=(0,p.useState)(R.value||K||[null,null]),[te,ne]=(0,p.useState)(null),le=(0,p.useMemo)((()=>{const[e,t]=Z;return Q===I.y.Minimum||Q===I.y.Exact?null!==e?e:L:Q===I.y.Maximum?null!==t?t:j:[null!==e?e:L,null!==t?t:j]}),[Z,L,j,Q]),re=(0,p.useCallback)((e=>{s({extraFormData:{},filterState:{value:null,label:"",validateStatus:"error",validateMessage:e||""}})}),[s]),ie=(0,p.useCallback)((e=>{const[t,n]=e;s({extraFormData:(0,S.SO)(G,t,n),filterState:{value:_?[t,t]:[t,n],label:k(t,n,_),validateStatus:void 0,validateMessage:""}})}),[s]);(0,p.useEffect)((()=>{if(void 0!==(null==B?void 0:B.min)||void 0!==(null==B?void 0:B.max))if("error"!==R.validateStatus){if(void 0===R.value&&!R.validateStatus)return ee([null,null]),void ie([null,null]);(0,m.A)(K,Z)?ie(K):R.value&&!R.validateStatus&&(ee(R.value),ie(R.value))}else if(ne(R.validateMessage),te!==R.validateMessage){const{isValid:e,errorMessage:t}=H(Z,L,j,X,Q);e?(ne(null),ie(Z)):(ne(t),re(t))}}),[JSON.stringify(R.value)]);const oe=(0,p.useMemo)((()=>{switch(Q){case I.y.Minimum:return(0,u.t)("Filters for values greater than or equal.");case I.y.Maximum:return(0,u.t)("Filters for values less than or equal.");case I.y.Exact:return(0,u.t)("Filters for values equal to this exact value.");default:return null}}),[Q]),ae=(0,p.useRef)(!1),se=e=>{ae.current=!!/^[0-9]$/.test(e.key)},ue=(0,p.useCallback)(((e,t)=>{if(void 0===(null==B?void 0:B.min)&&void 0===(null==B?void 0:B.max))return;let n=e;null!==e&&null===Z[t]&&(ae.current?(n=e,ae.current=!1):0===t&&1===e?n=L+1:0===t&&-1===e?n=L-1:1===t&&1===e?n=j+1:1===t&&-1===e&&(n=j-1));const l=0===t?[n,Z[1]]:[Z[0],n];ee(l);const{isValid:r,errorMessage:i}=H(l,L,j,X,Q);if(!r)return ne(i),void re(i);ne(null),ie(l)}),[L,j,X,Q,re,ie,Z]),de=(0,p.useCallback)((e=>{let t;if(void 0!==Q){const n="number"==typeof e?e:Array.isArray(e)&&e.length>0?e[0]:(L+j)/2;t=Q===I.y.Minimum?[n,null]:Q===I.y.Maximum?[null,n]:[n,n]}else{const n=Array.isArray(e)?e:[L,j],[l,r]=n.length>=2?[n[0],n[1]]:[L,j];t=[l,r]}ee(t),ne(null),ie(t)}),[L,j,Q,ie]),ce=(0,p.useCallback)((()=>{const e=(0,u.t)("Choose numbers between %(min)s and %(max)s",{min:L,max:j});return te?{message:te,status:"error"}:void 0!==Q&&oe?{message:oe,status:"help"}:{message:e,status:"help"}}),[te,L,j,Q,oe]),me=(0,p.useCallback)((()=>{const{message:e,status:t}=ce();return O===f.QI.Vertical?(0,i.Y)(M.Mo,{status:t,children:e}):null}),[ce,O]),he=(0,p.useCallback)((()=>{const{message:e,status:n}=ce();return(0,i.Y)(b.m,{title:e,placement:"top",children:(0,i.Y)(x.F.InfoCircleOutlined,{iconSize:"m",iconColor:"error"===n?t.colorError:t.colorIcon,className:"tooltip-icon"})})}),[ce]);(0,p.useEffect)((()=>{if(void 0!==Q)switch(Q){case I.y.Minimum:case I.y.Exact:null!==Z[1]&&ue(null,1);break;case I.y.Maximum:null!==Z[0]&&ue(null,0)}s({extraFormData:{},filterState:{value:null,label:""}})}),[Q]);const pe=()=>void 0!==Q?(0,i.Y)(F,{children:(0,i.Y)(v.A,{min:L,max:j,value:Array.isArray(le)?le[0]:le,onChange:de,tooltip:{formatter:e=>null!==e?E(e):""}})}):(0,i.Y)(F,{children:(0,i.Y)(v.A,{min:L,max:j,range:!0,value:Array.isArray(le)?le:[L,le],onChange:de,tooltip:{formatter:e=>null!==e?E(e):""}})}),fe=()=>(0,i.FD)(A,{tabIndex:-1,onFocus:W,onBlur:V,onMouseEnter:z,onMouseLeave:D,onMouseDown:()=>T(!0),onMouseUp:()=>T(!1),children:[(void 0===Q||Q===I.y.Minimum||Q===I.y.Exact)&&(0,i.Y)(g.A,{value:Z[0],onChange:e=>ue(e,0),onKeyDown:se,placeholder:`${L}`,style:{width:"100%"},status:R.validateStatus}),void 0===Q&&(0,i.Y)($,{children:"-"}),(void 0===Q||Q===I.y.Maximum)&&(0,i.Y)(g.A,{value:Z[1],onChange:e=>ue(e,1),onKeyDown:se,placeholder:`${j}`,style:{width:"100%"},status:R.validateStatus})]});return(0,i.Y)(M.j3,{height:r,width:a,children:Number.isNaN(Number(L))||Number.isNaN(Number(j))?(0,i.Y)("h4",{children:(0,u.t)("Chosen non-numeric column")}):(0,i.Y)(y.e,{"aria-labelledby":`filter-name-${l.nativeFilterId}`,children:O!==f.QI.Horizontal||U?(0,i.Y)(i.FK,{children:(0,i.FD)("div",{style:{position:"relative"},children:[U&&(0,i.Y)(C,{children:(0,i.Y)(he,{})}),(0,i.FD)(Y,{ref:q,tabIndex:-1,css:h.AH`
                    padding-top: 1px;
                    margin-top: -1px;
                  `,children:[(J===w.l.Slider||J===w.l.SliderAndInput)&&pe(),(J===w.l.Input||J===w.l.SliderAndInput)&&fe()]}),(0,i.Y)(me,{})]})}):(0,i.Y)(Y,{ref:q,tabIndex:-1,children:(0,i.FD)(N,{children:[(0,i.Y)(he,{}),(J===w.l.Slider||J===w.l.SliderAndInput)&&(0,i.Y)("div",{className:"slider-wrapper",children:(0,i.Y)("div",{className:"slider-container",children:pe()})}),(J===w.l.Input||J===w.l.SliderAndInput)&&(0,i.Y)("div",{className:"inputs-container",children:fe()})]})})})})}},2259:(e,t,n)=>{n.d(t,{SO:()=>a,Sg:()=>s,pA:()=>o});var l=n(7683),r=n(93590),i=n(52451);const o=(e,t,n=!1,l=!1)=>{const r={};return n?r.adhoc_filters=[{expressionType:i.A.Sql,clause:i.v.Where,sqlExpression:"1 = 0"}]:null!=t&&0!==t.length&&(r.filters=[{col:e,op:l?"NOT IN":"IN",val:t}]),r},a=(e,t,n)=>{const l=[];return null!=t&&t!==n&&l.push({col:e,op:">=",val:t}),null!=n&&n!==t&&l.push({col:e,op:"<=",val:n}),null!=n&&null!=t&&n===t&&l.push({col:e,op:"==",val:n}),l.length?{filters:l}:{}};function s({timeFormatter:e,numberFormatter:t}={}){return(n,i)=>{if(null==n)return r.mu;if("boolean"==typeof n)return n?r.PU:r.qC;if(i===l.s.Boolean)try{return JSON.parse(String(n).toLowerCase())?r.PU:r.qC}catch{return r.qC}return"string"==typeof n?n:"bigint"==typeof n?String(n):e&&i===l.s.Temporal?e(n):t&&"number"==typeof n&&i===l.s.Numeric?t(n):String(n)}}},13130:(e,t,n)=>{n.d(t,{A:()=>d});const l=e=>"object"==typeof e&&null!=e&&1===e.nodeType,r=(e,t)=>(!t||"hidden"!==e)&&"visible"!==e&&"clip"!==e,i=(e,t)=>{if(e.clientHeight<e.scrollHeight||e.clientWidth<e.scrollWidth){const n=getComputedStyle(e,null);return r(n.overflowY,t)||r(n.overflowX,t)||(e=>{const t=(e=>{if(!e.ownerDocument||!e.ownerDocument.defaultView)return null;try{return e.ownerDocument.defaultView.frameElement}catch(e){return null}})(e);return!!t&&(t.clientHeight<e.scrollHeight||t.clientWidth<e.scrollWidth)})(e)}return!1},o=(e,t,n,l,r,i,o,a)=>i<e&&o>t||i>e&&o<t?0:i<=e&&a<=n||o>=t&&a>=n?i-e-l:o>t&&a<n||i<e&&a>n?o-t+r:0,a=e=>{const t=e.parentElement;return null==t?e.getRootNode().host||null:t},s=(e,t)=>{var n,r,s,u;if("undefined"==typeof document)return[];const{scrollMode:d,block:c,inline:m,boundary:h,skipOverflowHiddenElements:p}=t,f="function"==typeof h?h:e=>e!==h;if(!l(e))throw new TypeError("Invalid target");const g=document.scrollingElement||document.documentElement,v=[];let b=e;for(;l(b)&&f(b);){if(b=a(b),b===g){v.push(b);break}null!=b&&b===document.body&&i(b)&&!i(document.documentElement)||null!=b&&i(b,p)&&v.push(b)}const x=null!=(r=null==(n=window.visualViewport)?void 0:n.width)?r:innerWidth,y=null!=(u=null==(s=window.visualViewport)?void 0:s.height)?u:innerHeight,{scrollX:w,scrollY:M}=window,{height:S,width:I,top:$,right:A,bottom:F,left:C}=e.getBoundingClientRect(),{top:N,right:Y,bottom:E,left:k}=(e=>{const t=window.getComputedStyle(e);return{top:parseFloat(t.scrollMarginTop)||0,right:parseFloat(t.scrollMarginRight)||0,bottom:parseFloat(t.scrollMarginBottom)||0,left:parseFloat(t.scrollMarginLeft)||0}})(e);let H="start"===c||"nearest"===c?$-N:"end"===c?F+E:$+S/2-N+E,W="center"===m?C+I/2-k+Y:"end"===m?A+Y:C-k;const V=[];for(let e=0;e<v.length;e++){const t=v[e],{height:n,width:l,top:r,right:a,bottom:s,left:u}=t.getBoundingClientRect();if("if-needed"===d&&$>=0&&C>=0&&F<=y&&A<=x&&(t===g&&!i(t)||$>=r&&F<=s&&C>=u&&A<=a))return V;const h=getComputedStyle(t),p=parseInt(h.borderLeftWidth,10),f=parseInt(h.borderTopWidth,10),b=parseInt(h.borderRightWidth,10),N=parseInt(h.borderBottomWidth,10);let Y=0,E=0;const k="offsetWidth"in t?t.offsetWidth-t.clientWidth-p-b:0,z="offsetHeight"in t?t.offsetHeight-t.clientHeight-f-N:0,D="offsetWidth"in t?0===t.offsetWidth?0:l/t.offsetWidth:0,T="offsetHeight"in t?0===t.offsetHeight?0:n/t.offsetHeight:0;if(g===t)Y="start"===c?H:"end"===c?H-y:"nearest"===c?o(M,M+y,y,f,N,M+H,M+H+S,S):H-y/2,E="start"===m?W:"center"===m?W-x/2:"end"===m?W-x:o(w,w+x,x,p,b,w+W,w+W+I,I),Y=Math.max(0,Y+M),E=Math.max(0,E+w);else{Y="start"===c?H-r-f:"end"===c?H-s+N+z:"nearest"===c?o(r,s,n,f,N+z,H,H+S,S):H-(r+n/2)+z/2,E="start"===m?W-u-p:"center"===m?W-(u+l/2)+k/2:"end"===m?W-a+b+k:o(u,a,l,p,b+k,W,W+I,I);const{scrollLeft:e,scrollTop:i}=t;Y=0===T?0:Math.max(0,Math.min(i+Y/T,t.scrollHeight-n/T+z)),E=0===D?0:Math.max(0,Math.min(e+E/D,t.scrollWidth-l/D+k)),H+=i-Y,W+=e-E}V.push({el:t,top:Y,left:E})}return V},u=e=>!1===e?{block:"end",inline:"nearest"}:(e=>e===Object(e)&&0!==Object.keys(e).length)(e)?e:{block:"start",inline:"nearest"};function d(e,t){if(!e.isConnected||!(e=>{let t=e;for(;t&&t.parentNode;){if(t.parentNode===document)return!0;t=t.parentNode instanceof ShadowRoot?t.parentNode.host:t.parentNode}return!1})(e))return;const n=(e=>{const t=window.getComputedStyle(e);return{top:parseFloat(t.scrollMarginTop)||0,right:parseFloat(t.scrollMarginRight)||0,bottom:parseFloat(t.scrollMarginBottom)||0,left:parseFloat(t.scrollMarginLeft)||0}})(e);if((e=>"object"==typeof e&&"function"==typeof e.behavior)(t))return t.behavior(s(e,t));const l="boolean"==typeof t||null==t?void 0:t.behavior;for(const{el:r,top:i,left:o}of s(e,u(t))){const e=i-n.top+n.bottom,t=o-n.left+n.right;r.scroll({top:e,left:t,behavior:l})}}},17102:(e,t,n)=>{n.d(t,{Mo:()=>a,YH:()=>i,j3:()=>o});var l=n(50290),r=n(82384);const i=0,o=l.I4.div`
  min-height: ${({height:e})=>e}px;
  width: ${({width:e})=>e===i?"100%":`${e}px`};
`,a=((0,l.I4)(r.e)`
  &.ant-row.ant-form-item {
    margin: 0;
  }
`,l.I4.div`
  color: ${({theme:e,status:t="error"})=>{if("help"===t)return e.colorTextSecondary;switch(t){case"error":default:return e.colorError;case"warning":return e.colorWarning;case"info":return e.colorInfo}}};
  text-align: ${({centerText:e})=>e?"center":"left"};
  width: 100%;
`)},52451:(e,t,n)=>{var l,r;n.d(t,{A:()=>l,v:()=>r}),function(e){e.Simple="SIMPLE",e.Sql="SQL"}(l||(l={})),function(e){e.Having="HAVING",e.Where="WHERE"}(r||(r={}))},68326:(e,t,n)=>{n.d(t,{A:()=>i});var l=n(2445),r=n(6531);function i(e){return(0,l.Y)(r.A,{...e})}},70372:(e,t,n)=>{var l;n.d(t,{l:()=>l}),function(e){e.Slider="slider",e.Input="input",e.SliderAndInput="slider-and-input"}(l||(l={}))},82384:(e,t,n)=>{n.d(t,{e:()=>r});var l=n(89467);const r=(0,n(50290).I4)(l.A.Item)`
  ${({theme:e})=>`\n    &.ant-form-item > .ant-row > .ant-form-item-label {\n      padding-bottom: ${e.paddingXXS}px;\n    }\n    .ant-form-item-label {\n      & > label {\n        font-size: ${e.fontSizeSM}px;\n        &.ant-form-item-required:not(.ant-form-item-required-mark-optional) {\n          &::before {\n            display: none;\n          }\n          &::after {\n            display: inline-block;\n            visibility: visible;\n            color: ${e.colorError};\n            font-size: ${e.fontSizeSM}px;\n            content: '*';\n          }\n        }\n      }\n    }\n    .ant-form-item-extra {\n      margin-top: ${e.sizeUnit}px;\n      font-size: ${e.fontSizeSM}px;\n    }\n  `}
`}}]);