"use strict";(globalThis.webpackChunksuperset=globalThis.webpackChunksuperset||[]).push([[9167],{4651:(e,t,n)=>{n.d(t,{Z:()=>o});var a=n(2445),i=n(677);const o=Object.assign((({padded:e,...t})=>(0,a.Y)(i.A,{...t,css:t=>({".ant-card-body":{padding:e?4*t.sizeUnit:t.sizeUnit}})})),{Meta:i.A.Meta})},13410:(e,t,n)=>{n.d(t,{E:()=>s});var a=n(2445),i=n(50290),o=n(52120);const s=(0,i.I4)((e=>(0,a.Y)(o.A,{...e})))`
  ${({theme:e,color:t,count:n})=>`\n    & > sup,\n    & > sup.ant-badge-count {\n      box-shadow: none;\n      ${void 0!==n?`background: ${t||e.colorPrimary};`:""}\n    }\n  `}
`},17942:(e,t,n)=>{n.d(t,{A:()=>i});var a=n(74098);function i(e){return!(!e||!Number.isNaN(Number(e)))&&(0,a.t)("is expected to be a number")}},18865:(e,t,n)=>{n.d(t,{A:()=>u});var a=n(2445),i=n(17437),o=n(50290),s=n(74098),r=n(95018),l=n(5250),d=n(23195),c=n(8558);const h=i.AH`
  &.anticon {
    font-size: unset;
    .anticon {
      line-height: unset;
      vertical-align: unset;
    }
  }
`,u=({name:e,label:t,description:n,validationErrors:u=[],renderTrigger:p=!1,rightNode:m,leftNode:b,onClick:g,hovered:f=!1,tooltipOnClick:y=()=>{},warning:v,danger:C})=>{const x=(0,o.DP)();return t?(0,a.FD)("div",{className:"ControlHeader",children:[(0,a.Y)("div",{className:"pull-left",children:(0,a.FD)(d.l,{css:e=>i.AH`
            margin-bottom: ${.5*e.sizeUnit}px;
            position: relative;
            font-size: ${e.fontSizeSM}px;
          `,htmlFor:e,children:[b&&(0,a.FD)("span",{children:[b," "]}),(0,a.Y)("span",{role:"button",tabIndex:0,onClick:g,style:{cursor:g?"pointer":""},children:t})," ",v&&(0,a.FD)("span",{children:[(0,a.Y)(r.m,{id:"error-tooltip",placement:"top",title:v,children:(0,a.Y)(c.F.WarningOutlined,{iconColor:x.colorWarning,css:i.AH`
                    vertical-align: baseline;
                  `,iconSize:"s"})})," "]}),C&&(0,a.FD)("span",{children:[(0,a.Y)(r.m,{id:"error-tooltip",placement:"top",title:C,children:(0,a.Y)(c.F.CloseCircleOutlined,{iconColor:x.colorErrorText,iconSize:"s"})})," "]}),(null==u?void 0:u.length)>0&&(0,a.FD)("span",{css:i.AH`
                cursor: pointer;
              `,children:[(0,a.Y)(r.m,{id:"error-tooltip",placement:"top",title:null==u?void 0:u.join(" "),children:(0,a.Y)(c.F.InfoCircleOutlined,{iconColor:x.colorErrorText})})," "]}),f?(0,a.FD)("span",{css:()=>i.AH`
          position: absolute;
          top: 50%;
          right: 0;
          padding-left: ${x.sizeUnit}px;
          transform: translate(100%, -50%);
          white-space: nowrap;
        `,children:[n&&(0,a.FD)("span",{children:[(0,a.Y)(r.m,{id:"description-tooltip",title:n,placement:"top",children:(0,a.Y)(c.F.InfoCircleOutlined,{css:h,onClick:y})})," "]}),p&&(0,a.FD)("span",{children:[(0,a.Y)(l.I,{label:(0,s.t)("bolt"),tooltip:(0,s.t)("Changing this control takes effect instantly"),placement:"top",type:"notice"})," "]})]}):null]})}),m&&(0,a.Y)("div",{className:"pull-right",children:m}),(0,a.Y)("div",{className:"clearfix"})]}):null}},21325:(e,t,n)=>{n.d(t,{Ay:()=>g,fn:()=>p,pX:()=>b});var a=n(2445),i=n(50290),o=n(17437),s=n(22395),r=n(8558);const l=({animated:e=!1,allowOverflow:t=!0,tabBarStyle:n,...r})=>{const l={paddingLeft:4*(0,i.DP)().sizeUnit,...n};return(0,a.Y)(s.A,{animated:e,...r,tabBarStyle:l,css:e=>o.AH`
        overflow: ${t?"visible":"hidden"};

        .ant-tabs-content-holder {
          overflow: ${t?"visible":"auto"};
        }
        .ant-tabs-tab {
          flex: 1 1 auto;

          .short-link-trigger.btn {
            padding: 0 ${e.sizeUnit}px;
            & > .fa.fa-link {
              top: 0;
            }
          }
        }
        .ant-tabs-tab-btn {
          display: flex;
          flex: 1 1 auto;
          align-items: center;
          justify-content: center;
          font-size: ${e.fontSizeSM}px;
          text-align: center;
          user-select: none;
          .required {
            margin-left: ${e.sizeUnit/2}px;
            color: ${e.colorError};
          }
          &:focus-visible {
            box-shadow: none;
          }
        }
      `})},d=(0,i.I4)(s.A.TabPane)``,c=Object.assign(l,{TabPane:d}),h=(0,i.I4)(l)`
  ${({theme:e})=>`\n    .ant-tabs-content-holder {\n      background: ${e.colorBgContainer};\n    }\n\n    & > .ant-tabs-nav {\n      margin-bottom: 0;\n    }\n\n    .ant-tabs-tab-remove {\n      padding-top: 0;\n      padding-bottom: 0;\n      height: ${6*e.sizeUnit}px;\n    }\n  `}
`,u=(0,i.I4)(r.F.CloseOutlined)`
  color: ${({theme:e})=>e.colorIcon};
`,p=Object.assign(h,{TabPane:d});p.defaultProps={type:"editable-card",animated:{inkBar:!0,tabPane:!1}},p.TabPane.defaultProps={closeIcon:(0,a.Y)(u,{iconSize:"s",role:"button",tabIndex:0})};const m=(0,i.I4)(p)`
  &.ant-tabs-card > .ant-tabs-nav .ant-tabs-tab {
    margin: 0 ${({theme:e})=>4*e.sizeUnit}px;
    padding: ${({theme:e})=>`${3*e.sizeUnit}px ${e.sizeUnit}px`};
    background: transparent;
    border: none;
  }

  &.ant-tabs-card > .ant-tabs-nav .ant-tabs-ink-bar {
    visibility: visible;
  }

  .ant-tabs-tab-btn {
    font-size: ${({theme:e})=>e.fontSize}px;
  }

  .ant-tabs-tab-remove {
    margin-left: 0;
    padding-right: 0;
  }

  .ant-tabs-nav-add {
    min-width: unset !important;
    background: transparent !important;
    border: none !important;
  }
`,b=Object.assign(m,{TabPane:d}),g=c},22197:(e,t,n)=>{n.d(t,{z:()=>b});var a=n(2445),i=n(50290),o=n(17437),s=n(74098),r=n(96540),l=n(46942),d=n.n(l),c=n(95018),h=n(54569),u=n(17355);const p=(0,i.I4)(h.T)`
  vertical-align: middle;
`,m=i.I4.span`
  &.editable-title {
    display: inline;
    &.editable-title--editing {
      width: 100%;
    }

    input,
    textarea {
      outline: none;
      background: transparent;
      box-shadow: none;
      cursor: initial;
      font-feature-settings:
        'liga' 0,
        'calt' 0;
      font-variant-ligatures: none;
      font-weight: bold;
    }

    input[type='text'],
    textarea {
      color: ${({theme:e})=>e.colorTextTertiary};
      border-radius: ${({theme:e})=>e.sizeUnit}px;
      font-size: ${({theme:e})=>e.fontSizeLG}px;
      padding: ${({theme:e})=>e.sizeUnit/2}px;
      min-height: 100px;
      width: 95%;
    }

    &.datasource-sql-expression {
      min-width: 315px;
      width: 100%;
    }
  }
`;function b({canEdit:e=!1,editing:t=!1,extraClasses:n,noPermitTooltip:i,onSaveTitle:l,showTooltip:h=!0,style:b,title:g="",defaultTitle:f="",placeholder:y="",certifiedBy:v,certificationDetails:C,renderLink:x,maxWidth:S,autoSize:_=!0,...A}){const[Y,w]=(0,r.useState)(t),[T,D]=(0,r.useState)(g),[E,z]=(0,r.useState)(g),[k,F]=(0,r.useState)(0),I=(0,r.useRef)(null);function L(){const t=T.trim();e&&(w(!1),t.length?(E!==t&&z(t),g!==t&&l(t)):D(E))}(0,r.useEffect)((()=>{var e;const{font:t}=window.getComputedStyle((null==(e=I.current)||null==(e=e.resizableTextArea)?void 0:e.textArea)||document.body),n=function(e,t="14px Arial"){const n=document.createElement("canvas").getContext("2d");return n?(n.font=t,n.measureText(e).width):0}(T||"",t),a="number"==typeof S?S:1/0;F(Math.min(n+20,a))}),[T]),(0,r.useEffect)((()=>{g!==T&&(z(T),D(g))}),[g]),(0,r.useEffect)((()=>{if(Y&&I.current){var e;const t=null==(e=I.current.resizableTextArea)?void 0:e.textArea;if(t){t.focus();const{length:e}=t.value;t.setSelectionRange(e,e),t.scrollTop=t.scrollHeight}}}),[Y]);let $=T;Y||T||($=f||g);let M=(0,a.Y)(u.A.TextArea,{size:"small",ref:I,value:$,className:g?void 0:"text-muted",onChange:function(t){e&&D(t.target.value)},onBlur:L,onClick:function(){var t;if(!e||Y)return;const n=null==(t=I.current)||null==(t=t.resizableTextArea)?void 0:t.textArea;if(n){n.focus();const{length:e}=n.value;n.setSelectionRange(e,e)}w(!0)},onKeyDown:function(e){["Backspace","Delete"," ","ArrowLeft","ArrowRight","ArrowUp","ArrowDown"].includes(e.key)&&e.stopPropagation(),"Enter"===e.key&&(e.preventDefault(),L())},onPressEnter:function(e){e.preventDefault(),L()},placeholder:y,variant:Y?"outlined":"borderless",autoSize:!!_&&{minRows:1,maxRows:3},css:e=>o.AH`
        && {
          width: ${k}px;
          min-width: ${10*e.sizeUnit}px;
          transition: auto;
        }
      `});return h&&!Y&&(M=(0,a.Y)(c.m,{id:"title-tooltip",placement:"topLeft",title:e?(0,s.t)("Click to edit"):i||(0,s.t)("You don't have the rights to alter this title."),children:M})),e||(M=x?x($||""):(0,a.Y)("span",{children:$})),(0,a.FD)(m,{className:d()("editable-title",n,e&&"editable-title--editable",Y&&"editable-title--editing"),style:b,editing:Y,canEdit:e,...A,children:[v&&(0,a.FD)(a.FK,{children:[(0,a.Y)(p,{certifiedBy:v,details:C,size:"xl"})," "]}),M]})}},28611:(e,t,n)=>{n.r(t),n.d(t,{default:()=>Ue});var a=n(17437),i=n(58561),o=n.n(i),s=n(96540),r=n(5556),l=n.n(r),d=n(61225),c=n(22750),h=n(1763),u=n(50290),p=n(74098),m=n(99106),b=n(79378),g=n(90924),f=n(40984),y=n(59744),v=n(98837),C=n(21325),x=n(35273),S=n(94083),_=n(3513),A=n(88843),Y=n(39438),w=n(75536),T=n(64457),D=n(22111),E=n(13410),z=n(2801),k=n(42566),F=n(54569),I=n(22197),L=n(27509),$=n(4651),M=n(49965),q=n(23195),O=n(92998),U=n(8558),R=n(36188),K=n(16370),P=n(88217),N=n(94185),Q=n(47152),H=n(89232);const B=(0,n(10992).A)({method:"POST",endpoint:"/api/v1/sqllab/execute"});function j(e){return{type:"SET_QUERY_IS_LOADING",payload:e}}var W=n(6411),G=n.n(W),V=n(54264),X=n(2445),J=n(43561),Z=n(5250),ee=n(18009),te=n(65729);function ne(e,t,n){return s.Children.map(e,(e=>{let a=e;return e&&e.type&&e.type.name===t.name&&(a=(0,s.cloneElement)(e,n(e))),a&&a.props&&a.props.children&&(a=(0,s.cloneElement)(a,{children:ne(a.props.children,t,n)})),a}))}var ae=n(95018),ie=n(82384);function oe({fieldKey:e,value:t,label:n,description:i=null,control:o,additionalControl:r,onChange:l=()=>{},compact:d=!1,inline:c,errorMessage:h}){const p=(0,s.useCallback)((t=>{l(e,t)}),[l,e]),m=(0,u.DP)(),b=!d&&i?i:void 0,g=d&&i?(0,X.Y)(ae.m,{css:a.AH`
          color: ${m.colorTextTertiary};
        `,id:"field-descr",placement:"right",title:i,children:(0,X.Y)(U.F.InfoCircleOutlined,{iconSize:"s",css:a.AH`
            margin-left: ${m.marginXXS}px;
          `,iconColor:m.colorTextTertiary})}):void 0,f=(0,s.cloneElement)(o,{value:t,onChange:p,label:(0,X.FD)(q.l,{children:[n||e,g]})});return(0,X.FD)("div",{css:r&&a.AH`
          position: relative;
        `,children:[r,(0,X.Y)(ie.e,{extra:b,css:!c&&a.AH`
            .ControlHeader {
              margin-bottom: ${m.marginXXS}px;
            }
          `,children:f}),h&&(0,X.Y)("div",{css:e=>({color:e.colorText,[c?"marginLeft":"marginTop"]:e.marginXXS}),children:h})]})}function se({children:e,onChange:t,item:n,title:i=null,compact:o=!1}){const r=(0,s.useCallback)(((e,a)=>{t({...n,[e]:a})}),[t,n]);return(0,X.FD)(te.l,{className:"CRUD",layout:"vertical",children:[i&&(0,X.FD)(k.o.Title,{level:5,css:a.AH`
            margin-top: 0.5em;
          `,children:[i," ",(0,X.Y)(R.c,{})]}),ne(e,oe,(e=>({onChange:r,value:n[e.props.fieldKey],compact:o})))]})}const re=u.I4.div`
  text-align: right;
  ${({theme:e})=>`margin-bottom: ${2*e.sizeUnit}px`}
`,le=u.I4.span`
  ${({theme:e})=>`\n    margin-top: ${3*e.sizeUnit}px;\n    margin-left: ${3*e.sizeUnit}px;\n    button>span>:first-of-type {\n      margin-right: 0;\n    }\n  `}
`;function de(e){const t=e.map((e=>({...e,id:e.id||(0,J.Ak)()}))),n={};return t.forEach((e=>{n[e.id]=e})),{collection:n,collectionArray:t}}class ce extends s.PureComponent{constructor(e){super(e);const{collection:t,collectionArray:n}=de(e.collection);this.state={expandedColumns:{},collection:t,collectionArray:n,sortColumn:"",sort:0},this.onAddItem=this.onAddItem.bind(this),this.renderExpandableSection=this.renderExpandableSection.bind(this),this.getLabel=this.getLabel.bind(this),this.onFieldsetChange=this.onFieldsetChange.bind(this),this.changeCollection=this.changeCollection.bind(this),this.handleTableChange=this.handleTableChange.bind(this),this.buildTableColumns=this.buildTableColumns.bind(this),this.toggleExpand=this.toggleExpand.bind(this)}UNSAFE_componentWillReceiveProps(e){if(e.collection!==this.props.collection){const{collection:t,collectionArray:n}=de(e.collection);this.setState((e=>({collection:t,collectionArray:n,expandedColumns:e.expandedColumns})))}}onCellChange(e,t,n){this.setState((a=>{const i={...a.collection,[e]:{...a.collection[e],[t]:n}},o=a.collectionArray.map((t=>t.id===e?i[e]:t));return this.props.onChange&&this.props.onChange(o),{collection:i,collectionArray:o}}))}onAddItem(){if(this.props.itemGenerator){let e=this.props.itemGenerator();const t=!0===e.expanded;e.id||(e={...e,id:(0,J.Ak)()}),delete e.expanded,this.setState((n=>{const a={...n.collection,[e.id]:e},i=t?{...n.expandedColumns,[e.id]:!0}:n.expandedColumns;return{collection:a,collectionArray:[e,...n.collectionArray],expandedColumns:i}}),(()=>{this.props.onChange&&this.props.onChange(this.state.collectionArray)}))}}onFieldsetChange(e){this.changeCollection({...this.state.collection,[e.id]:e})}getLabel(e){const{columnLabels:t}=this.props;let n=null!=t&&t[e]?t[e]:e;return n.startsWith("__")&&(n=""),n}getTooltip(e){const{columnLabelTooltips:t}=this.props;return null==t?void 0:t[e]}changeCollection(e){const t=function(e){return Object.keys(e).map((t=>e[t]))}(e);this.setState({collection:e,collectionArray:t}),this.props.onChange&&this.props.onChange(t)}deleteItem(e){const t={...this.state.collection};delete t[e],this.changeCollection(t)}toggleExpand(e){this.setState((t=>({expandedColumns:{...t.expandedColumns,[e]:!t.expandedColumns[e]}})))}handleTableChange(e,t,n){const a=Array.isArray(n)?n[0]:n;let i="",o=0;null!=a&&a.columnKey&&null!=a&&a.order&&(i=a.columnKey,o="ascend"===a.order?1:2);const{sortColumns:s}=this.props,r=i;if(null!=s&&s.includes(r)||0===o){let e=[...this.props.collection];if(0!==o){const t=(e,t)=>{if("string"==typeof e&&"string"==typeof t)return(e||"").localeCompare(t||"");if("number"==typeof e&&"number"==typeof t)return e-t;if("boolean"==typeof e&&"boolean"==typeof t)return e===t?0:e?1:-1;const n=String(null!=e?e:""),a=String(null!=t?t:"");return n.localeCompare(a)};e.sort(((e,n)=>t(e[r],n[r]))),2===o&&e.reverse()}else{const{collectionArray:t}=de(this.props.collection);e=t}this.setState({collectionArray:e,sortColumn:i,sort:o})}}renderExpandableSection(e){return ne(this.props.expandFieldset,se,(()=>({item:e,onChange:this.onFieldsetChange})))}renderCell(e,t){var n;const a=null==(n=this.props.itemRenderers)?void 0:n[t],i=e[t],o=this.onCellChange.bind(this,e.id,t);return a?a(i,o,this.getLabel(t),e):i}buildTableColumns(){const{tableColumns:e,allowDeletes:t,sortColumns:n=[]}=this.props,i=e.map((e=>{const t=this.getLabel(e),a=this.getTooltip(e),i=n.includes(e),o=this.state.sortColumn===e?1===this.state.sort?"ascend":2===this.state.sort?"descend":null:null;return{key:e,dataIndex:e,minWidth:100,title:(0,X.FD)(X.FK,{children:[t,a&&(0,X.FD)(X.FK,{children:[" ",(0,X.Y)(Z.I,{label:(0,p.t)("description"),tooltip:a,placement:"top"})]})]}),render:(t,n)=>this.renderCell(n,e),onCell:n=>{var a;const i=null==(a=this.props.itemCellProps)?void 0:a[e],o=n[e];return i?i(o,t,n):{}},sorter:i,sortOrder:o}}));return t&&i.push({key:"__actions",dataIndex:"__actions",sorter:!1,title:(0,X.Y)(X.FK,{}),onCell:()=>({}),sortOrder:null,minWidth:50,render:(e,t)=>(0,X.Y)("span",{className:"text-primary",css:e=>a.AH`
              display: flex;
              justify-content: center;
              color: ${e.colorTextTertiary};
            `,children:(0,X.Y)(U.F.DeleteOutlined,{"aria-label":"Delete item",className:"pointer",role:"button",tabIndex:0,onClick:()=>this.deleteItem(t.id),iconSize:"l",iconColor:"inherit"})})}),i}render(){const{stickyHeader:e,emptyMessage:t=(0,p.t)("No items"),expandFieldset:n}=this.props,i=this.buildTableColumns(),o=Object.keys(this.state.expandedColumns).filter((e=>this.state.expandedColumns[e])),s=n?{expandedRowRender:e=>this.renderExpandableSection(e),rowExpandable:()=>!0,expandedRowKeys:o,onExpand:(e,t)=>{this.toggleExpand(t.id)}}:void 0;return(0,X.FD)(X.FK,{children:[(0,X.Y)(re,{children:this.props.allowAddItem&&(0,X.Y)(le,{children:(0,X.FD)(P.$,{buttonSize:"small",buttonStyle:"secondary",onClick:this.onAddItem,children:[(0,X.Y)(U.F.PlusOutlined,{iconSize:"m"}),(0,p.t)("Add item")]})})}),(0,X.Y)(ee.Ay,{columns:i,data:this.state.collectionArray,rowKey:e=>String(e.id),sticky:e,pagination:!1,onChange:this.handleTableChange,locale:{emptyText:t},css:e&&a.AH`
              height: 350px;
              overflow: auto;
            `,expandable:s,size:ee.QS.Middle,tableLayout:"auto"})]})}}var he;const ue=(0,h.a)(),pe=u.I4.div`
  .change-warning {
    margin: 16px 10px 0;
    color: ${({theme:e})=>e.colorWarning};
  }

  .change-warning .bold {
    font-weight: ${({theme:e})=>e.fontWeightStrong};
  }

  .form-group.has-feedback > .help-block {
    margin-top: 8px;
  }

  .form-group.form-group-md {
    margin-bottom: 8px;
  }
`,me=u.I4.div`
  align-items: center;
  display: flex;

  svg {
    margin-right: ${({theme:e})=>e.sizeUnit}px;
  }
`,be=(0,u.I4)(C.Ay)`
  overflow: visible;
  .ant-tabs-content-holder {
    overflow: visible;
  }
`,ge=(0,u.I4)(E.E)`
  .ant-badge-count {
    line-height: ${({theme:e})=>4*e.sizeUnit}px;
    height: ${({theme:e})=>4*e.sizeUnit}px;
    margin-left: ${({theme:e})=>e.sizeUnit}px;
  }
`,fe=u.I4.div`
  font-size: ${({theme:e})=>e.fontSizeSM}px;
  display: flex;
  align-items: center;
  a {
    padding: 0 10px;
  }
`,ye=u.I4.div`
  text-align: right;
  ${({theme:e})=>`margin-bottom: ${2*e.sizeUnit}px`}
`,ve=u.I4.div`
  display: flex;
  align-items: center;
  span {
    margin-right: ${({theme:e})=>e.sizeUnit}px;
  }
`,Ce=u.I4.div`
  .table > tbody > tr > td {
    vertical-align: middle;
  }

  .ant-tag {
    margin-top: ${({theme:e})=>e.sizeUnit}px;
  }
`,xe=u.I4.span`
  ${({theme:e})=>`\n    margin-top: ${3*e.sizeUnit}px;\n    margin-left: ${3*e.sizeUnit}px;\n    button>span>:first-of-type {\n      margin-right: 0;\n    }\n  `}
`,Se=(e,t)=>(0,X.Y)(_.A,{value:e,onChange:t}),_e=[{value:"STRING",label:(0,p.t)("STRING")},{value:"NUMERIC",label:(0,p.t)("NUMERIC")},{value:"DATETIME",label:(0,p.t)("DATETIME")},{value:"BOOLEAN",label:(0,p.t)("BOOLEAN")}],Ae="SOURCE",Ye=[{key:"physical",label:(0,p.t)("Physical (table or view)")},{key:"virtual",label:(0,p.t)("Virtual (SQL)")}],we={};Ye.forEach((e=>{we[e.key]=e}));var Te={name:"s5xdrg",styles:"display:flex;align-items:center"};function De({title:e,collection:t}){return(0,X.FD)("div",{css:Te,children:[e," ",(0,X.Y)(ge,{count:t?t.length:0,showZero:!0})]})}function Ee({columns:e,datasource:t,onColumnsChange:n,onDatasourceChange:a,editableColumnName:i,showExpression:o,allowAddItem:s,allowEditDataType:r,itemGenerator:l,columnLabelTooltips:d}){return(0,X.Y)(ce,{tableColumns:(0,m.G7)(m.TO.EnableAdvancedDataTypes)?["column_name","advanced_data_type","type","is_dttm","main_dttm_col","filterable","groupby"]:["column_name","type","is_dttm","main_dttm_col","filterable","groupby"],sortColumns:(0,m.G7)(m.TO.EnableAdvancedDataTypes)?["column_name","advanced_data_type","type","is_dttm","main_dttm_col","filterable","groupby"]:["column_name","type","is_dttm","main_dttm_col","filterable","groupby"],allowDeletes:!0,allowAddItem:s,itemGenerator:l,collection:e,columnLabelTooltips:d,stickyHeader:!0,expandFieldset:(0,X.Y)(ke,{children:(0,X.FD)(se,{compact:!0,children:[o&&(0,X.Y)(oe,{fieldKey:"expression",label:(0,p.t)("SQL expression"),control:(0,X.Y)(Y.A,{language:"markdown",offerEditInModal:!1,resize:"vertical"})}),(0,X.Y)(oe,{fieldKey:"verbose_name",label:(0,p.t)("Label"),control:(0,X.Y)(A.A,{controlId:"verbose_name",placeholder:(0,p.t)("Label")})}),(0,X.Y)(oe,{fieldKey:"description",label:(0,p.t)("Description"),control:(0,X.Y)(A.A,{controlId:"description",placeholder:(0,p.t)("Description")})}),r&&(0,X.Y)(oe,{fieldKey:"type",label:(0,p.t)("Data type"),control:(0,X.Y)(z.A,{ariaLabel:(0,p.t)("Data type"),options:_e,name:"type",allowNewOptions:!0,allowClear:!0})}),(0,m.G7)(m.TO.EnableAdvancedDataTypes)?(0,X.Y)(oe,{fieldKey:"advanced_data_type",label:(0,p.t)("Advanced data type"),control:(0,X.Y)(A.A,{controlId:"advanced_data_type",placeholder:(0,p.t)("Advanced Data type")})}):(0,X.Y)(X.FK,{}),(0,X.Y)(oe,{fieldKey:"python_date_format",label:(0,p.t)("Datetime format"),description:(0,X.FD)("div",{children:[(0,p.t)("The pattern of timestamp format. For strings use "),(0,X.Y)(k.o.Link,{href:"https://docs.python.org/2/library/datetime.html#strftime-strptime-behavior",children:(0,p.t)("Python datetime string pattern")}),(0,p.t)(" expression which needs to adhere to the "),(0,X.Y)(k.o.Link,{href:"https://en.wikipedia.org/wiki/ISO_8601",children:(0,p.t)("ISO 8601")}),(0,p.t)(" standard to ensure that the lexicographical ordering\n                      coincides with the chronological ordering. If the\n                      timestamp format does not adhere to the ISO 8601 standard\n                      you will need to define an expression and type for\n                      transforming the string into a date or timestamp. Note\n                      currently time zones are not supported. If time is stored\n                      in epoch format, put `epoch_s` or `epoch_ms`. If no pattern\n                      is specified we fall back to using the optional defaults on a per\n                      database/column name level via the extra parameter.")]}),control:(0,X.Y)(A.A,{controlId:"python_date_format",placeholder:"%Y-%m-%d"})}),(0,X.Y)(oe,{fieldKey:"certified_by",label:(0,p.t)("Certified By"),description:(0,p.t)("Person or group that has certified this metric"),control:(0,X.Y)(A.A,{controlId:"certified",placeholder:(0,p.t)("Certified by")})}),(0,X.Y)(oe,{fieldKey:"certification_details",label:(0,p.t)("Certification details"),description:(0,p.t)("Details of the certification"),control:(0,X.Y)(A.A,{controlId:"certificationDetails",placeholder:(0,p.t)("Certification details")})})]})}),columnLabels:(0,m.G7)(m.TO.EnableAdvancedDataTypes)?{column_name:(0,p.t)("Column"),advanced_data_type:(0,p.t)("Advanced data type"),type:(0,p.t)("Data type"),groupby:(0,p.t)("Is dimension"),is_dttm:(0,p.t)("Is temporal"),main_dttm_col:(0,p.t)("Default datetime"),filterable:(0,p.t)("Is filterable")}:{column_name:(0,p.t)("Column"),type:(0,p.t)("Data type"),groupby:(0,p.t)("Is dimension"),is_dttm:(0,p.t)("Is temporal"),main_dttm_col:(0,p.t)("Default datetime"),filterable:(0,p.t)("Is filterable")},onChange:n,itemRenderers:(0,m.G7)(m.TO.EnableAdvancedDataTypes)?{column_name:(e,t,n,a)=>i?(0,X.FD)(ve,{children:[a.is_certified&&(0,X.Y)(F.T,{certifiedBy:a.certified_by,details:a.certification_details}),(0,X.Y)(I.z,{canEdit:!0,title:e,onSaveTitle:t})]}):(0,X.FD)(ve,{children:[a.is_certified&&(0,X.Y)(F.T,{certifiedBy:a.certified_by,details:a.certification_details}),e]}),main_dttm_col:(e,n,i,o)=>{const s=t.main_dttm_col===o.column_name,r=!(null!=o&&o.is_dttm);return(0,X.Y)(c.s,{"aria-label":(0,p.t)("Set %s as default datetime column",o.column_name),checked:s,disabled:r,onChange:()=>a({...t,main_dttm_col:o.column_name})})},type:e=>e?(0,X.Y)(L.JU,{children:e}):null,advanced_data_type:e=>(0,X.Y)(L.JU,{onChange:n,children:e}),is_dttm:Se,filterable:Se,groupby:Se}:{column_name:(e,t,n,a)=>i?(0,X.FD)(ve,{children:[a.is_certified&&(0,X.Y)(F.T,{certifiedBy:a.certified_by,details:a.certification_details}),(0,X.Y)(A.A,{value:e,onChange:t})]}):(0,X.FD)(ve,{children:[a.is_certified&&(0,X.Y)(F.T,{certifiedBy:a.certified_by,details:a.certification_details}),e]}),main_dttm_col:(e,n,i,o)=>{const s=t.main_dttm_col===o.column_name,r=!(null!=o&&o.is_dttm);return(0,X.Y)(c.s,{"aria-label":(0,p.t)("Set %s as default datetime column",o.column_name),checked:s,disabled:r,onChange:()=>a({...t,main_dttm_col:o.column_name})})},type:e=>e?(0,X.Y)(L.JU,{children:e}):null,is_dttm:Se,filterable:Se,groupby:Se}})}function ze({label:e,formElement:t}){return(0,X.FD)("div",{children:[(0,X.Y)("div",{children:(0,X.Y)("strong",{children:e})}),(0,X.Y)("div",{children:t})]})}function ke({children:e}){return(0,X.Y)($.Z,{padded:!0,style:{backgroundColor:u.vP.theme.colorBgLayout},children:e})}De.propTypes={title:l().string,collection:l().array},Ee.propTypes={columns:l().array.isRequired,datasource:l().object.isRequired,onColumnsChange:l().func.isRequired,onDatasourceChange:l().func.isRequired,editableColumnName:l().bool,showExpression:l().bool,allowAddItem:l().bool,allowEditDataType:l().bool,itemGenerator:l().func},Ee.defaultProps={editableColumnName:!1,showExpression:!1,allowAddItem:!1,allowEditDataType:!1,itemGenerator:()=>({column_name:(0,p.t)("<new column>"),filterable:!0,groupby:!0})},ze.propTypes={label:l().string,formElement:l().node},ke.propTypes={children:l().node};const Fe={datasource:l().object.isRequired,onChange:l().func,addSuccessToast:l().func.isRequired,addDangerToast:l().func.isRequired,setIsEditing:l().func};function Ie({datasource:e,onChange:t}){const n=(0,s.useCallback)(((e="",t,n)=>{const a=o().encode({filter:e,page:t,page_size:n});return b.A.get({endpoint:`/api/v1/dataset/related/owners?q=${a}`}).then((e=>({data:e.json.result.filter((e=>e.extra.active)).map((e=>({value:e.value,label:e.text}))),totalCount:e.json.count})))}),[]);return(0,X.Y)(M.A,{ariaLabel:(0,p.t)("Select owners"),mode:"multiple",name:"owners",value:e.owners,options:n,onChange:t,header:(0,X.Y)(q.l,{children:(0,p.t)("Owners")}),allowClear:!0})}const Le=null!=(he=ue.get("sqleditor.extension.resultTable"))?he:H.TR;var $e={name:"hkh81z",styles:"margin-top:8px"},Me={name:"hkh81z",styles:"margin-top:8px"};class qe extends s.PureComponent{constructor(e){var t;super(e),this.renderSqlEditorOverlay=()=>(0,X.Y)("div",{css:e=>a.AH`
        position: absolute;
        background: ${e.colorBgLayout};
        align-items: center;
        display: flex;
        height: 100%;
        width: 100%;
        justify-content: center;
      `,children:(0,X.FD)("div",{children:[(0,X.Y)(O.R,{position:"inline-centered"}),(0,X.Y)("span",{css:e=>a.AH`
            display: block;
            margin: ${4*e.sizeUnit}px auto;
            width: fit-content;
            color: ${e.colorText};
          `,children:(0,p.t)("We are working on your query")})]})}),this.renderSqlErrorMessage=()=>{var e;return(0,X.FD)("span",{css:e=>a.AH`
        font-size: ${e.fontSizeSM}px;
        color: ${e.colorErrorText};
      `,children:[(null==(e=this.props.database)?void 0:e.error)&&(0,p.t)("Error executing query. "),this.renderOpenInSqlLabLink(!0),(0,p.t)(" to check for details.")]})},this.state={datasource:{...e.datasource,owners:e.datasource.owners.map((e=>({value:e.value||e.id,label:e.label||`${e.first_name} ${e.last_name}`}))),metrics:null==(t=e.datasource.metrics)?void 0:t.map((e=>{const{certified_by:t,certification_details:n}=e,{certification:{details:a,certified_by:i}={},warning_markdown:o}=JSON.parse(e.extra||"{}")||{};return{...e,certification_details:n||a,warning_markdown:o||"",certified_by:i||t}}))},errors:[],isSqla:"table"===e.datasource.datasource_type||"table"===e.datasource.type,isEditMode:!1,databaseColumns:e.datasource.columns.filter((e=>!e.expression)),calculatedColumns:e.datasource.columns.filter((e=>!!e.expression)),metadataLoading:!1,activeTabKey:Ae,datasourceType:e.datasource.sql?we.virtual.key:we.physical.key},this.onChange=this.onChange.bind(this),this.onChangeEditMode=this.onChangeEditMode.bind(this),this.onDatasourcePropChange=this.onDatasourcePropChange.bind(this),this.onDatasourceChange=this.onDatasourceChange.bind(this),this.tableChangeAndSyncMetadata=this.tableChangeAndSyncMetadata.bind(this),this.syncMetadata=this.syncMetadata.bind(this),this.setColumns=this.setColumns.bind(this),this.validateAndChange=this.validateAndChange.bind(this),this.handleTabSelect=this.handleTabSelect.bind(this),this.formatSql=this.formatSql.bind(this),this.currencies=(0,g.A)(e.currencies).map((e=>({value:e,label:`${(0,f.Q)({symbol:e})} (${e})`})))}onChange(){const{datasourceType:e,datasource:t}=this.state,n=e===we.physical.key?"":t.sql,a={...this.state.datasource,sql:n,columns:[...this.state.databaseColumns,...this.state.calculatedColumns]};this.props.onChange(a,this.state.errors)}onChangeEditMode(){this.props.setIsEditing(!this.state.isEditMode),this.setState((e=>({isEditMode:!e.isEditMode})))}onDatasourceChange(e,t=this.validateAndChange){this.setState({datasource:e},t)}onDatasourcePropChange(e,t){if(void 0===t)return;const n={...this.state.datasource,[e]:t};this.setState((n=>({datasource:{...n.datasource,[e]:t}})),"table_name"===e?this.onDatasourceChange(n,this.tableChangeAndSyncMetadata):this.onDatasourceChange(n,this.validateAndChange))}onDatasourceTypeChange(e){this.setState({datasourceType:e},this.onChange)}setColumns(e){this.setState(e,this.validateAndChange)}validateAndChange(){this.validate(this.onChange)}async onQueryRun(){this.props.runQuery({client_id:this.props.clientId,database_id:this.state.datasource.database.id,json:!0,runAsync:!1,catalog:this.state.datasource.catalog,schema:this.state.datasource.schema,sql:this.state.datasource.sql,tmp_table_name:"",select_as_cta:!1,ctas_method:"TABLE",queryLimit:25,expand_data:!0})}async onQueryFormat(){const{datasource:e}=this.state;if(e.sql&&this.state.isEditMode)try{const t=await this.props.formatQuery(e.sql);this.onDatasourcePropChange("sql",t.json.result),this.props.addSuccessToast((0,p.t)("SQL was formatted"))}catch(e){const{error:t,statusText:n}=await(0,y.h4)(e);this.props.addDangerToast(t||n||(0,p.t)("An error occurred while formatting SQL"))}}getSQLLabUrl(){return`/sqllab/?${new URLSearchParams({dbid:this.state.datasource.database.id,sql:this.state.datasource.sql,name:this.state.datasource.datasource_name,schema:this.state.datasource.schema,autorun:!0,isDataset:!0}).toString()}`}openOnSqlLab(){window.open(this.getSQLLabUrl(),"_blank","noopener,noreferrer")}tableChangeAndSyncMetadata(){this.validate((()=>{this.syncMetadata(),this.onChange()}))}async formatSql(){const{datasource:e}=this.state;if(e.sql)try{const t=await b.A.post({endpoint:"/api/v1/sql/format",body:JSON.stringify({sql:e.sql}),headers:{"Content-Type":"application/json"}});this.onDatasourcePropChange("sql",t.json.result),this.props.addSuccessToast((0,p.t)("SQL was formatted"))}catch(e){const{error:t,statusText:n}=await(0,y.h4)(e);this.props.addDangerToast(t||n||(0,p.t)("An error occurred while formatting SQL"))}}async syncMetadata(){const{datasource:e}=this.state;this.setState({metadataLoading:!0});try{const t=await async function(e){var t,n;const a={datasource_type:e.type||e.datasource_type,database_name:(null==(t=e.database)?void 0:t.database_name)||(null==(n=e.database)?void 0:n.name),catalog_name:e.catalog,schema_name:e.schema,table_name:e.table_name,normalize_columns:e.normalize_columns,always_filter_main_dttm:e.always_filter_main_dttm};Object.entries(a).forEach((([e,t])=>{void 0===t&&(a[e]=null)}));const i=`/datasource/external_metadata_by_name/?q=${o().encode_uri(a)}`,{json:s}=await b.A.get({endpoint:i});return s}(e),n=function(e,t,n){const a=t.map((e=>e.column_name)),i=e.reduce(((e,t)=>(e[t.column_name]=t,e)),{}),o={added:[],modified:[],removed:e.filter((e=>!(e.expression||a.includes(e.column_name)))).map((e=>e.column_name)),finalColumns:[]};return t.forEach((e=>{const t=i[e.column_name];t?t.type!==e.type||t.is_dttm!==e.is_dttm?(o.finalColumns.push({...t,type:e.type,is_dttm:t.is_dttm||e.is_dttm}),o.modified.push(e.column_name)):o.finalColumns.push(t):(o.finalColumns.push({id:(0,J.Ak)(),column_name:e.column_name,type:e.type,groupby:!0,filterable:!0,is_dttm:e.is_dttm}),o.added.push(e.column_name))})),e.filter((e=>e.expression)).forEach((e=>{o.finalColumns.push(e)})),o.modified.length&&n((0,p.tn)("Modified 1 column in the virtual dataset","Modified %s columns in the virtual dataset",o.modified.length,o.modified.length)),o.removed.length&&n((0,p.tn)("Removed 1 column from the virtual dataset","Removed %s columns from the virtual dataset",o.removed.length,o.removed.length)),o.added.length&&n((0,p.tn)("Added 1 new column to the virtual dataset","Added %s new columns to the virtual dataset",o.added.length,o.added.length)),o}(e.columns,t,this.props.addSuccessToast);this.setColumns({databaseColumns:n.finalColumns.filter((e=>!e.expression))}),this.props.addSuccessToast((0,p.t)("Metadata has been synced")),this.setState({metadataLoading:!1})}catch(e){const{error:t,statusText:n}=await(0,y.h4)(e);this.props.addDangerToast(t||n||(0,p.t)("An error has occurred")),this.setState({metadataLoading:!1})}}findDuplicates(e,t){const n={},a=[];return e.forEach((e=>{const i=t(e);i in n?a.push(i):n[i]=null})),a}validate(e){let t,n=[];const{datasource:a}=this.state;t=this.findDuplicates(a.columns,(e=>e.column_name)),n=n.concat(t.map((e=>(0,p.t)("Column name [%s] is duplicated",e)))),t=this.findDuplicates(a.metrics,(e=>e.metric_name)),n=n.concat(t.map((e=>(0,p.t)("Metric name [%s] is duplicated",e))));const i=this.state.calculatedColumns.filter((e=>!e.expression&&!e.json));n=n.concat(i.map((e=>(0,p.t)("Calculated column [%s] requires an expression",e.column_name))));try{var o;null==(o=this.state.datasource.metrics)||o.forEach((e=>{var t;return(null==(t=e.currency)?void 0:t.symbol)&&new Intl.NumberFormat("en-US",{style:"currency",currency:e.currency.symbol})}))}catch{n=n.concat([(0,p.t)("Invalid currency code in saved metrics")])}this.setState({errors:n},e)}handleTabSelect(e){this.setState({activeTabKey:e})}sortMetrics(e){return e.sort((({id:e},{id:t})=>t-e))}renderSettingsFieldset(){const{datasource:e}=this.state;return(0,X.FD)(se,{title:(0,p.t)("Basic"),item:e,onChange:this.onDatasourceChange,children:[(0,X.Y)(oe,{fieldKey:"description",label:(0,p.t)("Description"),control:(0,X.Y)(Y.A,{language:"markdown",offerEditInModal:!1,resize:"vertical"})}),(0,X.Y)(oe,{fieldKey:"default_endpoint",label:(0,p.t)("Default URL"),description:(0,p.t)("Default URL to redirect to when accessing from the dataset list page.\n            Accepts relative URLs such as <span style=„white-space: nowrap;”>/superset/dashboard/{id}/</span>"),control:(0,X.Y)(A.A,{controlId:"default_endpoint"})}),(0,X.Y)(oe,{inline:!0,fieldKey:"filter_select_enabled",label:(0,p.t)("Autocomplete filters"),description:(0,p.t)("Whether to populate autocomplete filters options"),control:(0,X.Y)(_.A,{})}),this.state.isSqla&&(0,X.Y)(oe,{fieldKey:"fetch_values_predicate",label:(0,p.t)("Autocomplete query predicate"),description:(0,p.t)('When using "Autocomplete filters", this can be used to improve performance of the query fetching the values. Use this option to apply a predicate (WHERE clause) to the query selecting the distinct values from the table. Typically the intent would be to limit the scan by applying a relative time filter on a partitioned or indexed time-related field.'),control:(0,X.Y)(Y.A,{language:"sql",controlId:"fetch_values_predicate",minLines:5,resize:"vertical"})}),this.state.isSqla&&(0,X.Y)(oe,{fieldKey:"extra",label:(0,p.t)("Extra"),description:(0,p.t)('Extra data to specify table metadata. Currently supports metadata of the format: `{ "certification": { "certified_by": "Data Platform Team", "details": "This table is the source of truth." }, "warning_markdown": "This is a warning." }`.'),control:(0,X.Y)(Y.A,{controlId:"extra",language:"json",offerEditInModal:!1,resize:"vertical"})}),(0,X.Y)(Ie,{datasource:e,onChange:t=>{this.onDatasourceChange({...e,owners:t})}})]})}renderAdvancedFieldset(){const{datasource:e}=this.state;return(0,X.FD)(se,{title:(0,p.t)("Advanced"),item:e,onChange:this.onDatasourceChange,children:[(0,X.Y)(oe,{fieldKey:"cache_timeout",label:(0,p.t)("Cache timeout"),description:(0,p.t)("The duration of time in seconds before the cache is invalidated. Set to -1 to bypass the cache."),control:(0,X.Y)(A.A,{controlId:"cache_timeout"})}),(0,X.Y)(oe,{fieldKey:"offset",label:(0,p.t)("Hours offset"),control:(0,X.Y)(A.A,{controlId:"offset"}),description:(0,p.t)("The number of hours, negative or positive, to shift the time column. This can be used to move UTC time to local time.")}),this.state.isSqla&&(0,X.Y)(oe,{fieldKey:"template_params",label:(0,p.t)("Template parameters"),description:(0,p.t)("A set of parameters that become available in the query using Jinja templating syntax"),control:(0,X.Y)(A.A,{controlId:"template_params"})}),(0,X.Y)(oe,{inline:!0,fieldKey:"normalize_columns",label:(0,p.t)("Normalize column names"),description:(0,p.t)("Allow column names to be changed to case insensitive format, if supported (e.g. Oracle, Snowflake)."),control:(0,X.Y)(_.A,{controlId:"normalize_columns"})}),(0,X.Y)(oe,{inline:!0,fieldKey:"always_filter_main_dttm",label:(0,p.t)("Always filter main datetime column"),description:(0,p.t)("When the secondary temporal columns are filtered, apply the same filter to the main datetime column."),control:(0,X.Y)(_.A,{controlId:"always_filter_main_dttm"})})]})}renderSpatialTab(){const{datasource:e}=this.state,{spatials:t,all_cols:n}=e;return{key:"SPATIAL",label:(0,X.Y)(De,{collection:t,title:(0,p.t)("Spatial")}),children:(0,X.Y)(ce,{tableColumns:["name","config"],onChange:this.onDatasourcePropChange.bind(this,"spatials"),itemGenerator:()=>({name:(0,p.t)("<new spatial>"),type:(0,p.t)("<no type>"),config:null}),collection:t,allowDeletes:!0,itemRenderers:{name:(e,t)=>(0,X.Y)(I.z,{canEdit:!0,title:e,onSaveTitle:t}),config:(e,t)=>(0,X.Y)(w.A,{value:e,onChange:t,choices:n})}})}}renderOpenInSqlLabLink(e=!1){return(0,X.Y)("a",{href:this.getSQLLabUrl(),target:"_blank",rel:"noopener noreferrer",css:t=>a.AH`
          color: ${e?t.colorErrorText:t.colorText};
          font-size: ${t.fontSizeSM}px;
          text-decoration: underline;
        `,children:(0,p.t)("Open in SQL lab")})}renderSourceFieldset(){var e,t,n,i,o,s,r,l,d,h,u,m;const{datasource:b}=this.state;return(0,X.FD)("div",{children:[(0,X.FD)(fe,{children:[(0,X.Y)("span",{css:e=>a.AH`
              color: ${e.colorTextTertiary};
            `,role:"button",tabIndex:0,onClick:this.onChangeEditMode,children:this.state.isEditMode?(0,X.Y)(U.F.UnlockOutlined,{iconSize:"xl",css:e=>a.AH`
                  margin: auto ${e.sizeUnit}px auto 0;
                `}):(0,X.Y)(U.F.LockOutlined,{iconSize:"xl",css:e=>({margin:`auto ${e.sizeUnit}px auto 0`})})}),!this.state.isEditMode&&(0,X.Y)("div",{children:(0,p.t)("Click the lock to make changes.")}),this.state.isEditMode&&(0,X.Y)("div",{children:(0,p.t)("Click the lock to prevent further changes.")})]}),(0,X.Y)("div",{css:e=>a.AH`
            margin-top: ${3*e.sizeUnit}px;
          `,children:Ye.map((e=>(0,X.Y)(c.s,{value:e.key,inline:!0,onChange:this.onDatasourceTypeChange.bind(this,e.key),checked:this.state.datasourceType===e.key,disabled:!this.state.isEditMode,children:e.label},e.key)))}),(0,X.Y)(R.c,{}),(0,X.FD)(se,{item:b,onChange:this.onDatasourceChange,compact:!0,children:[this.state.datasourceType===we.virtual.key&&(0,X.Y)("div",{children:this.state.isSqla&&(0,X.FD)(X.FK,{children:[(0,X.FD)(K.A,{xs:24,md:12,children:[(0,X.Y)(oe,{fieldKey:"databaseSelector",label:(0,p.t)("Virtual"),control:(0,X.Y)("div",{css:$e,children:(0,X.Y)(V.R,{db:null==b?void 0:b.database,catalog:b.catalog,schema:b.schema,onCatalogChange:e=>this.state.isEditMode&&this.onDatasourcePropChange("catalog",e),onSchemaChange:e=>this.state.isEditMode&&this.onDatasourcePropChange("schema",e),onDbChange:e=>this.state.isEditMode&&this.onDatasourcePropChange("database",e),formMode:!1,handleError:this.props.addDangerToast,readOnly:!this.state.isEditMode})})}),(0,X.Y)("div",{css:(0,a.AH)({width:"calc(100% - 34px)",marginTop:-16},"",""),children:(0,X.Y)(oe,{fieldKey:"table_name",label:(0,p.t)("Name"),control:(0,X.Y)(A.A,{controlId:"table_name",onChange:e=>{this.onDatasourcePropChange("table_name",e)},placeholder:(0,p.t)("Dataset name"),disabled:!this.state.isEditMode})})})]}),(0,X.Y)(oe,{fieldKey:"sql",label:(0,p.t)("SQL"),description:(0,p.t)("When specifying SQL, the datasource acts as a view. Superset will use this statement as a subquery while grouping and filtering on the generated parent queries.If changes are made to your SQL query, columns in your dataset will be synced when saving the dataset."),control:null!=(e=this.props.database)&&e.isLoading?(0,X.FD)(X.FK,{children:[this.renderSqlEditorOverlay(),(0,X.Y)(Y.A,{hotkeys:[{name:"formatQuery",key:"ctrl+shift+f",descr:(0,p.t)("Format SQL query"),func:()=>{this.onQueryFormat()}}],language:"sql",offerEditInModal:!1,minLines:10,maxLines:1/0,readOnly:!this.state.isEditMode,resize:"both"})]}):(0,X.Y)(Y.A,{css:e=>a.AH`
                            margin-top: ${3*e.sizeUnit}px;
                          `,hotkeys:[{name:"formatQuery",key:"ctrl+shift+f",descr:(0,p.t)("Format SQL query"),func:()=>{this.onQueryFormat()}}],language:"sql",offerEditInModal:!1,minLines:10,maxLines:1/0,readOnly:!this.state.isEditMode,resize:"both"}),additionalControl:(0,X.FD)("div",{css:a.AH`
                          position: absolute;
                          right: 0;
                          top: 0;
                          z-index: 2;
                          display: flex;
                        `,children:[(0,X.Y)(P.$,{disabled:null==(t=this.props.database)?void 0:t.isLoading,tooltip:(0,p.t)("Open SQL Lab in a new tab"),buttonStyle:"secondary",onClick:()=>{this.openOnSqlLab()},icon:(0,X.Y)(U.F.ExportOutlined,{iconSize:"s"})}),(0,X.Y)(P.$,{disabled:null==(n=this.props.database)?void 0:n.isLoading,tooltip:(0,p.t)("Run query"),buttonStyle:"primary",onClick:()=>{this.onQueryRun()},icon:(0,X.Y)(U.F.CaretRightFilled,{iconSize:"s"})})]})}),(null==(i=this.props.database)?void 0:i.queryResult)&&(0,X.FD)(X.FK,{children:[(0,X.FD)("div",{css:e=>a.AH`
                          margin-bottom: ${e.sizeUnit}px;
                        `,children:[(0,X.Y)("span",{css:e=>a.AH`
                            color: ${e.colorText};
                            font-size: ${e.fontSizeSM}px;
                          `,children:(0,p.t)("In this view you can preview the first 25 rows. ")}),this.renderOpenInSqlLabLink(),(0,X.Y)("span",{css:e=>a.AH`
                            color: ${e.colorText};
                            font-size: ${e.fontSizeSM}px;
                          `,children:(0,p.t)(" to see details.")})]}),(0,X.Y)(Le,{data:null==(o=this.props.database)?void 0:o.queryResult.data,queryId:null==(s=this.props.database)?void 0:s.queryResult.query.id,orderedColumnKeys:null==(r=this.props.database)?void 0:r.queryResult.columns.map((e=>e.column_name)),expandedColumns:null==(l=this.props.database)?void 0:l.queryResult.expandedColumns,height:300,allowHTML:!0})]}),(null==(d=this.props.database)?void 0:d.error)&&this.renderSqlErrorMessage()]})}),this.state.datasourceType===we.physical.key&&(0,X.Y)(K.A,{xs:24,md:12,children:this.state.isSqla&&(0,X.Y)(oe,{fieldKey:"tableSelector",label:(0,p.t)("Physical"),control:(0,X.Y)("div",{css:Me,children:(0,X.Y)(S.Ay,{clearable:!1,database:{...b.database,database_name:(null==(h=b.database)?void 0:h.database_name)||(null==(u=b.database)?void 0:u.name)},dbId:null==(m=b.database)?void 0:m.id,handleError:this.props.addDangerToast,catalog:b.catalog,schema:b.schema,sqlLabMode:!1,tableValue:b.table_name,onCatalogChange:this.state.isEditMode?e=>this.onDatasourcePropChange("catalog",e):void 0,onSchemaChange:this.state.isEditMode?e=>this.onDatasourcePropChange("schema",e):void 0,onDbChange:this.state.isEditMode?e=>this.onDatasourcePropChange("database",e):void 0,onTableSelectChange:this.state.isEditMode?e=>this.onDatasourcePropChange("table_name",e):void 0,readOnly:!this.state.isEditMode})}),description:(0,p.t)("The pointer to a physical table (or view). Keep in mind that the chart is associated to this Superset logical table, and this logical table points the physical table referenced here.")})})]})]})}renderErrors(){return this.state.errors.length>0?(0,X.Y)(N.F,{css:e=>({marginBottom:4*e.sizeUnit}),type:"error",message:(0,X.Y)(X.FK,{children:this.state.errors.map((e=>(0,X.Y)("div",{children:e},e)))})}):null}renderMetricCollection(){const{datasource:e}=this.state,{metrics:t}=e,n=null!=t&&t.length?this.sortMetrics(t):[];return(0,X.Y)(ce,{tableColumns:["metric_name","verbose_name","expression"],sortColumns:["metric_name","verbose_name","expression"],columnLabels:{metric_name:(0,p.t)("Metric Key"),verbose_name:(0,p.t)("Label"),expression:(0,p.t)("SQL expression")},columnLabelTooltips:{metric_name:(0,p.t)("This field is used as a unique identifier to attach the metric to charts. It is also used as the alias in the SQL query.")},expandFieldset:(0,X.Y)(ke,{children:(0,X.FD)(se,{compact:!0,children:[(0,X.Y)(oe,{fieldKey:"description",label:(0,p.t)("Description"),control:(0,X.Y)(A.A,{controlId:"description",placeholder:(0,p.t)("Description")})}),(0,X.Y)(oe,{fieldKey:"d3format",label:(0,p.t)("D3 format"),control:(0,X.Y)(A.A,{controlId:"d3format",placeholder:"%y/%m/%d"})}),(0,X.Y)(oe,{fieldKey:"currency",label:(0,p.t)("Metric currency"),control:(0,X.Y)(D.A,{currencySelectOverrideProps:{placeholder:(0,p.t)("Select or type currency symbol")},symbolSelectAdditionalStyles:a.AH`
                      max-width: 30%;
                    `})}),(0,X.Y)(oe,{label:(0,p.t)("Certified by"),fieldKey:"certified_by",description:(0,p.t)("Person or group that has certified this metric"),control:(0,X.Y)(A.A,{controlId:"certified_by",placeholder:(0,p.t)("Certified by")})}),(0,X.Y)(oe,{label:(0,p.t)("Certification details"),fieldKey:"certification_details",description:(0,p.t)("Details of the certification"),control:(0,X.Y)(A.A,{controlId:"certification_details",placeholder:(0,p.t)("Certification details")})}),(0,X.Y)(oe,{label:(0,p.t)("Warning"),fieldKey:"warning_markdown",description:(0,p.t)("Optional warning about use of this metric"),control:(0,X.Y)(Y.A,{controlId:"warning_markdown",language:"markdown",offerEditInModal:!1,resize:"vertical"})})]})}),collection:n,allowAddItem:!0,onChange:this.onDatasourcePropChange.bind(this,"metrics"),itemGenerator:()=>({metric_name:(0,p.t)("<new metric>"),verbose_name:"",expression:""}),itemCellProps:{expression:()=>({width:"240px"})},itemRenderers:{metric_name:(e,t,n,a)=>(0,X.FD)(me,{children:[a.is_certified&&(0,X.Y)(F.T,{certifiedBy:a.certified_by,details:a.certification_details}),a.warning_markdown&&(0,X.Y)(x.A,{warningMarkdown:a.warning_markdown}),(0,X.Y)(I.z,{canEdit:!0,title:e,onSaveTitle:t,maxWidth:300})]}),verbose_name:(e,t)=>(0,X.Y)(A.A,{canEdit:!0,value:e,onChange:t}),expression:(e,t)=>(0,X.Y)(Y.A,{canEdit:!0,initialValue:e,onChange:t,extraClasses:["datasource-sql-expression"],language:"sql",offerEditInModal:!1,minLines:5,textAreaStyles:{minWidth:"200px",maxWidth:"450px"},resize:"both"}),description:(e,t,n)=>(0,X.Y)(ze,{label:n,formElement:(0,X.Y)(A.A,{value:e,onChange:t})}),d3format:(e,t,n)=>(0,X.Y)(ze,{label:n,formElement:(0,X.Y)(A.A,{value:e,onChange:t})})},allowDeletes:!0,stickyHeader:!0})}render(){const{datasource:e,activeTabKey:t}=this.state,{metrics:n}=e,a=null!=n&&n.length?this.sortMetrics(n):[],{theme:i}=this.props;return(0,X.FD)(pe,{children:[this.renderErrors(),(0,X.Y)(N.F,{css:e=>({marginBottom:4*e.sizeUnit}),type:"warning",message:(0,X.FD)(X.FK,{children:[" ",(0,X.FD)("strong",{children:[(0,p.t)("Be careful.")," "]}),(0,p.t)("Changing these settings will affect all charts using this dataset, including charts owned by other people.")]})}),(0,X.Y)(be,{id:"table-tabs",onChange:this.handleTabSelect,defaultActiveKey:t,items:[{key:Ae,label:(0,p.t)("Source"),children:this.renderSourceFieldset(i)},{key:"METRICS",label:(0,X.Y)(De,{collection:a,title:(0,p.t)("Metrics")}),children:this.renderMetricCollection()},{key:"COLUMNS",label:(0,X.Y)(De,{collection:this.state.databaseColumns,title:(0,p.t)("Columns")}),children:(0,X.FD)(Ce,{children:[(0,X.Y)(ye,{children:(0,X.Y)(xe,{children:(0,X.FD)(P.$,{buttonSize:"small",buttonStyle:"tertiary",onClick:this.syncMetadata,className:"sync-from-source",disabled:this.state.isEditMode,children:[(0,X.Y)(U.F.DatabaseOutlined,{iconSize:"m"}),(0,p.t)("Sync columns from source")]})})}),(0,X.Y)(Ee,{className:"columns-table",columns:this.state.databaseColumns,datasource:e,onColumnsChange:e=>this.setColumns({databaseColumns:e}),onDatasourceChange:this.onDatasourceChange}),this.state.metadataLoading&&(0,X.Y)(O.R,{})]})},{key:"CALCULATED_COLUMNS",label:(0,X.Y)(De,{collection:this.state.calculatedColumns,title:(0,p.t)("Calculated columns")}),children:(0,X.Y)(Ce,{children:(0,X.Y)(Ee,{columns:this.state.calculatedColumns,onColumnsChange:e=>this.setColumns({calculatedColumns:e}),columnLabelTooltips:{column_name:(0,p.t)("This field is used as a unique identifier to attach the calculated dimension to charts. It is also used as the alias in the SQL query.")},onDatasourceChange:this.onDatasourceChange,datasource:e,editableColumnName:!0,showExpression:!0,allowAddItem:!0,allowEditDataType:!0,itemGenerator:()=>({column_name:(0,p.t)("<new column>"),filterable:!0,groupby:!0,expression:(0,p.t)("<enter SQL expression here>"),expanded:!0})})})},{key:"SETTINGS",label:(0,p.t)("Settings"),children:(0,X.FD)(Q.A,{gutter:16,children:[(0,X.Y)(K.A,{xs:24,md:12,children:(0,X.Y)(ke,{children:this.renderSettingsFieldset()})}),(0,X.Y)(K.A,{xs:24,md:12,children:(0,X.Y)(ke,{children:this.renderAdvancedFieldset()})})]})}]})]})}componentDidMount(){G().bind("ctrl+shift+f",(e=>(e.preventDefault(),this.state.isEditMode&&this.onQueryFormat(),!1)))}componentWillUnmount(){G().unbind("ctrl+shift+f"),this.props.resetQuery()}}qe.defaultProps={onChange:()=>{},setIsEditing:()=>{}},qe.propTypes=Fe;const Oe=(0,v.b)(qe),Ue=(0,T.Ay)((0,d.Ng)((e=>({database:null==e?void 0:e.database})),(e=>({runQuery:t=>e(function(e){return async function(t){try{t(j(!0)),t({type:"SET_QUERY_RESULT",payload:await B(e)})}catch(e){t(function(e){return{type:"SET_QUERY_ERROR",payload:e}}(e.message))}finally{t(j(!1))}}}(t)),resetQuery:()=>e({type:"RESET_DATABASE_STATE"}),formatQuery:t=>e(function(e){return function(t){return b.A.post({endpoint:"/api/v1/sqllab/format_sql/",body:JSON.stringify({sql:e}),headers:{"Content-Type":"application/json"}}).then((e=>(t({type:"SET_QUERY",payload:e.json.result}),e)))}}(t))})))(Oe))},36188:(e,t,n)=>{n.d(t,{c:()=>s});var a=n(2445),i=n(17437),o=n(36552);function s(e){return(0,a.Y)(o.A,{css:e=>i.AH`
        margin: ${e.margin}px 0;
      `,...e})}},39438:(e,t,n)=>{n.d(t,{A:()=>f});var a=n(96540),i=n(5556),o=n.n(i),s=n(52167),r=n(95018),l=n(17355),d=n(41876),c=n(88217),h=n(74098),u=n(98837),p=n(18865),m=n(2445);const b={name:o().string,onChange:o().func,initialValue:o().string,height:o().number,minLines:o().number,maxLines:o().number,offerEditInModal:o().bool,language:o().oneOf([null,"json","html","sql","markdown","javascript"]),aboveEditorSection:o().node,readOnly:o().bool,resize:o().oneOf([null,"block","both","horizontal","inline","none","vertical"]),textAreaStyles:o().object,tooltipOptions:o().object,hotkeys:o().array};class g extends a.Component{onControlChange(e){const{value:t}=e.target;this.props.onChange(t)}onAreaEditorChange(e){this.props.onChange(e)}renderEditor(e=!1){const t=e?40:this.props.minLines||12;if(this.props.language){const n={border:`1px solid ${this.props.theme.colorBorder}`,minHeight:`${t}em`,width:"auto",...this.props.textAreaStyles};this.props.resize&&(n.resize=this.props.resize),this.props.readOnly&&(n.backgroundColor="#f2f2f2");const a=e=>{this.props.hotkeys.forEach((t=>{e.commands.addCommand({name:t.name,bindKey:{win:t.key,mac:t.key},exec:t.func})}))},i=(0,m.Y)("div",{children:(0,m.Y)(s.S9,{mode:this.props.language,style:n,minLines:t,maxLines:e?1e3:this.props.maxLines,editorProps:{$blockScrolling:!0},onLoad:a,defaultValue:this.props.initialValue,readOnly:this.props.readOnly,...this.props,onChange:this.onAreaEditorChange.bind(this)},this.props.name)});return this.props.tooltipOptions?(0,m.Y)(r.m,{...this.props.tooltipOptions,children:i}):i}const n=(0,m.Y)("div",{children:(0,m.Y)(l.A.TextArea,{placeholder:(0,h.t)("textarea"),onChange:this.onControlChange.bind(this),defaultValue:this.props.initialValue,disabled:this.props.readOnly,style:{height:this.props.height},"aria-required":this.props["aria-required"]})});return this.props.tooltipOptions?(0,m.Y)(r.m,{...this.props.tooltipOptions,children:n}):n}renderModalBody(){return(0,m.FD)(m.FK,{children:[(0,m.Y)("div",{children:this.props.aboveEditorSection}),this.renderEditor(!0)]})}render(){const e=(0,m.Y)(p.A,{...this.props});return(0,m.FD)("div",{children:[e,this.renderEditor(),this.props.offerEditInModal&&(0,m.Y)(d.g,{modalTitle:e,triggerNode:(0,m.FD)(c.$,{buttonSize:"small",style:{marginTop:this.props.theme.sizeUnit},children:[(0,h.t)("Edit")," ",(0,m.Y)("strong",{children:this.props.language})," ",(0,h.t)("in modal")]}),modalBody:this.renderModalBody(!0),responsive:!0})]})}}g.propTypes=b,g.defaultProps={onChange:()=>{},initialValue:"",height:250,minLines:3,maxLines:10,offerEditInModal:!0,readOnly:!1,resize:null,textAreaStyles:{},tooltipOptions:{},hotkeys:[]};const f=(0,u.b)(g)},40984:(e,t,n)=>{n.d(t,{A:()=>l,Q:()=>s});var a=n(14735),i=n(52966),o=n(29898);const s=e=>{var t;return null==(t=new Intl.NumberFormat("en-US",{style:"currency",currency:e.symbol}).formatToParts(1).find((e=>"currency"===e.type)))?void 0:t.value};class r extends a.A{constructor(e){super((e=>this.format(e))),this.d3Format=void 0,this.locale=void 0,this.currency=void 0,this.d3Format=e.d3Format||i.A.SMART_NUMBER,this.currency=e.currency,this.locale=e.locale||"en-US"}hasValidCurrency(){var e;return Boolean(null==(e=this.currency)?void 0:e.symbol)}getNormalizedD3Format(){return this.d3Format.replace(/\$|%/g,"")}format(e){const t=(0,o.gV)(this.getNormalizedD3Format())(e);return this.hasValidCurrency()?"prefix"===this.currency.symbolPosition?`${s(this.currency)} ${t}`:`${t} ${s(this.currency)}`:t}}const l=r},54569:(e,t,n)=>{n.d(t,{T:()=>l});var a=n(2445),i=n(50290),o=n(74098),s=n(8558),r=n(95018);function l({certifiedBy:e,details:t,size:n="l"}){const l=(0,i.DP)();return(0,a.Y)(r.m,{id:"certified-details-tooltip",title:(0,a.FD)(a.FK,{children:[e&&(0,a.Y)("div",{children:(0,a.Y)("strong",{children:(0,o.t)("Certified by %s",e)})}),(0,a.Y)("div",{children:t})]}),children:(0,a.Y)(s.F.Certified,{iconColor:l.colorPrimary,iconSize:n})})}},65729:(e,t,n)=>{n.d(t,{l:()=>o});var a=n(2445),i=n(89467);const o=Object.assign((function(e){return(0,a.Y)(i.A,{...e})}),{useForm:i.A.useForm,Item:i.A.Item,List:i.A.List,ErrorList:i.A.ErrorList,Provider:i.A.Provider})},78878:(e,t,n)=>{function a(e,t){return e===t||!e&&!t||!!(e&&t&&e.length===t.length&&e.every(((e,n)=>e===t[n])))}n.d(t,{A:()=>a})},82384:(e,t,n)=>{n.d(t,{e:()=>i});var a=n(89467);const i=(0,n(50290).I4)(a.A.Item)`
  ${({theme:e})=>`\n    &.ant-form-item > .ant-row > .ant-form-item-label {\n      padding-bottom: ${e.paddingXXS}px;\n    }\n    .ant-form-item-label {\n      & > label {\n        font-size: ${e.fontSizeSM}px;\n        &.ant-form-item-required:not(.ant-form-item-required-mark-optional) {\n          &::before {\n            display: none;\n          }\n          &::after {\n            display: inline-block;\n            visibility: visible;\n            color: ${e.colorError};\n            font-size: ${e.fontSizeSM}px;\n            content: '*';\n          }\n        }\n      }\n    }\n    .ant-form-item-extra {\n      margin-top: ${e.sizeUnit}px;\n      font-size: ${e.fontSizeSM}px;\n    }\n  `}
`},94083:(e,t,n)=>{n.d(t,{Ay:()=>S,Kt:()=>x,cs:()=>v});var a=n(2445),i=n(96540),o=n(50290),s=n(74098),r=n(59744),l=n(54569),d=n(23195),c=n(2801),h=n(89232),u=n(8558),p=n(9992),m=n(35273),b=n(64457),g=n(98244);const f=o.I4.div`
  ${({theme:e})=>`\n    .refresh {\n      display: flex;\n      align-items: center;\n      width: 30px;\n      margin-left: ${e.sizeUnit}px;\n      margin-top: ${5*e.sizeUnit}px;\n    }\n\n    .section {\n      display: flex;\n      flex-direction: row;\n      align-items: center;\n    }\n\n    .divider {\n      border-bottom: 1px solid ${e.colorSplit};\n      margin: 15px 0;\n    }\n\n    .table-length {\n      color: ${e.colorTextSecondary};\n    }\n\n    .select {\n      flex: 1;\n      max-width: calc(100% - ${e.sizeUnit+30}px)\n    }\n  `}
`,y=o.I4.span`
  align-items: center;
  display: flex;
  white-space: nowrap;

  svg,
  small {
    margin-right: ${({theme:e})=>e.sizeUnit}px;
  }
`,v=({table:e})=>{const{value:t,type:n,extra:i}=e;return(0,a.FD)(y,{title:t,children:["view"===n?(0,a.Y)(u.F.EyeOutlined,{iconSize:"m"}):(0,a.Y)(u.F.InsertRowAboveOutlined,{iconSize:"m"}),(null==i?void 0:i.certification)&&(0,a.Y)(l.T,{certifiedBy:i.certification.certified_by,details:i.certification.details,size:"l"}),(null==i?void 0:i.warning_markdown)&&(0,a.Y)(m.A,{warningMarkdown:i.warning_markdown,size:"l",marginRight:4}),t]})},C=({database:e,emptyState:t,formMode:n=!1,getDbList:o,handleError:l,isDatabaseSelectEnabled:u=!0,onDbChange:m,onCatalogChange:y,onSchemaChange:C,readOnly:x=!1,onEmptyResults:S,catalog:_,schema:A,sqlLabMode:Y=!0,tableSelectMode:w="single",tableValue:T,onTableSelectChange:D,customTableOptionLabelRenderer:E})=>{const{addSuccessToast:z}=(0,b.Yf)(),[k,F]=(0,i.useState)(_),[I,L]=(0,i.useState)(A),[$,M]=(0,i.useState)(void 0),{currentData:q,isFetching:O,refetch:U}=(0,g.ty)({dbId:null==e?void 0:e.id,catalog:k,schema:I,onSuccess:(e,t)=>{t&&z((0,s.t)("List updated"))},onError:e=>{(0,r.h4)(e).then((e=>{l((0,r.hi)((0,s.t)("There was an error loading the tables"),e))}))}}),R=(0,i.useMemo)((()=>q?q.options.map((e=>({value:e.value,label:E?E(e):(0,a.Y)(v,{table:e}),text:e.value}))):[]),[q,E]);(0,i.useEffect)((()=>{void 0===e&&(F(void 0),L(void 0),M(void 0))}),[e,w]),(0,i.useEffect)((()=>{M("single"===w?R.find((e=>e.value===T)):(null==R?void 0:R.filter((e=>e&&(null==T?void 0:T.includes(e.value)))))||[])}),[R,T,w]);const K=(0,i.useMemo)((()=>(e,t)=>{const n=e.trim().toLowerCase(),{value:a}=t;return a.toLowerCase().includes(n)}),[]);return(0,a.FD)(f,{children:[(0,a.Y)(h.RA,{db:e,emptyState:t,formMode:n,getDbList:o,handleError:l,onDbChange:x?void 0:e=>{m&&m(e),F(void 0),L(void 0),M("single"===w?void 0:[])},onEmptyResults:S,onCatalogChange:x?void 0:e=>{F(e),y&&y(e),L(void 0),M("single"===w?void 0:[])},catalog:k,onSchemaChange:x?void 0:e=>{L(e),C&&C(e),M("single"===w?void 0:[])},schema:I,sqlLabMode:Y,isDatabaseSelectEnabled:u&&!x,readOnly:x}),Y&&!n&&(0,a.Y)("div",{className:"divider"}),function(){const e=I&&!n&&x||!I,t=Y?(0,a.Y)(d.l,{children:(0,s.t)("See table schema")}):(0,a.Y)(d.l,{children:(0,s.t)("Table")});return i=(0,a.Y)(c.A,{ariaLabel:(0,s.t)("Select table or type to search tables"),disabled:e,filterOption:K,header:t,labelInValue:!0,loading:O,name:"select-table",onChange:e=>{return t=e,void(I?null==D||D(Array.isArray(t)?t.map((e=>null==e?void 0:e.value)):null==t?void 0:t.value,k,I):M(t));var t},options:R,placeholder:(0,s.t)("Select table or type to search tables"),showSearch:!0,mode:w,value:$,allowClear:"multiple"===w,allowSelectAll:!1}),o=!x&&(0,a.Y)(p.A,{onClick:()=>U(),tooltipContent:(0,s.t)("Force refresh table list")}),(0,a.FD)("div",{className:"section",children:[(0,a.Y)("span",{className:"select",children:i}),(0,a.Y)("span",{className:"refresh",children:o})]});var i,o}()]})},x=e=>(0,a.Y)(C,{tableSelectMode:"multiple",...e}),S=C}}]);