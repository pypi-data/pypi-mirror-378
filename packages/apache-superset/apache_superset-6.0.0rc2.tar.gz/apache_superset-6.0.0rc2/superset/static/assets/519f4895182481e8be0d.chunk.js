"use strict";(globalThis.webpackChunksuperset=globalThis.webpackChunksuperset||[]).push([[1859],{5504:(e,t,r)=>{r.d(t,{A:()=>o});var i=r(53259),s=r.n(i);const n={onRenderFailure(){},onRenderSuccess(){}};function o(e){const t=s().Map(e);class r extends t{componentDidMount(){this.afterRender()}componentDidUpdate(){this.afterRender()}afterRender(){const{loaded:e,loading:t,error:r}=this.state,{onRenderFailure:i,onRenderSuccess:s}=this.props;t||(r?i(r):e&&Object.keys(e).length>0&&s())}}return r.defaultProps=void 0,r.defaultProps=n,r.preload=t.preload,r}},20033:(e,t,r)=>{r.d(t,{wv:()=>d,x9:()=>m});var i=r(62193),s=r.n(i),n=r(58561),o=r.n(n),a=r(90924),l=r(79378),c=r(59744);const d=" : ",h=(e,t)=>`${e}${d}${t}`,u=(e,t)=>e.replace("T00:00:00","")||(t?"-∞":"∞"),p=(e,t="col")=>{const r=e.split(d);return 1===r.length?e:`${u(r[0],!0)} ≤ ${t} < ${u(r[1])}`},m=async(e,t="col",r)=>{let i,n;if(s()(r))i=o().encode_uri(e),n=`/api/v1/time_range/?q=${i}`;else{const t=(0,a.A)(r).map((t=>({timeRange:e,shift:t})));i=o().encode_uri([{timeRange:e},...t]),n=`/api/v1/time_range/?q=${i}`}try{var m;const e=await l.A.get({endpoint:n});if(s()(r)){var f,g;const r=h((null==e||null==(f=e.json)||null==(f=f.result[0])?void 0:f.since)||"",(null==e||null==(g=e.json)||null==(g=g.result[0])?void 0:g.until)||"");return{value:p(r,t)}}const i=null==e||null==(m=e.json)?void 0:m.result.map((e=>h(e.since,e.until)));return{value:i.slice(1).map((e=>((e,t,r="col")=>{const i=e.split(d),s=t.split(d);return`${r}: ${u(i[0],!0)} to ${u(i[1])} vs\n  ${u(s[0],!0)} to ${u(s[1])}`})(i[0],e,t)))}}catch(e){const t=await(0,c.h4)(e);return{error:t.message||t.error||e.statusText}}}},20486:(e,t,r)=>{r.d(t,{A:()=>M});var i=r(2445),s=r(96540),n=r(94177),o=r(80116),a=r(25508),l=r(98837),c=r(39965),d=r(18749),h=r(74098),u=r(32861),p=r(69376),m=r(59923),f=r(5504);function g(e){return e}const v=()=>null,D={id:"",className:"",preTransformProps:g,overrideTransformProps:void 0,postTransformProps:g,onRenderSuccess(){},onRenderFailure(){}},S=new m.A;class w extends s.PureComponent{constructor(...e){super(...e),this.container=void 0,this.preSelector=(0,a.Mz)([e=>e.chartProps,e=>e.preTransformProps],((e,t=g)=>t(e))),this.transformSelector=(0,a.Mz)([e=>e.chartProps,e=>e.transformProps],((e,t=g)=>t(e))),this.postSelector=(0,a.Mz)([e=>e.chartProps,e=>e.postTransformProps],((e,t=g)=>t(e))),this.processChartProps=({chartProps:e,preTransformProps:t,transformProps:r,postTransformProps:i})=>this.postSelector({chartProps:this.transformSelector({chartProps:this.preSelector({chartProps:e,preTransformProps:t}),transformProps:r}),postTransformProps:i}),this.createLoadableRenderer=(0,a.Mz)([e=>e.chartType,e=>e.overrideTransformProps],((e,t)=>{if(e){const r=(0,f.A)({loader:{Chart:()=>(0,u.A)().getAsPromise(e),transformProps:t?()=>Promise.resolve(t):()=>(0,p.A)().getAsPromise(e)},loading:t=>this.renderLoading(t,e),render:this.renderChart});return r.preload(),r}return v})),this.renderChart=(e,t)=>{const{Chart:r,transformProps:s}=e,{chartProps:n,preTransformProps:o,postTransformProps:a}=t;return(0,i.Y)(r,{...this.processChartProps({chartProps:n,preTransformProps:o,transformProps:s,postTransformProps:a})})},this.renderLoading=(e,t)=>{const{error:r}=e;return r?(0,i.FD)("div",{className:"alert alert-warning",role:"alert",children:[(0,i.Y)("strong",{children:(0,h.t)("ERROR")})," ",(0,i.FD)("code",{children:['chartType="',t,'"']})," —",r.toString()]}):null},this.setRef=e=>{this.container=e}}render(){const{id:e,className:t,preTransformProps:r,postTransformProps:s,chartProps:n=S,onRenderSuccess:o,onRenderFailure:a}=this.props,l=this.createLoadableRenderer(this.props);if(null===n)return null;const c={};return e&&(c.id=e),t&&(c.className=t),(0,i.Y)("div",{...c,ref:this.setRef,children:(0,i.Y)(l,{preTransformProps:r,postTransformProps:s,chartProps:n,onRenderSuccess:o,onRenderFailure:a})})}}w.defaultProps=D;var P=r(50290),R=r(17437);const y={maxWidth:800},T=P.I4.div`
  ${({theme:e,width:t,height:r})=>R.AH`
    align-items: center;
    display: flex;
    flex-direction: column;
    justify-content: center;
    text-align: center;
    height: ${r}px;
    width: ${t}px;
    padding: ${4*e.sizeUnit}px;

    & .no-results-title {
      font-size: ${e.fontSizeLG}px;
      font-weight: ${e.fontWeightStrong};
      padding-bottom: ${2*e.sizeUnit};
    }

    & .no-results-body {
      font-size: ${e.fontSize}px;
    }
  `}
`,C=({className:e,height:t,id:r,width:s})=>{const n="string"==typeof s||s>250,o=(0,h.t)("No results were returned for this query. If you expected results to be returned, ensure any filters are configured properly and the datasource contains data for the selected time range.");return(0,i.Y)(T,{height:t,width:s,className:e,id:r,title:n?void 0:o,children:(0,i.FD)("div",{style:y,children:[(0,i.Y)("div",{className:"no-results-title",children:(0,h.t)("No Results")}),n&&(0,i.Y)("div",{className:"no-results-body",children:o})]})})},x={FallbackComponent:function({error:e,height:t,width:r}){return(0,i.Y)("div",{css:e=>({backgroundColor:e.colorBgContainer,color:e.colorText,overflow:"auto",padding:32}),style:{height:t,width:r},children:(0,i.FD)("div",{children:[(0,i.Y)("div",{children:(0,i.Y)("b",{children:(0,h.t)("Oops! An error occurred!")})}),(0,i.Y)("code",{children:e?e.toString():"Unknown Error"})]})})},height:400,width:"100%",enableNoResults:!0};class A extends s.PureComponent{constructor(...e){super(...e),this.core=void 0,this.createChartProps=m.A.createSelector(),this.parseDimension=(0,a.Mz)([({width:e})=>e,({height:e})=>e],((e,t)=>{const r=(0,c.A)(e),n=(0,c.A)(t),o={height:n.isDynamic?100*n.multiplier+"%":n.value,width:r.isDynamic?100*r.multiplier+"%":r.value};return{BoundingBox:r.isDynamic&&n.isDynamic&&1===r.multiplier&&1===n.multiplier?s.Fragment:({children:e})=>(0,i.Y)("div",{style:o,children:e}),heightInfo:n,widthInfo:r}})),this.setRef=e=>{this.core=e},this.getQueryCount=()=>{var e,t;return null!=(e=null==(t=(0,d.A)().get(this.props.chartType))?void 0:t.queryObjectCount)?e:1}}renderChart(e,t){const{id:r,className:s,chartType:o,preTransformProps:a,overrideTransformProps:l,postTransformProps:c,onRenderSuccess:d,onRenderFailure:h,disableErrorBoundary:u,FallbackComponent:p,onErrorBoundary:m,Wrapper:f,queriesData:g,enableNoResults:v,noResults:D,theme:S,...P}=this.props,R=this.createChartProps({...P,queriesData:g,height:t,width:e,theme:S});let y;if(!v||g&&!g.slice(0,this.getQueryCount()).every((({data:e})=>!e||Array.isArray(e)&&0===e.length))){const n=(0,i.Y)(w,{ref:this.setRef,id:r,className:s,chartType:o,chartProps:R,preTransformProps:a,overrideTransformProps:l,postTransformProps:c,onRenderSuccess:d,onRenderFailure:h});y=f?(0,i.Y)(f,{width:e,height:t,children:n}):n}else y=D||(0,i.Y)(C,{id:r,className:s,height:t,width:e});return!0===u?y:(0,i.Y)(n.tH,{FallbackComponent:r=>(0,i.Y)(p,{width:e,height:t,...r}),onError:m,children:y})}render(){const{heightInfo:e,widthInfo:t,BoundingBox:r}=this.parseDimension(this.props);if(t.isDynamic||e.isDynamic){const{debounceTime:s}=this.props;return(0,i.Y)(r,{children:(0,i.Y)(o.A,{debounceTime:s,children:({width:r,height:i})=>this.renderChart(t.isDynamic?Math.floor(r):t.value,e.isDynamic?Math.floor(i):e.value)})})}return this.renderChart(t.value,e.value)}}A.defaultProps=x;const M=(0,l.b)(A)},39242:(e,t,r)=>{r.d(t,{t:()=>m});var i=r(20033);const s=String.raw`\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.\d+)?(?:(?:[+-]\d\d:\d\d)|Z)?`,n=String.raw`(?:TODAY|NOW)`,o=String.raw`[+-]?[1-9][0-9]*`,a=String.raw`YEAR|QUARTER|MONTH|WEEK|DAY|HOUR|MINUTE|SECOND`,l=RegExp(String.raw`^DATEADD\(DATETIME\("(${s}|${n})"\),\s(${o}),\s(${a})\)$`,"i"),c=RegExp(String.raw`^${s}$|^${n}$`,"i"),d=["now","today"],h=new Date;h.setHours(0,0,0,0);const u=new Date;u.setHours(0,0,0,0);const p={sinceDatetime:h.setDate(h.getDate()-7).toString(),sinceMode:"relative",sinceGrain:"day",sinceGrainValue:-7,untilDatetime:u.toString(),untilMode:"specific",untilGrain:"day",untilGrainValue:7,anchorMode:"now",anchorValue:"now"},m=e=>{const t=e.split(i.wv);if(2===t.length){const[e,r]=t;if(c.test(e)&&c.test(r)){const t=d.includes(e)?e:"specific",i=d.includes(r)?r:"specific";return{customRange:{...p,sinceDatetime:e,untilDatetime:r,sinceMode:t,untilMode:i},matchedFlag:!0}}const i=e.match(l);if(i&&c.test(r)&&e.includes(r)){const[e,t,s]=i.slice(1),n=d.includes(r)?r:"specific";return{customRange:{...p,sinceGrain:s,sinceGrainValue:parseInt(t,10),sinceDatetime:e,untilDatetime:e,sinceMode:"relative",untilMode:n},matchedFlag:!0}}const s=r.match(l);if(c.test(e)&&s&&r.includes(e)){const[t,r,i]=[...s.slice(1)],n=d.includes(e)?e:"specific";return{customRange:{...p,untilGrain:i,untilGrainValue:parseInt(r,10),sinceDatetime:t,untilDatetime:t,untilMode:"relative",sinceMode:n},matchedFlag:!0}}if(i&&s){const[e,t,r]=[...i.slice(1)],[n,o,a]=[...s.slice(1)];if(e===n)return{customRange:{...p,sinceGrain:r,sinceGrainValue:parseInt(t,10),sinceDatetime:e,untilGrain:a,untilGrainValue:parseInt(o,10),untilDatetime:n,anchorValue:e,sinceMode:"relative",untilMode:"relative",anchorMode:"now"===e?"now":"specific"},matchedFlag:!0}}}return{customRange:p,matchedFlag:!1}}},39591:(e,t,r)=>{r.d(t,{A:()=>n,P:()=>s});var i=r(96540);const s={name:"l8l8b8",styles:"white-space:nowrap;overflow:hidden;text-overflow:ellipsis"},n=({isVertical:e,isHorizontal:t}={isVertical:!1,isHorizontal:!0})=>{const[r,s]=(0,i.useState)(!0),n=(0,i.useRef)(null),[o,a]=(0,i.useState)(0),[l,c]=(0,i.useState)(0),[d,h]=(0,i.useState)(0),[u,p]=(0,i.useState)(0);return(0,i.useEffect)((()=>{var e,t,r,i,s,o,l,d;a(null!=(e=null==(t=n.current)?void 0:t.offsetWidth)?e:0),c(null!=(r=null==(i=n.current)?void 0:i.scrollWidth)?r:0),h(null!=(s=null==(o=n.current)?void 0:o.offsetHeight)?s:0),p(null!=(l=null==(d=n.current)?void 0:d.scrollHeight)?l:0)})),(0,i.useEffect)((()=>{s(e&&d<u||t&&o<l)}),[o,l,d,u,e,t]),[n,r]}},39965:(e,t,r)=>{r.d(t,{A:()=>s});const i={isDynamic:!0,multiplier:1};function s(e){return"auto"===e||"100%"===e?i:"string"==typeof e&&e.length>0&&"%"===e[e.length-1]?{isDynamic:!0,multiplier:parseFloat(e)/100}:{isDynamic:!1,value:"number"==typeof e?e:parseFloat(e)}}},59923:(e,t,r)=>{r.d(t,{A:()=>l});var i=r(25508),s=r(69191),n=r(50290);const o=800,a=600;class l{constructor(e={theme:n.TT}){this.annotationData=void 0,this.datasource=void 0,this.rawDatasource=void 0,this.initialValues=void 0,this.formData=void 0,this.rawFormData=void 0,this.height=void 0,this.hooks=void 0,this.ownState=void 0,this.filterState=void 0,this.legendState=void 0,this.legendIndex=void 0,this.queriesData=void 0,this.width=void 0,this.behaviors=void 0,this.displaySettings=void 0,this.appSection=void 0,this.isRefreshing=void 0,this.inputRef=void 0,this.inContextMenu=void 0,this.emitCrossFilters=void 0,this.theme=void 0;const{annotationData:t={},datasource:r={},formData:i={},hooks:l={},ownState:c={},filterState:d={},legendState:h,legendIndex:u,initialValues:p={},queriesData:m=[],behaviors:f=[],displaySettings:g={},width:v=o,height:D=a,appSection:S,isRefreshing:w,inputRef:P,inContextMenu:R=!1,emitCrossFilters:y=!1,theme:T}=e;this.width=v,this.height=D,this.annotationData=t,this.datasource=(0,s.A)(r),this.rawDatasource=r,this.formData=(0,s.A)(i),this.rawFormData=i,this.hooks=l,this.initialValues=p,this.queriesData=m,this.ownState=c,this.filterState=d,this.legendState=h,this.legendIndex=u,this.behaviors=f,this.displaySettings=g,this.appSection=S,this.isRefreshing=w,this.inputRef=P,this.inContextMenu=R,this.emitCrossFilters=y,this.theme=T}}l.createSelector=void 0,l.createSelector=function(){return(0,i.Mz)((e=>e.annotationData),(e=>e.datasource),(e=>e.formData),(e=>e.height),(e=>e.hooks),(e=>e.initialValues),(e=>e.queriesData),(e=>e.width),(e=>e.ownState),(e=>e.filterState),(e=>e.legendState),(e=>e.legendIndex),(e=>e.behaviors),(e=>e.displaySettings),(e=>e.appSection),(e=>e.isRefreshing),(e=>e.inputRef),(e=>e.inContextMenu),(e=>e.emitCrossFilters),(e=>e.theme),((e,t,r,i,s,n,o,a,c,d,h,u,p,m,f,g,v,D,S,w)=>new l({annotationData:e,datasource:t,formData:r,height:i,hooks:s,initialValues:n,queriesData:o,ownState:c,filterState:d,legendState:h,legendIndex:u,width:a,behaviors:p,displaySettings:m,appSection:f,isRefreshing:g,inputRef:v,inContextMenu:D,emitCrossFilters:S,theme:w})),{memoize:i.i5,argsMemoize:i.i5,memoizeOptions:{maxSize:10}})}},62053:(e,t,r)=>{r.d(t,{h:()=>n});var i=r(96540),s=r(67413);function n(e,t){const r=(0,s.Z)(e);(0,i.useEffect)((()=>{e!==r&&t(r,e)}),[e,r,t])}}}]);