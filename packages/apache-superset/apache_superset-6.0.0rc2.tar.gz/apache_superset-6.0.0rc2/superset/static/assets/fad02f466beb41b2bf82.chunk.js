"use strict";(globalThis.webpackChunksuperset=globalThis.webpackChunksuperset||[]).push([[8881],{47324:(t,e,n)=>{n.d(e,{A:()=>r});var i=n(2445),o=n(96540);function r(t,e){class n extends o.Component{constructor(t){super(t),this.container=void 0,this.setContainerRef=this.setContainerRef.bind(this)}componentDidMount(){this.execute()}componentDidUpdate(){this.execute()}componentWillUnmount(){this.container=void 0,null!=e&&e.componentWillUnmount&&e.componentWillUnmount.bind(this)()}setContainerRef(t){this.container=t}execute(){this.container&&t(this.container,this.props)}render(){const{id:t,className:e}=this.props;return(0,i.Y)("div",{ref:this.setContainerRef,id:t,className:e})}}const r=n;return t.displayName&&(r.displayName=t.displayName),t.propTypes&&(r.propTypes={...r.propTypes,...t.propTypes}),t.defaultProps&&(r.defaultProps=t.defaultProps),n}},58881:(t,e,n)=>{n.r(e),n.d(e,{default:()=>Et});var i=n(5556),o=n.n(i),r=n(47324),a=n(50290),s=n(17437),l=n(61573),u=n(18312);function c(){}function h(t){return null==t?c:function(){return this.querySelector(t)}}function m(){return[]}function g(t){return function(e){return e.matches(t)}}var d=Array.prototype.find;function p(){return this.firstElementChild}var f=Array.prototype.filter;function D(){return Array.from(this.children)}function y(t){return new Array(t.length)}function w(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}function b(t,e,n,i,o,r){for(var a,s=0,l=e.length,u=r.length;s<u;++s)(a=e[s])?(a.__data__=r[s],i[s]=a):n[s]=new w(t,r[s]);for(;s<l;++s)(a=e[s])&&(o[s]=a)}function v(t,e,n,i,o,r,a){var s,l,u,c=new Map,h=e.length,m=r.length,g=new Array(h);for(s=0;s<h;++s)(l=e[s])&&(g[s]=u=a.call(l,l.__data__,s,e)+"",c.has(u)?o[s]=l:c.set(u,l));for(s=0;s<m;++s)u=a.call(t,r[s],s,r)+"",(l=c.get(u))?(i[s]=l,l.__data__=r[s],c.delete(u)):n[s]=new w(t,r[s]);for(s=0;s<h;++s)(l=e[s])&&c.get(g[s])===l&&(o[s]=l)}function x(t){return t.__data__}function _(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}function M(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}w.prototype={constructor:w,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};var T="http://www.w3.org/1999/xhtml";const S={svg:"http://www.w3.org/2000/svg",xhtml:T,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function N(t){var e=t+="",n=e.indexOf(":");return n>=0&&"xmlns"!==(e=t.slice(0,n))&&(t=t.slice(n+1)),S.hasOwnProperty(e)?{space:S[e],local:t}:t}function k(t){return function(){this.removeAttribute(t)}}function L(t){return function(){this.removeAttributeNS(t.space,t.local)}}function P(t,e){return function(){this.setAttribute(t,e)}}function A(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function C(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}}function F(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function E(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function O(t){return function(){this.style.removeProperty(t)}}function R(t,e,n){return function(){this.style.setProperty(t,e,n)}}function I(t,e,n){return function(){var i=e.apply(this,arguments);null==i?this.style.removeProperty(t):this.style.setProperty(t,i,n)}}function z(t){return function(){delete this[t]}}function H(t,e){return function(){this[t]=e}}function Y(t,e){return function(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}}function W(t){return t.trim().split(/^|\s+/)}function $(t){return t.classList||new U(t)}function U(t){this._node=t,this._names=W(t.getAttribute("class")||"")}function V(t,e){for(var n=$(t),i=-1,o=e.length;++i<o;)n.add(e[i])}function G(t,e){for(var n=$(t),i=-1,o=e.length;++i<o;)n.remove(e[i])}function j(t){return function(){V(this,t)}}function B(t){return function(){G(this,t)}}function q(t,e){return function(){(e.apply(this,arguments)?V:G)(this,t)}}function K(){this.textContent=""}function Z(t){return function(){this.textContent=t}}function X(t){return function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}}function J(){this.innerHTML=""}function Q(t){return function(){this.innerHTML=t}}function tt(t){return function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}}function et(){this.nextSibling&&this.parentNode.appendChild(this)}function nt(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function it(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===T&&e.documentElement.namespaceURI===T?e.createElement(t):e.createElementNS(n,t)}}function ot(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function rt(t){var e=N(t);return(e.local?ot:it)(e)}function at(){return null}function st(){var t=this.parentNode;t&&t.removeChild(this)}function lt(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function ut(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function ct(t){return function(){var e=this.__on;if(e){for(var n,i=0,o=-1,r=e.length;i<r;++i)n=e[i],t.type&&n.type!==t.type||n.name!==t.name?e[++o]=n:this.removeEventListener(n.type,n.listener,n.options);++o?e.length=o:delete this.__on}}}function ht(t,e,n){return function(){var i,o=this.__on,r=function(t){return function(e){t.call(this,e,this.__data__)}}(e);if(o)for(var a=0,s=o.length;a<s;++a)if((i=o[a]).type===t.type&&i.name===t.name)return this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=r,i.options=n),void(i.value=e);this.addEventListener(t.type,r,n),i={type:t.type,name:t.name,value:e,listener:r,options:n},o?o.push(i):this.__on=[i]}}function mt(t,e,n){var i=E(t),o=i.CustomEvent;"function"==typeof o?o=new o(e,n):(o=i.document.createEvent("Event"),n?(o.initEvent(e,n.bubbles,n.cancelable),o.detail=n.detail):o.initEvent(e,!1,!1)),t.dispatchEvent(o)}function gt(t,e){return function(){return mt(this,t,e)}}function dt(t,e){return function(){return mt(this,t,e.apply(this,arguments))}}U.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var pt=[null];function ft(t,e){this._groups=t,this._parents=e}ft.prototype=function(){return new ft([[document.documentElement]],pt)}.prototype={constructor:ft,select:function(t){"function"!=typeof t&&(t=h(t));for(var e=this._groups,n=e.length,i=new Array(n),o=0;o<n;++o)for(var r,a,s=e[o],l=s.length,u=i[o]=new Array(l),c=0;c<l;++c)(r=s[c])&&(a=t.call(r,r.__data__,c,s))&&("__data__"in r&&(a.__data__=r.__data__),u[c]=a);return new ft(i,this._parents)},selectAll:function(t){t="function"==typeof t?function(t){return function(){return null==(e=t.apply(this,arguments))?[]:Array.isArray(e)?e:Array.from(e);var e}}(t):function(t){return null==t?m:function(){return this.querySelectorAll(t)}}(t);for(var e=this._groups,n=e.length,i=[],o=[],r=0;r<n;++r)for(var a,s=e[r],l=s.length,u=0;u<l;++u)(a=s[u])&&(i.push(t.call(a,a.__data__,u,s)),o.push(a));return new ft(i,o)},selectChild:function(t){return this.select(null==t?p:function(t){return function(){return d.call(this.children,t)}}("function"==typeof t?t:g(t)))},selectChildren:function(t){return this.selectAll(null==t?D:function(t){return function(){return f.call(this.children,t)}}("function"==typeof t?t:g(t)))},filter:function(t){"function"!=typeof t&&(t=function(t){return function(){return this.matches(t)}}(t));for(var e=this._groups,n=e.length,i=new Array(n),o=0;o<n;++o)for(var r,a=e[o],s=a.length,l=i[o]=[],u=0;u<s;++u)(r=a[u])&&t.call(r,r.__data__,u,a)&&l.push(r);return new ft(i,this._parents)},data:function(t,e){if(!arguments.length)return Array.from(this,x);var n,i=e?v:b,o=this._parents,r=this._groups;"function"!=typeof t&&(n=t,t=function(){return n});for(var a=r.length,s=new Array(a),l=new Array(a),u=new Array(a),c=0;c<a;++c){var h=o[c],m=r[c],g=m.length,d=_(t.call(h,h&&h.__data__,c,o)),p=d.length,f=l[c]=new Array(p),D=s[c]=new Array(p);i(h,m,f,D,u[c]=new Array(g),d,e);for(var y,w,M=0,T=0;M<p;++M)if(y=f[M]){for(M>=T&&(T=M+1);!(w=D[T])&&++T<p;);y._next=w||null}}return(s=new ft(s,o))._enter=l,s._exit=u,s},enter:function(){return new ft(this._enter||this._groups.map(y),this._parents)},exit:function(){return new ft(this._exit||this._groups.map(y),this._parents)},join:function(t,e,n){var i=this.enter(),o=this,r=this.exit();return"function"==typeof t?(i=t(i))&&(i=i.selection()):i=i.append(t+""),null!=e&&(o=e(o))&&(o=o.selection()),null==n?r.remove():n(r),i&&o?i.merge(o).order():o},merge:function(t){for(var e=t.selection?t.selection():t,n=this._groups,i=e._groups,o=n.length,r=i.length,a=Math.min(o,r),s=new Array(o),l=0;l<a;++l)for(var u,c=n[l],h=i[l],m=c.length,g=s[l]=new Array(m),d=0;d<m;++d)(u=c[d]||h[d])&&(g[d]=u);for(;l<o;++l)s[l]=n[l];return new ft(s,this._parents)},selection:function(){return this},order:function(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var i,o=t[e],r=o.length-1,a=o[r];--r>=0;)(i=o[r])&&(a&&4^i.compareDocumentPosition(a)&&a.parentNode.insertBefore(i,a),a=i);return this},sort:function(t){function e(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n}t||(t=M);for(var n=this._groups,i=n.length,o=new Array(i),r=0;r<i;++r){for(var a,s=n[r],l=s.length,u=o[r]=new Array(l),c=0;c<l;++c)(a=s[c])&&(u[c]=a);u.sort(e)}return new ft(o,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){return Array.from(this)},node:function(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var i=t[e],o=0,r=i.length;o<r;++o){var a=i[o];if(a)return a}return null},size:function(){let t=0;for(const e of this)++t;return t},empty:function(){return!this.node()},each:function(t){for(var e=this._groups,n=0,i=e.length;n<i;++n)for(var o,r=e[n],a=0,s=r.length;a<s;++a)(o=r[a])&&t.call(o,o.__data__,a,r);return this},attr:function(t,e){var n=N(t);if(arguments.length<2){var i=this.node();return n.local?i.getAttributeNS(n.space,n.local):i.getAttribute(n)}return this.each((null==e?n.local?L:k:"function"==typeof e?n.local?F:C:n.local?A:P)(n,e))},style:function(t,e,n){return arguments.length>1?this.each((null==e?O:"function"==typeof e?I:R)(t,e,null==n?"":n)):function(t,e){return t.style.getPropertyValue(e)||E(t).getComputedStyle(t,null).getPropertyValue(e)}(this.node(),t)},property:function(t,e){return arguments.length>1?this.each((null==e?z:"function"==typeof e?Y:H)(t,e)):this.node()[t]},classed:function(t,e){var n=W(t+"");if(arguments.length<2){for(var i=$(this.node()),o=-1,r=n.length;++o<r;)if(!i.contains(n[o]))return!1;return!0}return this.each(("function"==typeof e?q:e?j:B)(n,e))},text:function(t){return arguments.length?this.each(null==t?K:("function"==typeof t?X:Z)(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?J:("function"==typeof t?tt:Q)(t)):this.node().innerHTML},raise:function(){return this.each(et)},lower:function(){return this.each(nt)},append:function(t){var e="function"==typeof t?t:rt(t);return this.select((function(){return this.appendChild(e.apply(this,arguments))}))},insert:function(t,e){var n="function"==typeof t?t:rt(t),i=null==e?at:"function"==typeof e?e:h(e);return this.select((function(){return this.insertBefore(n.apply(this,arguments),i.apply(this,arguments)||null)}))},remove:function(){return this.each(st)},clone:function(t){return this.select(t?ut:lt)},datum:function(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function(t,e,n){var i,o,r=function(t){return t.trim().split(/^|\s+/).map((function(t){var e="",n=t.indexOf(".");return n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),{type:t,name:e}}))}(t+""),a=r.length;if(!(arguments.length<2)){for(s=e?ht:ct,i=0;i<a;++i)this.each(s(r[i],e,n));return this}var s=this.node().__on;if(s)for(var l,u=0,c=s.length;u<c;++u)for(i=0,l=s[u];i<a;++i)if((o=r[i]).type===l.type&&o.name===l.name)return l.value},dispatch:function(t,e){return this.each(("function"==typeof e?dt:gt)(t,e))},[Symbol.iterator]:function*(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var i,o=t[e],r=0,a=o.length;r<a;++r)(i=o[r])&&(yield i)}};var Dt=n(74098),yt=n(96469),wt=n(72936),bt=n(73308),vt=n(24143),xt=(vt=n(24143),function(){var t=this;for(var e in t.tip=(0,wt.A)().attr("class","d3-tip").direction("n").offset([-5,0]).html((e=>`\n      ${t.options.timeFormatter(e.t)}: <strong>${t.options.valueFormatter(e.v)}</strong>\n    `)),t.legendTip=(0,wt.A)().attr("class","d3-tip").direction("n").offset([-5,0]).html((e=>t.options.valueFormatter(e))),this.allowedDataType=["json","csv","tsv","txt"],this.options={itemSelector:"#cal-heatmap",paintOnLoad:!0,range:12,cellSize:10,cellPadding:2,cellRadius:0,domainGutter:2,domainMargin:[0,0,0,0],valueFormatter:t=>t,timeFormatter:t=>t,domain:"hour",subDomain:"min",colLimit:null,rowLimit:null,weekStartOnMonday:!0,start:new Date,minDate:null,maxDate:null,data:"",dataType:this.allowedDataType[0],dataPostPayload:null,dataRequestHeaders:null,considerMissingDataAsZero:!1,loadOnInit:!0,verticalOrientation:!1,domainDynamicDimension:!0,label:{position:"bottom",align:"center",offset:{x:0,y:0},rotate:null,width:100,height:null},legend:[10,20,30,40],displayLegend:!0,legendCellSize:10,legendCellPadding:2,legendMargin:[0,0,0,0],legendVerticalPosition:"bottom",legendHorizontalPosition:"left",legendOrientation:"horizontal",legendColors:null,highlight:[],itemName:["item","items"],domainLabelFormat:null,subDomainTitleFormat:{empty:"{date}",filled:"{count} {name} {connector} {date}"},subDomainDateFormat:null,subDomainTextFormat:null,legendTitleFormat:{lower:(0,Dt.t)("less than {min} {name}"),inner:(0,Dt.t)("between {down} and {up} {name}"),upper:(0,Dt.t)("more than {max} {name}")},animationDuration:500,nextSelector:!1,previousSelector:!1,itemNamespace:"cal-heatmap",tooltip:!1,onClick:null,afterLoad:null,afterLoadNextDomain:null,afterLoadPreviousDomain:null,onComplete:null,afterLoadData:function(t){const e=60*(t=>{const e=new Date(t.getFullYear(),0,1),n=new Date(t.getFullYear(),6,1);return Math.max(e.getTimezoneOffset(),n.getTimezoneOffset())})(new Date);let n={};for(let i in t){const o=t[i];i=parseInt(i,10),n[i+e]=o}return n},afterUpdate:null,onMaxDomainReached:null,onMinDomainReached:null},this._domainType={min:{name:"minute",level:10,maxItemNumber:60,defaultRowNumber:10,defaultColumnNumber:6,row:function(e){return t.getSubDomainRowNumber(e)},column:function(e){return t.getSubDomainColumnNumber(e)},position:{x:function(e){return Math.floor(e.getMinutes()/t._domainType.min.row(e))},y:function(e){return e.getMinutes()%t._domainType.min.row(e)}},format:{date:"%H:%M, %A %B %-e, %Y",legend:"",connector:"at"},extractUnit:function(t){return new Date(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes()).getTime()}},hour:{name:"hour",level:20,maxItemNumber:function(e){switch(t.options.domain){case"day":return 24;case"week":return 168;case"month":return 24*(t.options.domainDynamicDimension?t.getDayCountInMonth(e):31)}},defaultRowNumber:6,defaultColumnNumber:function(e){switch(t.options.domain){case"day":return 4;case"week":return 28;case"month":return t.options.domainDynamicDimension?t.getDayCountInMonth(e):31}},row:function(e){return t.getSubDomainRowNumber(e)},column:function(e){return t.getSubDomainColumnNumber(e)},position:{x:function(e){return"month"===t.options.domain?t.options.colLimit>0||t.options.rowLimit>0?Math.floor((e.getHours()+24*(e.getDate()-1))/t._domainType.hour.row(e)):Math.floor(e.getHours()/t._domainType.hour.row(e))+4*(e.getDate()-1):"week"===t.options.domain?t.options.colLimit>0||t.options.rowLimit>0?Math.floor((e.getHours()+24*t.getWeekDay(e))/t._domainType.hour.row(e)):Math.floor(e.getHours()/t._domainType.hour.row(e))+4*t.getWeekDay(e):Math.floor(e.getHours()/t._domainType.hour.row(e))},y:function(e){var n=e.getHours();if(t.options.colLimit>0||t.options.rowLimit>0)switch(t.options.domain){case"month":n+=24*(e.getDate()-1);break;case"week":n+=24*t.getWeekDay(e)}return Math.floor(n%t._domainType.hour.row(e))}},format:{date:"%Hh, %A %B %-e, %Y",legend:"%H:00",connector:"at"},extractUnit:function(t){return new Date(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours()).getTime()}},day:{name:"day",level:30,maxItemNumber:function(e){switch(t.options.domain){case"week":return 7;case"month":return t.options.domainDynamicDimension?t.getDayCountInMonth(e):31;case"year":return t.options.domainDynamicDimension?t.getDayCountInYear(e):366}},defaultColumnNumber:function(e){switch(e=new Date(e),t.options.domain){case"week":return 1;case"month":return t.options.domainDynamicDimension&&!t.options.verticalOrientation?t.getWeekNumber(new Date(e.getFullYear(),e.getMonth()+1,0))-t.getWeekNumber(e)+1:6;case"year":return t.options.domainDynamicDimension?t.getWeekNumber(new Date(e.getFullYear(),11,31))-t.getWeekNumber(new Date(e.getFullYear(),0))+1:54}},defaultRowNumber:7,row:function(e){return t.getSubDomainRowNumber(e)},column:function(e){return t.getSubDomainColumnNumber(e)},position:{x:function(e){switch(t.options.domain){case"week":return Math.floor(t.getWeekDay(e)/t._domainType.day.row(e));case"month":return t.options.colLimit>0||t.options.rowLimit>0?Math.floor((e.getDate()-1)/t._domainType.day.row(e)):t.getWeekNumber(e)-t.getWeekNumber(new Date(e.getFullYear(),e.getMonth()));case"year":return t.options.colLimit>0||t.options.rowLimit>0?Math.floor((t.getDayOfYear(e)-1)/t._domainType.day.row(e)):t.getWeekNumber(e)}},y:function(e){var n=t.getWeekDay(e);if(t.options.colLimit>0||t.options.rowLimit>0)switch(t.options.domain){case"year":n=t.getDayOfYear(e)-1;break;case"week":n=t.getWeekDay(e);break;case"month":n=e.getDate()-1}return Math.floor(n%t._domainType.day.row(e))}},format:{date:"%A %B %-e, %Y",legend:"%e %b",connector:"on"},extractUnit:function(t){return new Date(t.getFullYear(),t.getMonth(),t.getDate()).getTime()}},week:{name:"week",level:40,maxItemNumber:54,defaultColumnNumber:function(e){switch(e=new Date(e),t.options.domain){case"year":return t._domainType.week.maxItemNumber;case"month":return t.options.domainDynamicDimension?t.getWeekNumber(new Date(e.getFullYear(),e.getMonth()+1,0))-t.getWeekNumber(e):5}},defaultRowNumber:1,row:function(e){return t.getSubDomainRowNumber(e)},column:function(e){return t.getSubDomainColumnNumber(e)},position:{x:function(e){switch(t.options.domain){case"year":return Math.floor(t.getWeekNumber(e)/t._domainType.week.row(e));case"month":return Math.floor(t.getMonthWeekNumber(e)/t._domainType.week.row(e))}},y:function(e){return t.getWeekNumber(e)%t._domainType.week.row(e)}},format:{date:"%B Week #%W",legend:"%B Week #%W",connector:"in"},extractUnit:function(e){var n=new Date(e.getFullYear(),e.getMonth(),e.getDate()),i=n.getDay()-(t.options.weekStartOnMonday?1:0);return i<0&&(i=6),n.setDate(n.getDate()-i),n.getTime()}},month:{name:"month",level:50,maxItemNumber:12,defaultColumnNumber:12,defaultRowNumber:1,row:function(){return t.getSubDomainRowNumber()},column:function(){return t.getSubDomainColumnNumber()},position:{x:function(e){return Math.floor(e.getMonth()/t._domainType.month.row(e))},y:function(e){return e.getMonth()%t._domainType.month.row(e)}},format:{date:"%B %Y",legend:"%B",connector:"in"},extractUnit:function(t){return new Date(t.getFullYear(),t.getMonth()).getTime()}},year:{name:"year",level:60,row:function(){return t.options.rowLimit||1},column:function(){return t.options.colLimit||1},position:{x:function(){return 1},y:function(){return 1}},format:{date:"%Y",legend:"%Y",connector:"in"},extractUnit:function(t){return new Date(t.getFullYear()).getTime()}}},this._domainType)if(this._domainType.hasOwnProperty(e)){var n=this._domainType[e];this._domainType["x_"+e]={name:"x_"+e,level:n.type,maxItemNumber:n.maxItemNumber,defaultRowNumber:n.defaultRowNumber,defaultColumnNumber:n.defaultColumnNumber,row:n.column,column:n.row,position:{x:n.position.y,y:n.position.x},format:n.format,extractUnit:n.extractUnit}}function i(e,n){var i=t.options.cellSize*t._domainType[t.options.subDomain].column(e)+t.options.cellPadding*t._domainType[t.options.subDomain].column(e);return 2===arguments.length&&!0===n?i+(t.domainHorizontalLabelWidth+t.options.domainGutter+t.options.domainMargin[1]+t.options.domainMargin[3]):i}function o(e,n){var i=t.options.cellSize*t._domainType[t.options.subDomain].row(e)+t.options.cellPadding*t._domainType[t.options.subDomain].row(e);return 2===arguments.length&&!0===n&&(i+=t.options.domainGutter+t.domainVerticalLabelHeight+t.options.domainMargin[0]+t.options.domainMargin[2]),i}this.lastInsertedSvg=null,this._completed=!1,this._domains=vt.map(),this.graphDim={width:0,height:0},this.legendDim={width:0,height:0},this.NAVIGATE_LEFT=1,this.NAVIGATE_RIGHT=2,this.RESET_ALL_ON_UPDATE=0,this.RESET_SINGLE_ON_UPDATE=1,this.APPEND_ON_UPDATE=2,this.DEFAULT_LEGEND_MARGIN=10,this.root=null,this.tooltip=null,this._maxDomainReached=!1,this._minDomainReached=!1,this.domainPosition=new _t,this.Legend=null,this.legendScale=null,this.DSTDomain=[],this._init=function(){return t.getDomain(t.options.start).map((function(t){return t.getTime()})).map((function(e){t._domains.set(e,t.getSubDomain(e).map((function(e){return{t:t._domainType[t.options.subDomain].extractUnit(e),v:null}})))})),t.root=vt.select(t.options.itemSelector).append("svg").attr("class","cal-heatmap-container"),t.root.attr("x",0).attr("y",0).append("svg").attr("class","graph"),t.Legend=new Mt(t),t.options.paintOnLoad&&function(){t.verticalDomainLabel="top"===t.options.label.position||"bottom"===t.options.label.position,t.domainVerticalLabelHeight=null===t.options.label.height?Math.max(25,2*t.options.cellSize):t.options.label.height,t.domainHorizontalLabelWidth=0,""===t.options.domainLabelFormat&&null===t.options.label.height&&(t.domainVerticalLabelHeight=0),t.verticalDomainLabel||(t.domainVerticalLabelHeight=0,t.domainHorizontalLabelWidth=t.options.label.width),t.paint(),!1!==t.options.nextSelector&&vt.select(t.options.nextSelector).on("click."+t.options.itemNamespace,(function(){return vt.event.preventDefault(),t.loadNextDomain(1)})),!1!==t.options.previousSelector&&vt.select(t.options.previousSelector).on("click."+t.options.itemNamespace,(function(){return vt.event.preventDefault(),t.loadPreviousDomain(1)})),t.Legend.redraw(t.graphDim.width-t.options.domainGutter-t.options.cellPadding),t.afterLoad();var e=t.getDomainKeys();t.options.loadOnInit?t.getDatas(t.options.data,new Date(e[0]),t.getSubDomain(e[e.length-1]).pop(),(function(){t.fill(),t.onComplete()})):t.onComplete(),t.checkIfMinDomainIsReached(e[0]),t.checkIfMaxDomainIsReached(t.getNextDomain().getTime())}(),t.root.call(t.tip),t.root.call(t.legendTip),!0},this.paint=function(e){var r=t.options;0===arguments.length&&(e=!1);var a=t.root.select(".graph").selectAll(".graph-domain").data((function(){var n=t.getDomainKeys();return e===t.NAVIGATE_LEFT?n.reverse():n}),(function(t){return t})),s=0,l=0,u=a.enter().append("svg").attr("width",(function(t){return i(t,!0)})).attr("height",(function(t){return o(t,!0)})).attr("x",(function(e){return r.verticalOrientation?(t.graphDim.width=Math.max(t.graphDim.width,i(e,!0)),0):c(e,t.graphDim,"width",i(e,!0))})).attr("y",(function(e){return r.verticalOrientation?c(e,t.graphDim,"height",o(e,!0)):(t.graphDim.height=Math.max(t.graphDim.height,o(e,!0)),0)})).attr("class",(function(e){var n="graph-domain",i=new Date(e);switch(r.domain){case"hour":n+=" h_"+i.getHours();case"day":n+=" d_"+i.getDate()+" dy_"+i.getDay();case"week":n+=" w_"+t.getWeekNumber(i);case"month":n+=" m_"+(i.getMonth()+1);case"year":n+=" y_"+i.getFullYear()}return n}));function c(n,i,o,r){var a=0;switch(e){case!1:return a=i[o],i[o]+=r,t.domainPosition.setPosition(n,a),a;case t.NAVIGATE_RIGHT:return t.domainPosition.setPosition(n,i[o]),s=r,l=t.domainPosition.getPositionFromIndex(1),t.domainPosition.shiftRightBy(l),i[o];case t.NAVIGATE_LEFT:return s=-(a=-r),l=i[o]-t.domainPosition.getLast(),t.domainPosition.setPosition(n,a),t.domainPosition.shiftLeftBy(s),a}}t.lastInsertedSvg=u,u.append("rect").attr("width",(function(t){return i(t,!0)-r.domainGutter-r.cellPadding})).attr("height",(function(t){return o(t,!0)-r.domainGutter-r.cellPadding})).attr("class","domain-background");var h=u.append("svg").attr("x",(function(){return"left"===r.label.position?t.domainHorizontalLabelWidth+r.domainMargin[3]:r.domainMargin[3]})).attr("y",(function(){return"top"===r.label.position?t.domainVerticalLabelHeight+r.domainMargin[0]:r.domainMargin[0]})).attr("class","graph-subdomain-group").selectAll("g").data((function(e){return t._domains.get(e)})).enter().append("g");h.append("rect").attr("class",(function(e){return"graph-rect"+t.getHighlightClassName(e.t)+(null!==r.onClick?" hover_cursor":"")})).attr("width",r.cellSize).attr("height",r.cellSize).attr("x",(function(e){return t.positionSubDomainX(e.t)})).attr("y",(function(e){return t.positionSubDomainY(e.t)})).on("click",(function(e){if(null!==r.onClick)return t.onClick(new Date(e.t),e.v)})).call((function(e){r.cellRadius>0&&e.attr("rx",r.cellRadius).attr("ry",r.cellRadius),null!==t.legendScale&&null!==r.legendColors&&r.legendColors.hasOwnProperty("base")&&e.attr("fill",r.legendColors.base),r.tooltip&&e.on("mouseover",(function(e){t.tip.show(e,this)})).on("mouseout",(function(){t.tip.hide(n)}))})),r.tooltip||h.append("title").text((function(e){return t.formatDate(new Date(e.t),r.subDomainDateFormat)})),""!==r.domainLabelFormat&&u.append("text").attr("class","graph-label").attr("y",(function(e){var n=r.domainMargin[0];switch(r.label.position){case"top":n+=t.domainVerticalLabelHeight/2;break;case"bottom":n+=o(e)+t.domainVerticalLabelHeight/2}return n+r.label.offset.y*("right"===r.label.rotate&&"right"===r.label.position||"left"===r.label.rotate&&"left"===r.label.position?-1:1)})).attr("x",(function(e){var n=r.domainMargin[3];switch(r.label.position){case"right":n+=i(e);break;case"bottom":case"top":n+=i(e)/2}return"right"===r.label.align?n+t.domainHorizontalLabelWidth-r.label.offset.x*("right"===r.label.rotate?-1:1):n+r.label.offset.x})).attr("text-anchor",(function(){switch(r.label.align){case"start":case"left":return"start";case"end":case"right":return"end";default:return"middle"}})).attr("dominant-baseline",(function(){return t.verticalDomainLabel?"middle":"top"})).text((function(e){return t.formatDate(new Date(e),r.domainLabelFormat)})).call((function(e){switch(r.label.rotate){case"right":e.attr("transform",(function(e){var n="rotate(90), ";switch(r.label.position){case"right":n+="translate(-"+i(e)+" , -"+i(e)+")";break;case"left":n+="translate(0, -"+t.domainHorizontalLabelWidth+")"}return n}));break;case"left":e.attr("transform",(function(e){var n="rotate(270), ";switch(r.label.position){case"right":n+="translate(-"+(i(e)+t.domainHorizontalLabelWidth)+" , "+i(e)+")";break;case"left":n+="translate(-"+t.domainHorizontalLabelWidth+" , "+t.domainHorizontalLabelWidth+")"}return n}))}})),null!==r.subDomainTextFormat&&h.append("text").attr("class",(function(e){return"subdomain-text"+t.getHighlightClassName(e.t)})).attr("x",(function(e){return t.positionSubDomainX(e.t)+r.cellSize/2})).attr("y",(function(e){return t.positionSubDomainY(e.t)+r.cellSize/2})).attr("text-anchor","middle").attr("dominant-baseline","central").text((function(e){return t.formatDate(new Date(e.t),r.subDomainTextFormat)})),!1!==e&&a.transition().duration(r.animationDuration).attr("x",(function(e){return r.verticalOrientation?0:t.domainPosition.getPosition(e)})).attr("y",(function(e){return r.verticalOrientation?t.domainPosition.getPosition(e):0}));var m=t.graphDim.width,g=t.graphDim.height;r.verticalOrientation?t.graphDim.height+=s-l:t.graphDim.width+=s-l,a.exit().transition().duration(r.animationDuration).attr("x",(function(n){if(r.verticalOrientation)return 0;switch(e){case t.NAVIGATE_LEFT:return Math.min(t.graphDim.width,m);case t.NAVIGATE_RIGHT:return-i(n,!0)}})).attr("y",(function(n){if(!r.verticalOrientation)return 0;switch(e){case t.NAVIGATE_LEFT:return Math.min(t.graphDim.height,g);case t.NAVIGATE_RIGHT:return-o(n,!0)}})).remove(),t.resize()}});xt.prototype={init:function(t){var e=this,n=e.options=Tt(e.options,t);if(function(){if(!e._domainType.hasOwnProperty(n.domain)||"min"===n.domain||"x_"===n.domain.substring(0,2))throw new Error("The domain '"+n.domain+"' is not valid");if(!e._domainType.hasOwnProperty(n.subDomain)||"year"===n.subDomain)throw new Error("The subDomain '"+n.subDomain+"' is not valid");if(e._domainType[n.domain].level<=e._domainType[n.subDomain].level)throw new Error("'"+n.subDomain+"' is not a valid subDomain to '"+n.domain+"'")}(),a(n.itemSelector,!1,"itemSelector"),-1===e.allowedDataType.indexOf(n.dataType))throw new Error("The data type '"+n.dataType+"' is not valid data type");if(null===vt.select(n.itemSelector)[0][0])throw new Error("The node '"+n.itemSelector+"' specified in itemSelector does not exists");try{a(n.nextSelector,!0,"nextSelector"),a(n.previousSelector,!0,"previousSelector")}catch(t){return console.log(t.message),!1}t.hasOwnProperty("subDomain")||(this.options.subDomain=function(t){switch(t){case"year":return"month";case"month":case"week":return"day";case"day":return"hour";default:return"min"}}(t.domain)),"string"==typeof n.itemNamespace&&""!==n.itemNamespace||(console.log("itemNamespace can not be empty, falling back to cal-heatmap"),n.itemNamespace="cal-heatmap");var i,o=["data","onComplete","onClick","afterLoad","afterLoadData","afterLoadPreviousDomain","afterLoadNextDomain","afterUpdate"];for(var r in o)t.hasOwnProperty(o[r])&&(n[o[r]]=t[o[r]]);function a(t,e,n){if((e&&!1===t||t instanceof Element||"string"==typeof t)&&""!==t)return!0;throw new Error("The "+n+" is not valid")}function s(t){switch("number"==typeof t&&(t=[t]),Array.isArray(t)||(console.log("Margin only takes an integer or an array of integers"),t=[0]),t.length){case 1:return[t[0],t[0],t[0],t[0]];case 2:return[t[0],t[1],t[0],t[1]];case 3:return[t[0],t[1],t[2],t[1]];case 4:return t;default:return t.slice(0,4)}}return n.subDomainDateFormat="string"==typeof n.subDomainDateFormat||"function"==typeof n.subDomainDateFormat?n.subDomainDateFormat:this._domainType[n.subDomain].format.date,n.domainLabelFormat="string"==typeof n.domainLabelFormat||"function"==typeof n.domainLabelFormat?n.domainLabelFormat:this._domainType[n.domain].format.legend,n.subDomainTextFormat="string"==typeof n.subDomainTextFormat&&""!==n.subDomainTextFormat||"function"==typeof n.subDomainTextFormat?n.subDomainTextFormat:null,n.domainMargin=s(n.domainMargin),n.legendMargin=s(n.legendMargin),n.highlight=e.expandDateSetting(n.highlight),n.itemName=function(t){return"string"==typeof t?[t,t+(""!==t?"s":"")]:Array.isArray(t)?1===t.length?[t[0],t[0]+"s"]:t.length>2?t.slice(0,2):t:["item","items"]}(n.itemName),n.colLimit=(i=n.colLimit)>0?i:null,n.rowLimit=function(t){return t>0&&n.colLimit>0?(console.log("colLimit and rowLimit are mutually exclusive, rowLimit will be ignored"),null):t>0?t:null}(n.rowLimit),t.hasOwnProperty("legendMargin")||function(){switch(n.legendVerticalPosition){case"top":n.legendMargin[2]=e.DEFAULT_LEGEND_MARGIN;break;case"bottom":n.legendMargin[0]=e.DEFAULT_LEGEND_MARGIN;break;case"middle":case"center":n.legendMargin["right"===n.legendHorizontalPosition?3:1]=e.DEFAULT_LEGEND_MARGIN}}(),function(){if(!t.hasOwnProperty("label")||t.hasOwnProperty("label")&&!t.label.hasOwnProperty("align")){switch(n.label.position){case"left":n.label.align="right";break;case"right":n.label.align="left";break;default:n.label.align="center"}"left"===n.label.rotate?n.label.align="right":"right"===n.label.rotate&&(n.label.align="left")}(!t.hasOwnProperty("label")||t.hasOwnProperty("label")&&!t.label.hasOwnProperty("offset"))&&("left"!==n.label.position&&"right"!==n.label.position||(n.label.offset={x:10,y:15}))}(),this._init()},expandDateSetting:function(t){return Array.isArray(t)||(t=[t]),t.map((function(t){return"now"===t?new Date:t instanceof Date&&t})).filter((function(t){return!1!==t}))},fill:function(t){var e=this,n=e.options;0===arguments.length&&(t=e.root.selectAll(".graph-domain"));var i=t.selectAll("svg").selectAll("g").data((function(t){return e._domains.get(t)}));i.transition().duration(n.animationDuration).select("rect").attr("class",(function(t){var i=e.getHighlightClassName(t.t).trim().split(" "),o=e.dateIsLessThan(t.t,new Date),r=e.dateIsEqual(t.t,new Date);return(null===e.legendScale||null===t.v&&n.hasOwnProperty("considerMissingDataAsZero")&&!n.considerMissingDataAsZero&&!n.legendColors.hasOwnProperty("base"))&&i.push("graph-rect"),r?i.push("now"):o||i.push("future"),null!==t.v?i.push(e.Legend.getClass(t.v,null===e.legendScale)):n.considerMissingDataAsZero&&o&&i.push(e.Legend.getClass(0,null===e.legendScale)),null!==n.onClick&&i.push("hover_cursor"),i.join(" ")})).call((function(t){if(null===e.legendScale)return!1;t.attr("fill",(function(t){return null===t.v&&n.hasOwnProperty("considerMissingDataAsZero")&&!n.considerMissingDataAsZero&&n.legendColors.hasOwnProperty("base")?n.legendColors.base:null!==n.legendColors&&n.legendColors.hasOwnProperty("empty")&&(0===t.v||null===t.v&&n.hasOwnProperty("considerMissingDataAsZero")&&n.considerMissingDataAsZero)?n.legendColors.empty:t.v<0&&n.legend[0]>0&&null!==n.legendColors&&n.legendColors.hasOwnProperty("overflow")?n.legendColors.overflow:e.legendScale(Math.min(t.v,n.legend[n.legend.length-1]))}))})),i.transition().duration(n.animationDuration).select("title").text((function(t){return e.getSubDomainTitle(t)})),i.transition().duration(n.animationDuration).select("text").attr("class",(function(t){return"subdomain-text"+e.getHighlightClassName(t.t)})).call((function(t){"function"==typeof n.subDomainTextFormat&&t.text((function(t){return n.subDomainTextFormat(t.t,t.v)}))})).attr("fill",(t=>{if(!t.v)return"#000";const i=e.legendScale(Math.min(t.v,n.legend[n.legend.length-1]));return(0,bt.OB)(i,135)}))},formatStringWithObject:function(t,e){for(var n in e)if(e.hasOwnProperty(n)){var i=new RegExp("\\{"+n+"\\}","gi");t=t.replace(i,e[n])}return t},triggerEvent:function(t,e,n){return!!(3===arguments.length&&n||null===this.options[t])||("function"==typeof this.options[t]?("function"==typeof e&&(e=e()),this.options[t].apply(this,e)):(console.log("Provided callback for "+t+" is not a function."),!1))},onClick:function(t,e){return this.triggerEvent("onClick",[t,e])},afterLoad:function(){return this.triggerEvent("afterLoad")},onComplete:function(){var t=this.triggerEvent("onComplete",[],this._completed);return this._completed=!0,t},afterLoadPreviousDomain:function(t){var e=this;return this.triggerEvent("afterLoadPreviousDomain",(function(){var n=e.getSubDomain(t);return[n.shift(),n.pop()]}))},afterLoadNextDomain:function(t){var e=this;return this.triggerEvent("afterLoadNextDomain",(function(){var n=e.getSubDomain(t);return[n.shift(),n.pop()]}))},onMinDomainReached:function(t){return this._minDomainReached=t,this.triggerEvent("onMinDomainReached",[t])},onMaxDomainReached:function(t){return this._maxDomainReached=t,this.triggerEvent("onMaxDomainReached",[t])},checkIfMinDomainIsReached:function(t,e){this.minDomainIsReached(t)&&this.onMinDomainReached(!0),2===arguments.length&&this._maxDomainReached&&!this.maxDomainIsReached(e)&&this.onMaxDomainReached(!1)},checkIfMaxDomainIsReached:function(t,e){this.maxDomainIsReached(t)&&this.onMaxDomainReached(!0),2===arguments.length&&this._minDomainReached&&!this.minDomainIsReached(e)&&this.onMinDomainReached(!1)},afterUpdate:function(){return this.triggerEvent("afterUpdate")},formatNumber:vt.format(",g"),formatDate:function(t,e){return arguments.length<2&&(e="title"),"function"==typeof e?e(t):vt.time.format(e)(t)},getSubDomainTitle:function(t){if(null!==t.v||this.options.considerMissingDataAsZero){var e=t.v;return null===e&&this.options.considerMissingDataAsZero&&(e=0),this.formatStringWithObject(this.options.subDomainTitleFormat.filled,{count:this.formatNumber(e),name:this.options.itemName[1!==e?1:0],connector:this._domainType[this.options.subDomain].format.connector,date:this.formatDate(new Date(t.t),this.options.subDomainDateFormat)})}return this.formatStringWithObject(this.options.subDomainTitleFormat.empty,{date:this.formatDate(new Date(t.t),this.options.subDomainDateFormat)})},loadNextDomain:function(t){if(this._maxDomainReached||0===t)return!1;var e=this.loadNewDomains(this.NAVIGATE_RIGHT,this.getDomain(this.getNextDomain(),t));return this.afterLoadNextDomain(e.end),this.checkIfMaxDomainIsReached(this.getNextDomain().getTime(),e.start),!0},loadPreviousDomain:function(t){if(this._minDomainReached||0===t)return!1;var e=this.loadNewDomains(this.NAVIGATE_LEFT,this.getDomain(this.getDomainKeys()[0],-t).reverse());return this.afterLoadPreviousDomain(e.start),this.checkIfMinDomainIsReached(e.start,e.end),!0},loadNewDomains:function(t,e){var n=this,i=t===this.NAVIGATE_LEFT,o=-1,r=e.length,a=this.getDomainKeys();function s(t){return{t:n._domainType[n.options.subDomain].extractUnit(t),v:null}}for(;++o<r;){if(i&&this.minDomainIsReached(e[o])){e=e.slice(0,o+1);break}if(!i&&this.maxDomainIsReached(e[o])){e=e.slice(0,o);break}}for(o=0,r=(e=e.slice(-this.options.range)).length;o<r;o+=1)this._domains.set(e[o].getTime(),this.getSubDomain(e[o]).map(s)),this._domains.remove(i?a.pop():a.shift());return a=this.getDomainKeys(),i&&(e=e.reverse()),this.paint(t),this.getDatas(this.options.data,e[0],this.getSubDomain(e[e.length-1]).pop(),(function(){n.fill(n.lastInsertedSvg)})),{start:e[i?0:1],end:a[a.length-1]}},maxDomainIsReached:function(t){return null!==this.options.maxDate&&this.options.maxDate.getTime()<t},minDomainIsReached:function(t){return null!==this.options.minDate&&this.options.minDate.getTime()>=t},getDomainKeys:function(){return this._domains.keys().map((function(t){return parseInt(t,10)})).sort((function(t,e){return t-e}))},positionSubDomainX:function(t){var e=this._domainType[this.options.subDomain].position.x(new Date(t));return e*this.options.cellSize+e*this.options.cellPadding},positionSubDomainY:function(t){var e=this._domainType[this.options.subDomain].position.y(new Date(t));return e*this.options.cellSize+e*this.options.cellPadding},getSubDomainColumnNumber:function(t){if(this.options.rowLimit>0){var e=this._domainType[this.options.subDomain].maxItemNumber;return"function"==typeof e&&(e=e(t)),Math.ceil(e/this.options.rowLimit)}var n=this._domainType[this.options.subDomain].defaultColumnNumber;return"function"==typeof n&&(n=n(t)),this.options.colLimit||n},getSubDomainRowNumber:function(t){if(this.options.colLimit>0){var e=this._domainType[this.options.subDomain].maxItemNumber;return"function"==typeof e&&(e=e(t)),Math.ceil(e/this.options.colLimit)}var n=this._domainType[this.options.subDomain].defaultRowNumber;return"function"==typeof n&&(n=n(t)),this.options.rowLimit||n},getHighlightClassName:function(t){if(t=new Date(t),this.options.highlight.length>0)for(var e in this.options.highlight)if(this.dateIsEqual(this.options.highlight[e],t))return this.isNow(this.options.highlight[e])?" highlight-now":" highlight";return""},isNow:function(t){return this.dateIsEqual(t,new Date)},dateIsEqual:function(t,e){switch(t instanceof Date||(t=new Date(t)),e instanceof Date||(e=new Date(e)),this.options.subDomain){case"x_min":case"min":return t.getFullYear()===e.getFullYear()&&t.getMonth()===e.getMonth()&&t.getDate()===e.getDate()&&t.getHours()===e.getHours()&&t.getMinutes()===e.getMinutes();case"x_hour":case"hour":return t.getFullYear()===e.getFullYear()&&t.getMonth()===e.getMonth()&&t.getDate()===e.getDate()&&t.getHours()===e.getHours();case"x_day":case"day":return t.getFullYear()===e.getFullYear()&&t.getMonth()===e.getMonth()&&t.getDate()===e.getDate();case"x_week":case"week":return t.getFullYear()===e.getFullYear()&&this.getWeekNumber(t)===this.getWeekNumber(e);case"x_month":case"month":return t.getFullYear()===e.getFullYear()&&t.getMonth()===e.getMonth();default:return!1}},dateIsLessThan:function(t,e){function n(t,e){switch(e){case"x_min":case"min":return new Date(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes()).getTime();case"x_hour":case"hour":return new Date(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours()).getTime();case"x_day":case"day":return new Date(t.getFullYear(),t.getMonth(),t.getDate()).getTime();case"x_week":case"week":case"x_month":case"month":return new Date(t.getFullYear(),t.getMonth()).getTime();default:return t.getTime()}}return t instanceof Date||(t=new Date(t)),e instanceof Date||(e=new Date(e)),n(t,this.options.subDomain)<n(e,this.options.subDomain)},getDayOfYear:vt.time.format("%j"),getWeekNumber:function(t){return(!0===this.options.weekStartOnMonday?vt.time.format("%W"):vt.time.format("%U"))(t)},getMonthWeekNumber:function(t){"number"==typeof t&&(t=new Date(t));var e=this.getWeekNumber(new Date(t.getFullYear(),t.getMonth()));return this.getWeekNumber(t)-e-1},getWeekNumberInYear:function(t){"number"==typeof t&&(t=new Date(t))},getDayCountInMonth:function(t){return this.getEndOfMonth(t).getDate()},getDayCountInYear:function(t){return"number"==typeof t&&(t=new Date(t)),1===new Date(t.getFullYear(),1,29).getMonth()?366:365},getWeekDay:function(t){return!1===this.options.weekStartOnMonday?t.getDay():0===t.getDay()?6:t.getDay()-1},getEndOfMonth:function(t){return"number"==typeof t&&(t=new Date(t)),new Date(t.getFullYear(),t.getMonth()+1,0)},jumpDate:function(t,e,n){var i=new Date(t);switch(n){case"hour":i.setHours(i.getHours()+e);break;case"day":i.setHours(i.getHours()+24*e);break;case"week":i.setHours(i.getHours()+24*e*7);break;case"month":i.setMonth(i.getMonth()+e);break;case"year":i.setFullYear(i.getFullYear()+e)}return new Date(i)},getMinuteDomain:function(t,e){var n,i=new Date(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours());return n=e instanceof Date?new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours()):new Date(+i+1e3*e*60),vt.time.minutes(Math.min(i,n),Math.max(i,n))},getHourDomain:function(t,e){var n=new Date(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours()),i=null;e instanceof Date?i=new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours()):(i=new Date(n)).setHours(i.getHours()+e);var o=vt.time.hours(Math.min(n,i),Math.max(n,i)),r=0,a=o.length;for(r=0;r<a;r+=1)if(r>0&&o[r].getHours()===o[r-1].getHours()){this.DSTDomain.push(o[r].getTime()),o.splice(r,1);break}return"number"==typeof e&&o.length>Math.abs(e)&&o.splice(o.length-1,1),o},getDayDomain:function(t,e){var n=new Date(t.getFullYear(),t.getMonth(),t.getDate()),i=null;return e instanceof Date?i=new Date(e.getFullYear(),e.getMonth(),e.getDate()):(i=new Date(n),i=new Date(i.setDate(i.getDate()+parseInt(e,10)))),vt.time.days(Math.min(n,i),Math.max(n,i))},getWeekDomain:function(t,e){var n;!1===this.options.weekStartOnMonday?n=new Date(t.getFullYear(),t.getMonth(),t.getDate()-t.getDay()):1===t.getDay()?n=new Date(t.getFullYear(),t.getMonth(),t.getDate()):0===t.getDay()?(n=new Date(t.getFullYear(),t.getMonth(),t.getDate())).setDate(n.getDate()-6):n=new Date(t.getFullYear(),t.getMonth(),t.getDate()-t.getDay()+1);var i=new Date(n),o=e;return"object"!=typeof e&&(o=new Date(i.setDate(i.getDate()+7*e))),!0===this.options.weekStartOnMonday?vt.time.mondays(Math.min(n,o),Math.max(n,o)):vt.time.sundays(Math.min(n,o),Math.max(n,o))},getMonthDomain:function(t,e){var n=new Date(t.getFullYear(),t.getMonth()),i=null;return i=e instanceof Date?new Date(e.getFullYear(),e.getMonth()):(i=new Date(n)).setMonth(i.getMonth()+e),vt.time.months(Math.min(n,i),Math.max(n,i))},getYearDomain:function(t,e){var n,i=new Date(t.getFullYear(),0);return n=e instanceof Date?new Date(e.getFullYear(),0):new Date(t.getFullYear()+e,0),vt.time.years(Math.min(i,n),Math.max(i,n))},getDomain:function(t,e){switch("number"==typeof t&&(t=new Date(t)),arguments.length<2&&(e=this.options.range),this.options.domain){case"hour":var n=this.getHourDomain(t,e);return"number"==typeof e&&n.length<e&&(e>0?n.push(this.getHourDomain(n[n.length-1],2)[1]):n.shift(this.getHourDomain(n[0],-2)[0])),n;case"day":return this.getDayDomain(t,e);case"week":return this.getWeekDomain(t,e);case"month":return this.getMonthDomain(t,e);case"year":return this.getYearDomain(t,e)}},getSubDomain:function(t){"number"==typeof t&&(t=new Date(t));var e=this;switch(this.options.subDomain){case"x_min":case"min":return this.getMinuteDomain(t,function(t,e){switch(e){case"hour":return 60;case"day":return 1440;case"week":return 10080}}(0,this.options.domain));case"x_hour":case"hour":return this.getHourDomain(t,function(t,n){switch(n){case"day":return 24;case"week":return 168;case"month":return 24*e.getDayCountInMonth(t)}}(t,this.options.domain));case"x_day":case"day":return this.getDayDomain(t,function(t,n){switch(n){case"year":return e.getDayCountInYear(t);case"month":return e.getDayCountInMonth(t);case"week":return 7}}(t,this.options.domain));case"x_week":case"week":return this.getWeekDomain(t,function(t,n){if("month"===n){var i=new Date(t.getFullYear(),t.getMonth()+1,0),o=e.getWeekNumber(i),r=e.getWeekNumber(new Date(t.getFullYear(),t.getMonth()));return r>o&&(r=0,o+=1),o-r+1}if("year"===n)return e.getWeekNumber(new Date(t.getFullYear(),11,31))}(t,this.options.domain));case"x_month":case"month":return this.getMonthDomain(t,12)}},getNextDomain:function(t){return 0===arguments.length&&(t=1),this.getDomain(this.jumpDate(this.getDomainKeys().pop(),t,this.options.domain),1)[0]},getPreviousDomain:function(t){return 0===arguments.length&&(t=1),this.getDomain(this.jumpDate(this.getDomainKeys().shift(),-t,this.options.domain),1)[0]},getDatas:function(t,e,n,i,o,r){var a=this;arguments.length<5&&(o=!0),arguments.length<6&&(r=this.APPEND_ON_UPDATE);var s=function(t,s){!1!==o?"function"==typeof o?s=o(s):"function"==typeof a.options.afterLoadData?s=a.options.afterLoadData(s):console.log("Provided callback for afterLoadData is not a function."):"csv"!==a.options.dataType&&"tsv"!==a.options.dataType||(s=this.interpretCSV(s)),a.parseDatas(s,r,e,n),"function"==typeof i&&i()};switch(typeof t){case"string":if(""===t)return s(0,{}),!0;var l=this.parseURI(t,e,n),u="GET";null!==a.options.dataPostPayload&&(u="POST");var c=null;null!==a.options.dataPostPayload&&(c=this.parseURI(a.options.dataPostPayload,e,n));var h=null;switch(this.options.dataType){case"json":h=vt.json(l);break;case"csv":h=vt.csv(l);break;case"tsv":h=vt.tsv(l);break;case"txt":h=vt.text(l,"text/plain")}if(null!==a.options.dataRequestHeaders)for(var m in a.options.dataRequestHeaders)a.options.dataRequestHeaders.hasOwnProperty(m)&&h.header(m,a.options.dataRequestHeaders[m]);return h.send(u,c,s),!1;case"object":if(t===Object(t))return s(0,t),!1;default:return s(0,{}),!0}},parseDatas:function(t,e,n,i){e===this.RESET_ALL_ON_UPDATE&&this._domains.forEach((function(t,e){e.forEach((function(t,e,n){n[e].v=null}))}));var o={},r=function(t){return t.t};for(var a in t){var s=new Date(1e3*a),l=this.getDomain(s)[0].getTime();if(this.DSTDomain.indexOf(l)>=0&&this._domains.has(l-36e5)&&(l-=36e5),!isNaN(a)&&t.hasOwnProperty(a)&&this._domains.has(l)&&l>=+n&&l<+i){var u=this._domains.get(l);o.hasOwnProperty(l)||(o[l]=u.map(r));var c=o[l].indexOf(this._domainType[this.options.subDomain].extractUnit(s));e===this.RESET_SINGLE_ON_UPDATE||isNaN(u[c].v)?u[c].v=t[a]:u[c].v+=t[a]}}},parseURI:function(t,e,n){return(t=(t=(t=t.replace(/\{\{t:start\}\}/g,e.getTime()/1e3)).replace(/\{\{t:end\}\}/g,n.getTime()/1e3)).replace(/\{\{d:start\}\}/g,e.toISOString())).replace(/\{\{d:end\}\}/g,n.toISOString())},interpretCSV:function(t){var e,n,i={},o=Object.keys(t[0]);for(e=0,n=t.length;e<n;e+=1)i[t[e][o[0]]]=+t[e][o[1]];return i},resize:function(){var t=this,e=t.options,n=e.displayLegend?t.Legend.getDim("width")+e.legendMargin[1]+e.legendMargin[3]:0,i=e.displayLegend?t.Legend.getDim("height")+e.legendMargin[0]+e.legendMargin[2]:0,o=t.graphDim.width-e.domainGutter-e.cellPadding,r=t.graphDim.height-e.domainGutter-e.cellPadding;this.root.transition().duration(e.animationDuration).attr("width",(function(){return"middle"===e.legendVerticalPosition||"center"===e.legendVerticalPosition?o+n:Math.max(o,n)})).attr("height",(function(){return"middle"===e.legendVerticalPosition||"center"===e.legendVerticalPosition?Math.max(r,i):r+i})),this.root.select(".graph").transition().duration(e.animationDuration).attr("y",(function(){return"top"===e.legendVerticalPosition?i:0})).attr("x",(function(){return"middle"!==e.legendVerticalPosition&&"center"!==e.legendVerticalPosition||"left"!==e.legendHorizontalPosition?0:n}))},next:function(t){return 0===arguments.length&&(t=1),this.loadNextDomain(t)},previous:function(t){return 0===arguments.length&&(t=1),this.loadPreviousDomain(t)},jumpTo:function(t,e){arguments.length<2&&(e=!1);var n=this.getDomainKeys(),i=n[0],o=n[n.length-1];return t<i?this.loadPreviousDomain(this.getDomain(i,t).length):e?this.loadNextDomain(this.getDomain(i,t).length):t>o&&this.loadNextDomain(this.getDomain(o,t).length)},rewind:function(){this.jumpTo(this.options.start,!0)},update:function(t,e,n){0===arguments.length&&(t=this.options.data),arguments.length<2&&(e=!0),arguments.length<3&&(n=this.RESET_ALL_ON_UPDATE);var i=this.getDomainKeys(),o=this;this.getDatas(t,new Date(i[0]),this.getSubDomain(i[i.length-1]).pop(),(function(){o.fill(),o.afterUpdate()}),e,n)},setLegend:function(){var t=this.options.legend.slice(0);arguments.length>=1&&Array.isArray(arguments[0])&&(this.options.legend=arguments[0]),arguments.length>=2&&(Array.isArray(arguments[1])&&arguments[1].length>=2?this.options.legendColors=[arguments[1][0],arguments[1][1]]:this.options.legendColors=arguments[1]),(arguments.length>0&&!St(t,this.options.legend)||arguments.length>=2)&&(this.Legend.buildColors(),this.fill()),this.Legend.redraw(this.graphDim.width-this.options.domainGutter-this.options.cellPadding)},removeLegend:function(){return!!this.options.displayLegend&&(this.options.displayLegend=!1,this.Legend.remove(),!0)},showLegend:function(){return!this.options.displayLegend&&(this.options.displayLegend=!0,this.Legend.redraw(this.graphDim.width-this.options.domainGutter-this.options.cellPadding),!0)},highlight:function(t){return(this.options.highlight=this.expandDateSetting(t)).length>0&&(this.fill(),!0)},destroy:function(t){return this.root.transition().duration(this.options.animationDuration).attr("width",0).attr("height",0).remove().each("end",(function(){"function"==typeof t?t():void 0!==t&&console.log("Provided callback for destroy() is not a function.")})),null},getSVG:function(){for(var t={".cal-heatmap-container":{},".graph":{},".graph-rect":{},"rect.highlight":{},"rect.now":{},"rect.highlight-now":{},"text.highlight":{},"text.now":{},"text.highlight-now":{},".domain-background":{},".graph-label":{},".subdomain-text":{},".q0":{},".qi":{}},e=1,n=this.options.legend.length+1;e<=n;e+=1)t[".q"+e]={};var i,o=this.root,r=["stroke","stroke-width","stroke-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-miterlimit","fill","fill-opacity","fill-rule","marker","marker-start","marker-mid","marker-end","alignement-baseline","baseline-shift","dominant-baseline","glyph-orientation-horizontal","glyph-orientation-vertical","kerning","text-anchor","shape-rendering","text-transform","font-family","font","font-size","font-weight"],a=function(e,n,i){-1!==r.indexOf(n)&&(t[e][n]=i)};for(var s in t)if(t.hasOwnProperty(s)){var l=(i=s,o.select(i)[0][0]);if(null!==l)if("getComputedStyle"in window){var u=getComputedStyle(l,null);if(0!==u.length)for(var c=0;c<u.length;c+=1)a(s,u.item(c),u.getPropertyValue(u.item(c)));else for(var h in u)u.hasOwnProperty(h)&&a(s,h,u[h])}else if("currentStyle"in l){var m=l.currentStyle;for(var g in m)a(s,g,m[g])}}var d='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><style type="text/css"><![CDATA[ ';for(var p in t){for(var f in d+=p+" {\n",t[p])d+="\t"+f+":"+t[p][f]+";\n";d+="}\n"}return d+="]]></style>",(d+=(new XMLSerializer).serializeToString(this.root[0][0]))+"</svg>"}};var _t=function(){this.positions=vt.map()};_t.prototype.getPosition=function(t){return this.positions.get(t)},_t.prototype.getPositionFromIndex=function(t){var e=this.getKeys();return this.positions.get(e[t])},_t.prototype.getLast=function(){var t=this.getKeys();return this.positions.get(t[t.length-1])},_t.prototype.setPosition=function(t,e){this.positions.set(t,e)},_t.prototype.shiftRightBy=function(t){this.positions.forEach((function(e,n){this.set(e,n-t)}));var e=this.getKeys();this.positions.remove(e[0])},_t.prototype.shiftLeftBy=function(t){this.positions.forEach((function(e,n){this.set(e,n+t)}));var e=this.getKeys();this.positions.remove(e[e.length-1])},_t.prototype.getKeys=function(){return this.positions.keys().sort((function(t,e){return parseInt(t,10)-parseInt(e,10)}))};var Mt=function(t){this.calendar=t,this.computeDim(),null!==t.options.legendColors&&this.buildColors()};function Tt(t,e){for(var n in e)try{e[n].constructor===Object?t[n]=Tt(t[n],e[n]):t[n]=e[n]}catch(i){t[n]=e[n]}return t}function St(t,e){if(!e||!t)return!1;if(t.length!==e.length)return!1;for(var n=0;n<t.length;n+=1)if(t[n]instanceof Array&&e[n]instanceof Array){if(!St(t[n],e[n]))return!1}else if(t[n]!==e[n])return!1;return!0}Mt.prototype.computeDim=function(){var t=this.calendar.options;this.dim={width:t.legendCellSize*(t.legend.length+1)+t.legendCellPadding*t.legend.length,height:t.legendCellSize}},Mt.prototype.remove=function(){this.calendar.root.select(".graph-legend").remove(),this.calendar.resize()},Mt.prototype.redraw=function(t){if(!this.calendar.options.displayLegend)return!1;var e,n=this,i=this.calendar,o=i.root,r=i.options;this.computeDim();var a=r.legend.slice(0);a.push(a[a.length-1]+1);var s=i.root.select(".graph-legend");function l(t){t.attr("width",r.legendCellSize).attr("height",r.legendCellSize).attr("rx",r.legendCellRadius).attr("ry",r.legendCellRadius).attr("x",(function(t,e){return e*(r.legendCellSize+r.legendCellPadding)}))}function u(){switch(r.legendHorizontalPosition){case"right":return"center"===r.legendVerticalPosition||"middle"===r.legendVerticalPosition?t+r.legendMargin[3]:t-n.getDim("width")-r.legendMargin[1];case"middle":case"center":return Math.round(t/2-n.getDim("width")/2);default:return r.legendMargin[3]}}function c(){return"bottom"===r.legendVerticalPosition?i.graphDim.height+r.legendMargin[0]-r.domainGutter-r.cellPadding:r.legendMargin[0]}null!==s[0][0]?e=(o=s).select("g").selectAll("rect").data(a):((o="top"===r.legendVerticalPosition?o.insert("svg",".graph"):o.append("svg")).attr("x",u()).attr("y",c()),e=o.attr("class","graph-legend").attr("height",n.getDim("height")).attr("width",n.getDim("width")).append("g").selectAll().data(a)),e.enter().append("rect").call(l).attr("class",(function(t){return i.Legend.getClass(t,null===i.legendScale)})).attr("fill-opacity",0).call((function(t){null!==i.legendScale&&null!==r.legendColors&&r.legendColors.hasOwnProperty("base")&&t.attr("fill",r.legendColors.base)})).append("title"),e.exit().transition().duration(r.animationDuration).attr("fill-opacity",0).remove(),e.transition().delay((function(t,e){return r.animationDuration*e/10})).call(l).attr("fill-opacity",1).call((function(t){t.attr("fill",(function(t,e){return null===i.legendScale?"":0===e?i.legendScale(t-1):i.legendScale(r.legend[e-1])})),t.attr("class",(function(t){return i.Legend.getClass(t,null===i.legendScale)}))})),e.select("title").text((function(t,e){return 0===e?i.formatStringWithObject(r.legendTitleFormat.lower,{min:r.legend[e],name:r.itemName[1]}):e===a.length-1?i.formatStringWithObject(r.legendTitleFormat.upper,{max:r.legend[e-1],name:r.itemName[1]}):i.formatStringWithObject(r.legendTitleFormat.inner,{down:r.legend[e-1],up:r.legend[e],name:r.itemName[1]})})),e.on("mouseover",(function(t){i.legendTip.show(t,this)})).on("mouseout",(function(){i.legendTip.hide()})),o.transition().duration(r.animationDuration).attr("x",u()).attr("y",c()).attr("width",n.getDim("width")).attr("height",n.getDim("height")),o.select("g").transition().duration(r.animationDuration).attr("transform",(function(){return"vertical"===r.legendOrientation?"rotate(90 "+r.legendCellSize/2+" "+r.legendCellSize/2+")":""})),i.resize()},Mt.prototype.getDim=function(t){var e="horizontal"===this.calendar.options.legendOrientation;switch(t){case"width":return this.dim[e?"width":"height"];case"height":return this.dim[e?"height":"width"]}},Mt.prototype.buildColors=function(){var t=this.calendar.options;if(null===t.legendColors)return this.calendar.legendScale=null,!1;var e=[];if(Array.isArray(t.legendColors))e=t.legendColors;else{if(!t.legendColors.hasOwnProperty("min")||!t.legendColors.hasOwnProperty("max"))return t.legendColors=null,!1;e=[t.legendColors.min,t.legendColors.max]}var n,i=t.legend.slice(0);i[0]>0?i.unshift(0):i[0]<=0&&i.unshift(i[0]-(i[i.length-1]-i[0])/i.length),n=t.legendColors.hasOwnProperty("colorScale")?t.legendColors.colorScale:vt.scale.linear().range(e).interpolate(vt.interpolateHcl).domain([vt.min(i),vt.max(i)]);var o=i.map((function(t){return n(t)}));return this.calendar.legendScale=vt.scale.threshold().domain(t.legend).range(o),!0},Mt.prototype.getClass=function(t,e){if(null===t||isNaN(t))return"";for(var n=[this.calendar.options.legend.length+1],i=0,o=this.calendar.options.legend.length-1;i<=o;i+=1){if(this.calendar.options.legend[0]>0&&t<0){n=["1","i"];break}if(t<=this.calendar.options.legend[i]){n=[i+1];break}}return 0===t&&n.push(0),n.unshift(""),(n.join(" r")+(e?n.join(" q"):"")).trim()};const Nt=xt,kt={data:o().shape({data:o().object,domain:o().string,range:o().number,start:o().number,subdomain:o().string}),height:o().number,cellPadding:o().number,cellRadius:o().number,cellSize:o().number,linearColorScheme:o().string,showLegend:o().bool,showMetricName:o().bool,showValues:o().bool,steps:o().number,timeFormatter:o().func,valueFormatter:o().func,verboseMap:o().object,theme:o().object};function Lt(t,e){const{data:n,height:i,cellPadding:o=3,cellRadius:r=0,cellSize:a=10,domainGranularity:s,linearColorScheme:c,showLegend:h,showMetricName:m,showValues:g,steps:d,subdomainGranularity:p,timeFormatter:f,valueFormatter:D,verboseMap:y,theme:w}=e,b=function(t){return"string"==typeof t?new ft([[document.querySelector(t)]],[document.documentElement]):new ft([[t]],pt)}(t).classed("superset-legacy-chart-calendar",!0).style("height",i);b.selectAll("*").remove();const v=b.append("div"),x=g?(t,e)=>D(e):null,_=n.data,M=(0,Dt.t)("Metric");Object.keys(_).forEach((t=>{const e=v.append("div");m&&e.text(`${M}: ${y[t]||t}`);const i=_[t],g=(0,l.A)(Object.keys(i),(t=>i[t])),b=(g[1]-g[0])/(d-1),T=(0,yt.A)().get(c).createLinearScale(g),S=(0,u.A)(d).map((t=>g[0]+b*t)),N=S.map((t=>T(t)));(new Nt).init({start:n.start,data:i,itemSelector:e.node(),legendVerticalPosition:"top",cellSize:a,cellPadding:o,cellRadius:r,legendCellSize:a,legendCellPadding:2,legendCellRadius:r,tooltip:!0,domain:s,subDomain:p,range:n.range,browsing:!0,legend:S,legendColors:{colorScale:T,min:N[0],max:N[N.length-1],empty:w.colorBgElevated},displayLegend:h,itemName:"",valueFormatter:D,timeFormatter:f,subDomainTextFormat:x})}))}Lt.displayName="Calendar",Lt.propTypes=kt;const Pt=Lt;var At=n(2445);const Ct=(0,r.A)(Pt),Ft=({className:t,...e})=>{const n=(0,a.DP)();return(0,At.FD)("div",{className:t,children:[(0,At.Y)(s.mL,{styles:s.AH`
          .d3-tip {
            line-height: 1;
            padding: ${3*n.sizeUnit}px;
            background: ${n.colorBgElevated};
            color: ${n.colorTextLightSolid};
            border-radius: 4px;
            pointer-events: none;
            z-index: 1000;
            font-size: ${n.fontSizeSM}px;
          }
          /* Creates a small triangle extender for the tooltip */
          .d3-tip:after {
            box-sizing: border-box;
            display: inline;
            font-size: ${n.fontSizeXS};
            width: 100%;
            line-height: 1;
            color: ${n.colorBgElevated};
            position: absolute;
            pointer-events: none;
          }
          /* Northward tooltips */
          .d3-tip.n:after {
            content: '\\25BC';
            margin: -${n.sizeUnit}px 0 0 0;
            top: 100%;
            left: 0;
            text-align: center;
          }
          /* Eastward tooltips */
          .d3-tip.e:after {
            content: '\\25C0';
            margin: -${n.sizeUnit}px 0 0 0;
            top: 50%;
            left: -${2*n.sizeUnit}px;
          }
          /* Southward tooltips */
          .d3-tip.s:after {
            content: '\\25B2';
            margin: 0;
            top: -${2*n.sizeUnit}px;
            left: 0;
            text-align: center;
          }
          /* Westward tooltips */
          .d3-tip.w:after {
            content: '\\25B6';
            margin: -${n.sizeUnit}px 0 0 0px;
            top: 50%;
            left: 100%;
          }
        `}),(0,At.Y)(Ct,{...e,theme:n})]})};Ft.defaultProps={otherProps:{}},Ft.propTypes={className:o().string.isRequired,otherProps:o().objectOf(o().any)};const Et=(0,a.I4)(Ft)`
  ${({theme:t})=>`\n    .superset-legacy-chart-calendar {\n      padding: ${3*t.sizeUnit}px;\n      position: static !important;\n      overflow: auto !important;\n    }\n\n    .superset-legacy-chart-calendar .ch-tooltip {\n      margin-left: ${5*t.sizeUnit}px;\n      margin-top: ${t.sizeUnit}px;\n    }\n\n    .superset-legacy-chart-calendar .d3-tip {\n      line-height: 1;\n      padding: ${3*t.sizeUnit}px;\n      background: ${t.colorBgElevated};\n      color: ${t.colorTextLightSolid};\n      border-radius: ${t.borderRadius}px;\n      pointer-events: none;\n      z-index: 1000;\n    }\n\n    .cal-heatmap-container {\n      display: block;\n    }\n\n    .cal-heatmap-container .graph-label {\n      fill: ${t.colorTextTertiary};\n      font-size: ${t.fontSizeXS}px;\n    }\n\n    .cal-heatmap-container .graph,\n    .cal-heatmap-container .graph-legend rect {\n      shape-rendering: crispedges;\n    }\n\n    .cal-heatmap-container .graph-rect {\n      fill: ${t.colorBorder};\n    }\n\n    .cal-heatmap-container .graph-subdomain-group rect:hover {\n      stroke: ${t.colorBgElevated};\n      stroke-width: 1px;\n    }\n\n    .cal-heatmap-container .subdomain-text {\n      font-size: ${t.fontSizeXS}px;\n      pointer-events: none;\n    }\n\n    .cal-heatmap-container .hover_cursor:hover {\n      cursor: pointer;\n    }\n\n    .cal-heatmap-container .qi {\n      background-color: ${t.colorTextTertiary};\n      fill: ${t.colorTextTertiary};\n    }\n\n    .cal-heatmap-container .q1 {\n      background-color: ${t.colorWarningBg};\n      fill: ${t.colorWarningBg};\n    }\n\n    .cal-heatmap-container .q2 {\n      background-color: ${t.colorWarning};\n      fill: ${t.colorWarning};\n    }\n\n    .cal-heatmap-container .q3 {\n      background-color: ${t.colorSuccess};\n      fill: ${t.colorSuccess};\n    }\n\n    .cal-heatmap-container .q4 {\n      background-color: ${t.colorSuccess};\n      fill: ${t.colorSuccess};\n    }\n\n    .cal-heatmap-container .q5 {\n      background-color: ${t.colorSuccessActive};\n      fill: ${t.colorSuccessActive};\n    }\n\n    .cal-heatmap-container rect.highlight {\n      stroke: ${t.colorText};\n      stroke-width: 1;\n    }\n\n    .cal-heatmap-container text.highlight {\n      fill: ${t.colorText};\n    }\n\n    .cal-heatmap-container rect.highlight-now {\n      stroke: ${t.colorError};\n    }\n\n    .cal-heatmap-container text.highlight-now {\n      fill: ${t.colorError};\n      font-weight: ${t.fontWeightStrong};\n    }\n\n    .cal-heatmap-container .domain-background {\n      fill: none;\n      shape-rendering: crispedges;\n    }\n\n    .ch-tooltip {\n      padding: ${2*t.sizeUnit}px;\n      background: ${t.colorText};\n      color: ${t.colorTextLightSolid};\n      font-size: ${t.fontSizeSM}px;\n      line-height: 1.4;\n      width: 140px;\n      position: absolute;\n      z-index: 99999;\n      text-align: center;\n      border-radius: ${t.borderRadius}px;\n      box-shadow: 2px 2px 2px ${t.colorBorder};\n      display: none;\n      box-sizing: border-box;\n    }\n\n    .ch-tooltip::after {\n      position: absolute;\n      width: 0;\n      height: 0;\n      border-color: transparent;\n      border-style: solid;\n      content: '';\n      padding: 0;\n      display: block;\n      bottom: -${t.sizeUnit}px;\n      left: 50%;\n      margin-left: -${t.sizeUnit}px;\n      border-width: ${t.sizeUnit}px ${t.sizeUnit}px 0;\n      border-top-color: ${t.colorSplit};\n    }\n  `}
`}}]);