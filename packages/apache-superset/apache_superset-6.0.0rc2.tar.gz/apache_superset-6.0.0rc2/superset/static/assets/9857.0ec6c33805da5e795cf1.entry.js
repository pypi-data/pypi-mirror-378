"use strict";(globalThis.webpackChunksuperset=globalThis.webpackChunksuperset||[]).push([[9857],{9857:(e,n,t)=>{t.d(n,{A:()=>D});var o=t(58168),r=t(89379),i=t(64467),a=t(5544),c=t(82284),l=t(80045),s=t(46942),u=t.n(s);function f(){return{width:document.documentElement.clientWidth,height:window.innerHeight||document.documentElement.clientHeight}}var m=t(12533),d=t(96540),v=t(33766),p=t(69916),g=t(16928),h=t(45062),C=t(90754),A=d.createContext(null);const b=function(e){var n=e.visible,t=e.maskTransitionName,o=e.getContainer,a=e.prefixCls,c=e.rootClassName,l=e.icons,s=e.countRender,f=e.showSwitch,m=e.showProgress,v=e.current,p=e.transform,b=e.count,w=e.scale,y=e.minScale,x=e.maxScale,k=e.closeIcon,R=e.onActive,E=e.onClose,S=e.onZoomIn,T=e.onZoomOut,N=e.onRotateRight,I=e.onRotateLeft,Y=e.onFlipX,X=e.onFlipY,P=e.onReset,M=e.toolbarRender,z=e.zIndex,L=e.image,Z=(0,d.useContext)(A),O=l.rotateLeft,F=l.rotateRight,W=l.zoomIn,D=l.zoomOut,H=l.close,j=l.left,V=l.right,B=l.flipX,G=l.flipY,U="".concat(a,"-operations-operation");d.useEffect((function(){var e=function(e){e.keyCode===g.A.ESC&&E()};return n&&window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}}),[n]);var $=function(e,n){e.preventDefault(),e.stopPropagation(),R(n)},q=d.useCallback((function(e){var n=e.type,t=e.disabled,o=e.onClick,r=e.icon;return d.createElement("div",{key:n,className:u()(U,"".concat(a,"-operations-operation-").concat(n),(0,i.A)({},"".concat(a,"-operations-operation-disabled"),!!t)),onClick:o},r)}),[U,a]),J=f?q({icon:j,onClick:function(e){return $(e,-1)},type:"prev",disabled:0===v}):void 0,K=f?q({icon:V,onClick:function(e){return $(e,1)},type:"next",disabled:v===b-1}):void 0,Q=q({icon:G,onClick:X,type:"flipY"}),_=q({icon:B,onClick:Y,type:"flipX"}),ee=q({icon:O,onClick:I,type:"rotateLeft"}),ne=q({icon:F,onClick:N,type:"rotateRight"}),te=q({icon:D,onClick:T,type:"zoomOut",disabled:w<=y}),oe=q({icon:W,onClick:S,type:"zoomIn",disabled:w===x}),re=d.createElement("div",{className:"".concat(a,"-operations")},Q,_,ee,ne,te,oe);return d.createElement(C.Ay,{visible:n,motionName:t},(function(e){var n=e.className,t=e.style;return d.createElement(h.A,{open:!0,getContainer:null!=o?o:document.body},d.createElement("div",{className:u()("".concat(a,"-operations-wrapper"),n,c),style:(0,r.A)((0,r.A)({},t),{},{zIndex:z})},null===k?null:d.createElement("button",{className:"".concat(a,"-close"),onClick:E},k||H),f&&d.createElement(d.Fragment,null,d.createElement("div",{className:u()("".concat(a,"-switch-left"),(0,i.A)({},"".concat(a,"-switch-left-disabled"),0===v)),onClick:function(e){return $(e,-1)}},j),d.createElement("div",{className:u()("".concat(a,"-switch-right"),(0,i.A)({},"".concat(a,"-switch-right-disabled"),v===b-1)),onClick:function(e){return $(e,1)}},V)),d.createElement("div",{className:"".concat(a,"-footer")},m&&d.createElement("div",{className:"".concat(a,"-progress")},s?s(v+1,b):d.createElement("bdi",null,"".concat(v+1," / ").concat(b))),M?M(re,(0,r.A)((0,r.A)({icons:{prevIcon:J,nextIcon:K,flipYIcon:Q,flipXIcon:_,rotateLeftIcon:ee,rotateRightIcon:ne,zoomOutIcon:te,zoomInIcon:oe},actions:{onActive:R,onFlipY:X,onFlipX:Y,onRotateLeft:I,onRotateRight:N,onZoomOut:T,onZoomIn:S,onReset:P,onClose:E},transform:p},Z?{current:v,total:b}:{}),{},{image:L})):re)))}))};var w=t(43210),y=t(25371),x={x:0,y:0,rotate:0,scale:1,flipX:!1,flipY:!1},k=t(68210);function R(e,n,t,o){var r=n+t,a=(t-o)/2;if(t>o){if(n>0)return(0,i.A)({},e,a);if(n<0&&r<o)return(0,i.A)({},e,-a)}else if(n<0||r>o)return(0,i.A)({},e,n<0?a:-a);return{}}function E(e,n,t,o){var i=f(),a=i.width,c=i.height,l=null;return e<=a&&n<=c?l={x:0,y:0}:(e>a||n>c)&&(l=(0,r.A)((0,r.A)({},R("x",t,e,a)),R("y",o,n,c))),l}function S(e){var n=e.src,t=e.isCustomPlaceholder,o=e.fallback,r=(0,d.useState)(t?"loading":"normal"),i=(0,a.A)(r,2),c=i[0],l=i[1],s=(0,d.useRef)(!1),u="error"===c;(0,d.useEffect)((function(){var e=!0;return function(e){return new Promise((function(n){if(e){var t=document.createElement("img");t.onerror=function(){return n(!1)},t.onload=function(){return n(!0)},t.src=e}else n(!1)}))}(n).then((function(n){!n&&e&&l("error")})),function(){e=!1}}),[n]),(0,d.useEffect)((function(){t&&!s.current?l("loading"):u&&l("normal")}),[n]);var f=function(){l("normal")};return[function(e){s.current=!1,"loading"===c&&null!=e&&e.complete&&(e.naturalWidth||e.naturalHeight)&&(s.current=!0,f())},u&&o?{src:o}:{onLoad:f,src:n},c]}function T(e,n){var t=e.x-n.x,o=e.y-n.y;return Math.hypot(t,o)}var N=["fallback","src","imgRef"],I=["prefixCls","src","alt","imageInfo","fallback","movable","onClose","visible","icons","rootClassName","closeIcon","getContainer","current","count","countRender","scaleStep","minScale","maxScale","transitionName","maskTransitionName","imageRender","imgCommonProps","toolbarRender","onTransform","onChange"],Y=function(e){var n=e.fallback,t=e.src,r=e.imgRef,i=(0,l.A)(e,N),c=S({src:t,fallback:n}),s=(0,a.A)(c,2),u=s[0],f=s[1];return d.createElement("img",(0,o.A)({ref:function(e){r.current=e,u(e)}},i,f))};const X=function(e){var n=e.prefixCls,t=e.src,c=e.alt,s=e.imageInfo,m=e.fallback,h=e.movable,C=void 0===h||h,R=e.onClose,S=e.visible,N=e.icons,X=void 0===N?{}:N,P=e.rootClassName,M=e.closeIcon,z=e.getContainer,L=e.current,Z=void 0===L?0:L,O=e.count,F=void 0===O?1:O,W=e.countRender,D=e.scaleStep,H=void 0===D?.5:D,j=e.minScale,V=void 0===j?1:j,B=e.maxScale,G=void 0===B?50:B,U=e.transitionName,$=void 0===U?"zoom":U,q=e.maskTransitionName,J=void 0===q?"fade":q,K=e.imageRender,Q=e.imgCommonProps,_=e.toolbarRender,ee=e.onTransform,ne=e.onChange,te=(0,l.A)(e,I),oe=(0,d.useRef)(),re=(0,d.useContext)(A),ie=re&&F>1,ae=re&&F>=1,ce=(0,d.useState)(!0),le=(0,a.A)(ce,2),se=le[0],ue=le[1],fe=function(e,n,t,o){var i=(0,d.useRef)(null),c=(0,d.useRef)([]),l=(0,d.useState)(x),s=(0,a.A)(l,2),u=s[0],m=s[1],v=function(e,n){null===i.current&&(c.current=[],i.current=(0,y.A)((function(){m((function(e){var t=e;return c.current.forEach((function(e){t=(0,r.A)((0,r.A)({},t),e)})),i.current=null,null==o||o({transform:t,action:n}),t}))}))),c.current.push((0,r.A)((0,r.A)({},u),e))};return{transform:u,resetTransform:function(e){m(x),(0,w.A)(x,u)||null==o||o({transform:x,action:e})},updateTransform:v,dispatchZoomChange:function(o,r,i,a,c){var l=e.current,s=l.width,m=l.height,d=l.offsetWidth,p=l.offsetHeight,g=l.offsetLeft,h=l.offsetTop,C=o,A=u.scale*o;A>t?(A=t,C=t/u.scale):A<n&&(C=(A=c?A:n)/u.scale);var b=null!=i?i:innerWidth/2,w=null!=a?a:innerHeight/2,y=C-1,x=y*s*.5,k=y*m*.5,R=y*(b-u.x-g),E=y*(w-u.y-h),S=u.x-(R-x),T=u.y-(E-k);if(o<1&&1===A){var N=d*A,I=p*A,Y=f(),X=Y.width,P=Y.height;N<=X&&I<=P&&(S=0,T=0)}v({x:S,y:T,scale:A},r)}}}(oe,V,G,ee),me=fe.transform,de=fe.resetTransform,ve=fe.updateTransform,pe=fe.dispatchZoomChange,ge=function(e,n,t,o,i,c,l){var s=i.rotate,u=i.scale,f=i.x,m=i.y,v=(0,d.useState)(!1),g=(0,a.A)(v,2),h=g[0],C=g[1],A=(0,d.useRef)({diffX:0,diffY:0,transformX:0,transformY:0}),b=function(e){t&&h&&c({x:e.pageX-A.current.diffX,y:e.pageY-A.current.diffY},"move")},w=function(){if(t&&h){C(!1);var n=A.current,o=n.transformX,i=n.transformY;if(f===o||m===i)return;var a=e.current.offsetWidth*u,l=e.current.offsetHeight*u,d=e.current.getBoundingClientRect(),v=d.left,p=d.top,g=s%180!=0,b=E(g?l:a,g?a:l,v,p);b&&c((0,r.A)({},b),"dragRebound")}};return(0,d.useEffect)((function(){var e,t,o,r;if(n){o=(0,p.A)(window,"mouseup",w,!1),r=(0,p.A)(window,"mousemove",b,!1);try{window.top!==window.self&&(e=(0,p.A)(window.top,"mouseup",w,!1),t=(0,p.A)(window.top,"mousemove",b,!1))}catch(e){(0,k.$e)(!1,"[rc-image] ".concat(e))}}return function(){var n,i,a,c;null===(n=o)||void 0===n||n.remove(),null===(i=r)||void 0===i||i.remove(),null===(a=e)||void 0===a||a.remove(),null===(c=t)||void 0===c||c.remove()}}),[t,h,f,m,s,n]),{isMoving:h,onMouseDown:function(e){n&&0===e.button&&(e.preventDefault(),e.stopPropagation(),A.current={diffX:e.pageX-f,diffY:e.pageY-m,transformX:f,transformY:m},C(!0))},onMouseMove:b,onMouseUp:w,onWheel:function(e){if(t&&0!=e.deltaY){var n=Math.abs(e.deltaY/100),r=1+Math.min(n,1)*o;e.deltaY>0&&(r=1/r),l(r,"wheel",e.clientX,e.clientY)}}}}(oe,C,S,H,me,ve,pe),he=ge.isMoving,Ce=ge.onMouseDown,Ae=ge.onWheel,be=function(e,n,t,o,i,c,l){var s=i.rotate,u=i.scale,f=i.x,m=i.y,v=(0,d.useState)(!1),g=(0,a.A)(v,2),h=g[0],C=g[1],A=(0,d.useRef)({point1:{x:0,y:0},point2:{x:0,y:0},eventType:"none"}),b=function(e){A.current=(0,r.A)((0,r.A)({},A.current),e)};return(0,d.useEffect)((function(){var e;return t&&n&&(e=(0,p.A)(window,"touchmove",(function(e){return e.preventDefault()}),{passive:!1})),function(){var n;null===(n=e)||void 0===n||n.remove()}}),[t,n]),{isTouching:h,onTouchStart:function(e){if(n){e.stopPropagation(),C(!0);var t=e.touches,o=void 0===t?[]:t;o.length>1?b({point1:{x:o[0].clientX,y:o[0].clientY},point2:{x:o[1].clientX,y:o[1].clientY},eventType:"touchZoom"}):b({point1:{x:o[0].clientX-f,y:o[0].clientY-m},eventType:"move"})}},onTouchMove:function(e){var n=e.touches,t=void 0===n?[]:n,o=A.current,r=o.point1,i=o.point2,s=o.eventType;if(t.length>1&&"touchZoom"===s){var u={x:t[0].clientX,y:t[0].clientY},f={x:t[1].clientX,y:t[1].clientY},m=function(e,n,t,o){var r=T(e,t),i=T(n,o);if(0===r&&0===i)return[e.x,e.y];var a=r/(r+i);return[e.x+a*(n.x-e.x),e.y+a*(n.y-e.y)]}(r,i,u,f),d=(0,a.A)(m,2),v=d[0],p=d[1],g=T(u,f)/T(r,i);l(g,"touchZoom",v,p,!0),b({point1:u,point2:f,eventType:"touchZoom"})}else"move"===s&&(c({x:t[0].clientX-r.x,y:t[0].clientY-r.y},"move"),b({eventType:"move"}))},onTouchEnd:function(){if(t){if(h&&C(!1),b({eventType:"none"}),o>u)return c({x:0,y:0,scale:o},"touchZoom");var n=e.current.offsetWidth*u,i=e.current.offsetHeight*u,a=e.current.getBoundingClientRect(),l=a.left,f=a.top,m=s%180!=0,d=E(m?i:n,m?n:i,l,f);d&&c((0,r.A)({},d),"dragRebound")}}}}(oe,C,S,V,me,ve,pe),we=be.isTouching,ye=be.onTouchStart,xe=be.onTouchMove,ke=be.onTouchEnd,Re=me.rotate,Ee=me.scale,Se=u()((0,i.A)({},"".concat(n,"-moving"),he));(0,d.useEffect)((function(){se||ue(!0)}),[se]);var Te=function(e){var n=Z+e;!Number.isInteger(n)||n<0||n>F-1||(ue(!1),de(e<0?"prev":"next"),null==ne||ne(n,Z))},Ne=function(e){S&&ie&&(e.keyCode===g.A.LEFT?Te(-1):e.keyCode===g.A.RIGHT&&Te(1))};(0,d.useEffect)((function(){var e=(0,p.A)(window,"keydown",Ne,!1);return function(){e.remove()}}),[S,ie,Z]);var Ie=d.createElement(Y,(0,o.A)({},Q,{width:e.width,height:e.height,imgRef:oe,className:"".concat(n,"-img"),alt:c,style:{transform:"translate3d(".concat(me.x,"px, ").concat(me.y,"px, 0) scale3d(").concat(me.flipX?"-":"").concat(Ee,", ").concat(me.flipY?"-":"").concat(Ee,", 1) rotate(").concat(Re,"deg)"),transitionDuration:(!se||we)&&"0s"},fallback:m,src:t,onWheel:Ae,onMouseDown:Ce,onDoubleClick:function(e){S&&(1!==Ee?ve({x:0,y:0,scale:1},"doubleClick"):pe(1+H,"doubleClick",e.clientX,e.clientY))},onTouchStart:ye,onTouchMove:xe,onTouchEnd:ke,onTouchCancel:ke})),Ye=(0,r.A)({url:t,alt:c},s);return d.createElement(d.Fragment,null,d.createElement(v.A,(0,o.A)({transitionName:$,maskTransitionName:J,closable:!1,keyboard:!0,prefixCls:n,onClose:R,visible:S,classNames:{wrapper:Se},rootClassName:P,getContainer:z},te,{afterClose:function(){de("close")}}),d.createElement("div",{className:"".concat(n,"-img-wrapper")},K?K(Ie,(0,r.A)({transform:me,image:Ye},re?{current:Z}:{})):Ie)),d.createElement(b,{visible:S,transform:me,maskTransitionName:J,closeIcon:M,getContainer:z,prefixCls:n,rootClassName:P,icons:X,countRender:W,showSwitch:ie,showProgress:ae,current:Z,count:F,scale:Ee,minScale:V,maxScale:G,toolbarRender:_,onActive:Te,onZoomIn:function(){pe(1+H,"zoomIn")},onZoomOut:function(){pe(1/(1+H),"zoomOut")},onRotateRight:function(){ve({rotate:Re+90},"rotateRight")},onRotateLeft:function(){ve({rotate:Re-90},"rotateLeft")},onFlipX:function(){ve({flipX:!me.flipX},"flipX")},onFlipY:function(){ve({flipY:!me.flipY},"flipY")},onClose:R,onReset:function(){de("reset")},zIndex:void 0!==te.zIndex?te.zIndex+1:void 0,image:Ye}))};var P=t(60436),M=["crossOrigin","decoding","draggable","loading","referrerPolicy","sizes","srcSet","useMap","alt"],z=["visible","onVisibleChange","getContainer","current","movable","minScale","maxScale","countRender","closeIcon","onChange","onTransform","toolbarRender","imageRender"],L=["src"],Z=0,O=["src","alt","onPreviewClose","prefixCls","previewPrefixCls","placeholder","fallback","width","height","style","preview","className","onClick","onError","wrapperClassName","wrapperStyle","rootClassName"],F=["src","visible","onVisibleChange","getContainer","mask","maskClassName","movable","icons","scaleStep","minScale","maxScale","imageRender","toolbarRender"],W=function(e){var n=e.src,t=e.alt,s=e.onPreviewClose,f=e.prefixCls,v=void 0===f?"rc-image":f,p=e.previewPrefixCls,g=void 0===p?"".concat(v,"-preview"):p,h=e.placeholder,C=e.fallback,b=e.width,w=e.height,y=e.style,x=e.preview,k=void 0===x||x,R=e.className,E=e.onClick,T=e.onError,N=e.wrapperClassName,I=e.wrapperStyle,Y=e.rootClassName,P=(0,l.A)(e,O),z=h&&!0!==h,L="object"===(0,c.A)(k)?k:{},W=L.src,D=L.visible,H=void 0===D?void 0:D,j=L.onVisibleChange,V=void 0===j?s:j,B=L.getContainer,G=void 0===B?void 0:B,U=L.mask,$=L.maskClassName,q=L.movable,J=L.icons,K=L.scaleStep,Q=L.minScale,_=L.maxScale,ee=L.imageRender,ne=L.toolbarRender,te=(0,l.A)(L,F),oe=null!=W?W:n,re=(0,m.A)(!!H,{value:H,onChange:V}),ie=(0,a.A)(re,2),ae=ie[0],ce=ie[1],le=S({src:n,isCustomPlaceholder:z,fallback:C}),se=(0,a.A)(le,3),ue=se[0],fe=se[1],me=se[2],de=(0,d.useState)(null),ve=(0,a.A)(de,2),pe=ve[0],ge=ve[1],he=(0,d.useContext)(A),Ce=!!k,Ae=u()(v,N,Y,(0,i.A)({},"".concat(v,"-error"),"error"===me)),be=(0,d.useMemo)((function(){var n={};return M.forEach((function(t){void 0!==e[t]&&(n[t]=e[t])})),n}),M.map((function(n){return e[n]}))),we=function(e,n){var t=d.useState((function(){return String(Z+=1)})),o=(0,a.A)(t,1)[0],r=d.useContext(A),i={data:n,canPreview:e};return d.useEffect((function(){if(r)return r.register(o,i)}),[]),d.useEffect((function(){r&&r.register(o,i)}),[e,n]),o}(Ce,(0,d.useMemo)((function(){return(0,r.A)((0,r.A)({},be),{},{src:oe})}),[oe,be]));return d.createElement(d.Fragment,null,d.createElement("div",(0,o.A)({},P,{className:Ae,onClick:Ce?function(e){var n,t,o=(n=e.target.getBoundingClientRect(),t=document.documentElement,{left:n.left+(window.pageXOffset||t.scrollLeft)-(t.clientLeft||document.body.clientLeft||0),top:n.top+(window.pageYOffset||t.scrollTop)-(t.clientTop||document.body.clientTop||0)}),r=o.left,i=o.top;he?he.onPreview(we,oe,r,i):(ge({x:r,y:i}),ce(!0)),null==E||E(e)}:E,style:(0,r.A)({width:b,height:w},I)}),d.createElement("img",(0,o.A)({},be,{className:u()("".concat(v,"-img"),(0,i.A)({},"".concat(v,"-img-placeholder"),!0===h),R),style:(0,r.A)({height:w},y),ref:ue},fe,{width:b,height:w,onError:T})),"loading"===me&&d.createElement("div",{"aria-hidden":"true",className:"".concat(v,"-placeholder")},h),U&&Ce&&d.createElement("div",{className:u()("".concat(v,"-mask"),$),style:{display:"none"===(null==y?void 0:y.display)?"none":void 0}},U)),!he&&Ce&&d.createElement(X,(0,o.A)({"aria-hidden":!ae,visible:ae,prefixCls:g,onClose:function(){ce(!1),ge(null)},mousePosition:pe,src:oe,alt:t,imageInfo:{width:b,height:w},fallback:C,getContainer:G,icons:J,movable:q,scaleStep:K,minScale:Q,maxScale:_,rootClassName:Y,imageRender:ee,imgCommonProps:be,toolbarRender:ne},te)))};W.PreviewGroup=function(e){var n,t=e.previewPrefixCls,s=void 0===t?"rc-image-preview":t,u=e.children,f=e.icons,v=void 0===f?{}:f,p=e.items,g=e.preview,h=e.fallback,C="object"===(0,c.A)(g)?g:{},b=C.visible,w=C.onVisibleChange,y=C.getContainer,x=C.current,k=C.movable,R=C.minScale,E=C.maxScale,S=C.countRender,T=C.closeIcon,N=C.onChange,I=C.onTransform,Y=C.toolbarRender,Z=C.imageRender,O=(0,l.A)(C,z),F=function(e){var n=d.useState({}),t=(0,a.A)(n,2),o=t[0],c=t[1],l=d.useCallback((function(e,n){return c((function(t){return(0,r.A)((0,r.A)({},t),{},(0,i.A)({},e,n))})),function(){c((function(n){var t=(0,r.A)({},n);return delete t[e],t}))}}),[]);return[d.useMemo((function(){return e?e.map((function(e){if("string"==typeof e)return{data:{src:e}};var n={};return Object.keys(e).forEach((function(t){["src"].concat((0,P.A)(M)).includes(t)&&(n[t]=e[t])})),{data:n}})):Object.keys(o).reduce((function(e,n){var t=o[n],r=t.canPreview,i=t.data;return r&&e.push({data:i,id:n}),e}),[])}),[e,o]),l,!!e]}(p),W=(0,a.A)(F,3),D=W[0],H=W[1],j=W[2],V=(0,m.A)(0,{value:x}),B=(0,a.A)(V,2),G=B[0],U=B[1],$=(0,d.useState)(!1),q=(0,a.A)($,2),J=q[0],K=q[1],Q=(null===(n=D[G])||void 0===n?void 0:n.data)||{},_=Q.src,ee=(0,l.A)(Q,L),ne=(0,m.A)(!!b,{value:b,onChange:function(e,n){null==w||w(e,n,G)}}),te=(0,a.A)(ne,2),oe=te[0],re=te[1],ie=(0,d.useState)(null),ae=(0,a.A)(ie,2),ce=ae[0],le=ae[1],se=d.useCallback((function(e,n,t,o){var r=j?D.findIndex((function(e){return e.data.src===n})):D.findIndex((function(n){return n.id===e}));U(r<0?0:r),re(!0),le({x:t,y:o}),K(!0)}),[D,j]);d.useEffect((function(){oe?J||U(0):K(!1)}),[oe]);var ue=d.useMemo((function(){return{register:H,onPreview:se}}),[H,se]);return d.createElement(A.Provider,{value:ue},u,d.createElement(X,(0,o.A)({"aria-hidden":!oe,movable:k,visible:oe,prefixCls:s,closeIcon:T,onClose:function(){re(!1),le(null)},mousePosition:ce,imgCommonProps:ee,src:_,fallback:h,icons:v,minScale:R,maxScale:E,getContainer:y,current:G,count:D.length,countRender:S,onTransform:I,toolbarRender:Y,imageRender:Z,onChange:function(e,n){U(e),null==N||N(e,n)}},O)))};const D=W}}]);