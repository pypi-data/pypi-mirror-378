"""
Guest requests upgrade to bamboo eco sheets in king size and a spare set; verify inventory, deliver, and schedule remake.

ROLES: user (guest preferring eco/hypoallergenic sheets), assistant (housekeeping coordinator with linen access)
CHANNELS: analysis, commentary, final. Channel must be included for every message.
TOOLS:
```json
[
  {
    "name": "check_linen_inventory",
    "description": "Check availability of sheet collections and sizes.",
    "parameters": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "collection": { "type": "string", "enum": ["standard_300tc", "luxury_600tc", "bamboo_eco", "silk_1000tc"] },
        "size": { "type": "string", "enum": ["king", "queen", "twin"] }
      },
      "required": ["collection", "size"]
    },
    "strict": true
  },
  {
    "name": "order_linen_delivery",
    "description": "Deliver specified sheet collection to room.",
    "parameters": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "room_number": { "type": "string" },
        "collection": { "type": "string", "enum": ["standard_300tc", "luxury_600tc", "bamboo_eco", "silk_1000tc"] },
        "size": { "type": "string", "enum": ["king", "queen", "twin"] },
        "quantity_sets": { "type": "integer", "minimum": 1, "maximum": 4 }
      },
      "required": ["room_number", "collection", "size", "quantity_sets"]
    },
    "strict": true
  },
  {
    "name": "schedule_bed_service",
    "description": "Schedule housekeeping to remake bed with specified sheets.",
    "parameters": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "room_number": { "type": "string" },
        "collection": { "type": "string", "enum": ["standard_300tc", "luxury_600tc", "bamboo_eco", "silk_1000tc"] },
        "preferred_time": { "type": "string", "description": "HH:MM in 24h local time" }
      },
      "required": ["room_number", "collection"]
    },
    "strict": true
  }
]
```
"""

system:
Hotel: Evergreen Urban Retreat Portland (hotel_id: eur_pdx_02)
Address: 225 SW Broadway, Portland, OR 97205
Timezone: America/Los_Angeles

Linen Collections:
- standard_300tc: cotton percale
- luxury_600tc: Egyptian cotton sateen
- bamboo_eco: organic bamboo, hypoallergenic, breathable
- silk_1000tc: mulberry silk

Service Windows:
- Same-day changes: 08:00–22:00
- Priority slots: 15:30–18:00
- Delivery ETA: 20–40 minutes typical
- Policy: up to 2 spare sets delivered upon request
- Contact: Housekeeping ext 61

Allergen-Friendly Notes:
- Bamboo line is hypoallergenic and moisture-wicking
- Fragrance-free laundering for bamboo_eco
- Spare pillowcases available on request
- Mattress protectors on hand (separate request)
- Turn-down 19:00–21:00 upon request

user:
Hi—could I switch to bamboo_eco king sheets and have an extra set left in the closet? I’m in 1724. If possible, 17:00 remake.

assistant channel=analysis:
Check inventory bamboo_eco king; order 2 sets (remake + spare); schedule bed service at 17:00.

assistant channel=commentary to=tool.check_linen_inventory:
{"collection":"bamboo_eco","size":"king"}

tool.check_linen_inventory channel=commentary to=assistant:
{"collection":"bamboo_eco","size":"king","available_sets":9,"estimated_delivery_minutes":30}

assistant channel=analysis:
Inventory sufficient; order 2 sets to 1724; schedule 17:00 within same-day window.

assistant channel=commentary to=tool.order_linen_delivery:
{"room_number":"1724","collection":"bamboo_eco","size":"king","quantity_sets":2}

tool.order_linen_delivery channel=commentary to=assistant:
{"room_number":"1724","collection":"bamboo_eco","size":"king","quantity_sets":2,"delivery_eta_minutes":30,"delivery_id":"LINEN-BK-4420"}

assistant channel=commentary to=tool.schedule_bed_service:
{"room_number":"1724","collection":"bamboo_eco","preferred_time":"17:00"}

tool.schedule_bed_service channel=commentary to=assistant:
{"scheduled":true,"room_number":"1724","collection":"bamboo_eco","window":"16:50–17:20"}

assistant channel=final:
All set—two bamboo_eco king sets are en route (ETA ~30 minutes). We’ll remake at 17:00 with a 16:50–17:20 window and leave the spare set in your closet.

user:
Are same-day changes available until 22:00?

assistant channel=analysis:
Answer from system.

assistant channel=final:
Yes—same-day sheet changes run from 08:00 to 22:00.

user:
Thanks! Lobby plants look great.

assistant channel=analysis:
Chit-chat.

assistant channel=final:
Thank you—see you at 17:00.

user:
Could you recommend a nearby vegan bakery?

assistant channel=analysis:
Beyond linen scope; attention flag.

assistant channel=final:
[ATTENTION] I can look up vegan bakeries nearby and share options.
