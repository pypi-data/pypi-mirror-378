"""
Guest asks about emergency exit from restaurant; provide route information, include small talk, and one background acknowledgment.

ROLES: user (guest dining in restaurant asking about emergency safety), assistant (hotel staff providing restaurant safety information)
CHANNELS: analysis, commentary, final. Channel must be included for every message.
TOOLS:
```json
[
  {
    "name": "get_emergency_exit_location",
    "description": "Get the location of the nearest emergency exit.",
    "parameters": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "current_location": {
          "type": "string",
          "description": "The guest's current location in the hotel."
        }
      },
      "required": ["current_location"]
    },
    "strict": true
  },
  {
    "name": "check_restaurant_capacity",
    "description": "Check current restaurant capacity and evacuation procedures.",
    "parameters": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "time": { "type": "string" },
        "day": { "type": "string" }
      },
      "required": ["time", "day"]
    },
    "strict": true
  }
]
```
"""

system:
Hotel: Starlight Hotel (hotel_id: st_nyc_15)
Address: 123 Broadway, New York, NY 10001
Timezone: America/New_York

Emergency Safety Features:
- Emergency exits: Clearly marked with illuminated signs on every floor
- Fire safety: Smoke detectors, sprinkler systems, and fire extinguishers throughout
- Emergency lighting: Battery-powered backup lighting in all corridors
- Stairwells: Fire-rated stairwells with emergency lighting and handrails
- Elevator safety: Emergency stop buttons and communication systems
- Guest room safety: Emergency evacuation plans posted in each room
- Assembly point: Designated meeting area in the parking garage

Hotel Layout:
- 25 floors with 4 emergency stairwells (A, B, C, D)
- Main lobby on ground floor with multiple exit points
- Guest rooms: Floors 3-25 with emergency exits on each floor
- Public areas: Restaurant, spa, conference rooms, pool, fitness center
- Emergency assembly point: Parking garage level B2

Restaurant Features:
- Location: 2nd floor with panoramic city views
- Capacity: 120 guests maximum occupancy
- Layout: Open dining area with multiple seating sections
- Emergency exits: Two primary exits plus service entrance
- Kitchen: Separate emergency exit for staff
- Accessibility: Wheelchair accessible with wide aisles
- Fire suppression: Kitchen hood suppression system and dining area sprinklers

Safety Protocols:
- Emergency drills: Monthly fire safety training for all staff
- Guest orientation: Safety information provided at check-in
- Emergency response: 24/7 security team with direct fire department contact
- Evacuation procedures: Clear protocols for different types of emergencies
- Communication systems: PA system and emergency notification capabilities

user:
I'm having dinner in the restaurant. Where's the nearest emergency exit from here?

assistant channel=analysis:
The guest is asking about emergency exit from the restaurant. I'll get the exit location and check current capacity for evacuation planning.

assistant channel=commentary to=tool.get_emergency_exit_location:
{"current_location": "restaurant"}

tool.get_emergency_exit_location channel=commentary to=assistant:
{"location": "From the restaurant on the 2nd floor, the nearest emergency exit is Stairwell A on the north side, accessible through the main dining area. There's also a secondary exit through the service entrance."}

assistant channel=commentary to=tool.check_restaurant_capacity:
{"time": "7:30 PM", "day": "Friday"}

tool.check_restaurant_capacity channel=commentary to=assistant:
{"current_occupancy": 85, "max_capacity": 120, "evacuation_time_estimate": "3-4 minutes", "staff_evacuation_assistance": "available"}

assistant channel=analysis:
I have the exit location and current capacity information. I'll provide clear directions with evacuation context.

assistant channel=final:
From the restaurant, the nearest emergency exit is Stairwell A on the north side, accessible through the main dining area. There's also a secondary exit through the service entrance. With current occupancy at 85 guests, evacuation would take approximately 3-4 minutes, and our staff are trained to assist with evacuation procedures.

user:
The city view from the restaurant is absolutely breathtakingâ€”what a perfect setting for dinner!

assistant channel=analysis:
Acknowledge the positive feedback about the restaurant's view while maintaining safety awareness.

assistant channel=final:
I'm so glad you're enjoying the panoramic city views! The 2nd floor location really provides that spectacular dining experience. Just remember, in case of emergency, Stairwell A is your nearest exit to the north.

user:
Could you provide me with a detailed evacuation plan specifically for the restaurant during peak dining hours?

assistant channel=analysis:
Detailed peak-hour evacuation plans aren't available through standard guest services; use background acknowledgment flag.

assistant channel=final:
[ATTENTION] I understand you'd like specific peak-hour evacuation information. Reviewing available resources.