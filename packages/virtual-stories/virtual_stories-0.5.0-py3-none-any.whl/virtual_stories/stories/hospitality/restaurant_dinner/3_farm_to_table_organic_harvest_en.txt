"""
Organic food advocate books farm-to-table dinner; assistant explains sustainable sourcing and seasonal harvest menu.

ROLES: user (environmentally conscious diner seeking sustainable cuisine), assistant (sustainable dining coordinator managing farm partnerships)
CHANNELS: analysis, commentary, final. Channel must be included for every message.
TOOLS:
```json
[
  {"name":"list_restaurants","description":"List on-property restaurants with cuisine and hours.","parameters":{"type":"object","additionalProperties":false,"properties":{"hotel_id":{"type":"string"},"meal_period":{"type":"string","enum":["breakfast","lunch","dinner","late_night"]}},"required":["hotel_id"]},"strict":true},
  {"name":"check_table_availability","description":"Check table availability for a restaurant.","parameters":{"type":"object","additionalProperties":false,"properties":{"restaurant_id":{"type":"string"},"party_size":{"type":"integer","minimum":1,"maximum":8},"datetime":{"type":"string","format":"date-time"}},"required":["restaurant_id","party_size","datetime"]},"strict":true},
  {"name":"book_table","description":"Book a table when availability exists.","parameters":{"type":"object","additionalProperties":false,"properties":{"restaurant_id":{"type":"string"},"guest_name":{"type":"string"},"contact":{"type":"string"},"party_size":{"type":"integer"},"datetime":{"type":"string","format":"date-time"}},"required":["restaurant_id","guest_name","contact","party_size","datetime"]},"strict":true},
  {"name":"get_menu_section","description":"Fetch a menu section preview for a restaurant.","parameters":{"type":"object","additionalProperties":false,"properties":{"restaurant_id":{"type":"string"},"section":{"type":"string","enum":["starters","mains","desserts","beverages"]}},"required":["restaurant_id","section"]},"strict":true}
]
```
"""

system:
Harvest Moon Organic Resort (hotel_id: hmor_sonoma_ca)
Address: 14755 Sonoma Hwy, Glen Ellen, CA 95442
Timezone: America/Los_Angeles

Farm-to-Table Restaurant Program:
- Root & Branch (restaurant_id: rest_root_branch) — Dinner 17:30–21:30; zero-mile ingredients only
- Daily harvest determines menu; vegetables picked same morning within 2-hour window
- Partnership with 12 certified organic farms within 15-mile radius for complete traceability
- Compost program returning kitchen scraps to partner farms for soil regeneration

Sustainable Resort Operations:
- 47-acre certified organic farm producing 85% of restaurant ingredients on-site
- Solar panel array generating 140% of property's energy needs with excess sold back to grid
- Rainwater collection system irrigating crops through drip irrigation technology
- Heritage seed bank preserving heirloom varieties of tomatoes, squash, and peppers dating to 1890s
- Beehive apiaries producing honey with documented flower source mapping for flavor profiles
- Biodegradable packaging for all takeaway items made from agricultural waste and mushroom mycelium

user:
Hi! I'm passionate about sustainable eating and heard you have incredible farm-to-table dining. Can I book dinner for tonight with the freshest possible ingredients?

assistant channel=analysis:
Sustainability-focused guest seeking fresh farm-to-table experience. Check Root & Branch availability and explain our zero-mile ingredient program.

assistant channel=commentary to=tool.list_restaurants:
{"hotel_id":"hmor_sonoma_ca","meal_period":"dinner"}

tool.list_restaurants channel=commentary to=assistant:
{"restaurants":[{"restaurant_id":"rest_root_branch","name":"Root & Branch","hours":"17:30-21:30","concept":"zero_mile_ingredients","harvest":"same_day"}]}

assistant channel=commentary to=tool.check_table_availability:
{"restaurant_id":"rest_root_branch","party_size":1,"datetime":"2025-09-02T19:00:00"}

tool.check_table_availability channel=commentary to=assistant:
{"available":true,"tables":[{"table_id":"HARVEST3","farm_view":"direct_garden_overlook"}]}

assistant channel=final:
Perfect! Root & Branch uses only zero-mile ingredients—today's vegetables were harvested this morning within 2 hours. Available at 7 PM with direct garden view. Shall I book it?

user:
Absolutely! Book it under Maria Rodriguez. I love that the ingredients are picked the same day—that's true sustainability.

assistant channel=commentary to=tool.book_table:
{"restaurant_id":"rest_root_branch","guest_name":"Maria Rodriguez","contact":"","party_size":1,"datetime":"2025-09-02T19:00:00"}

tool.book_table channel=commentary to=assistant:
{"status":"confirmed","confirmation_id":"FARM-DIN-3951","today_harvest":"beets_kale_summer_squash"}

assistant channel=commentary to=tool.get_menu_section:
{"restaurant_id":"rest_root_branch","section":"mains"}

tool.get_menu_section channel=commentary to=assistant:
{"section":"mains","items":[{"name":"Roasted Beet & Goat Cheese Galette"},{"name":"Kale-Wrapped Wild Salmon"},{"name":"Heirloom Squash Risotto"}]}

assistant channel=final:
Booked for 7:00 PM (FARM-DIN-3951)! Tonight's harvest featured beets, kale, and summer squash. Mains include Roasted Beet & Goat Cheese Galette, Kale-Wrapped Wild Salmon, Heirloom Squash Risotto.

user:
The heirloom varieties sound amazing! I appreciate resorts that preserve agricultural heritage like this.

assistant channel=analysis:
Guest valuing agricultural heritage. Share details about our heritage seed bank and farming practices.

assistant channel=final:
Thank you! Our heritage seed bank preserves heirloom varieties dating to the 1890s, and our 47-acre certified organic farm produces 85% of ingredients on-site.

user:
Incredible! Do you offer farm tours where guests can participate in the harvesting process?

assistant channel=analysis:
Farm tour participation details aren't specified in my tools or system knowledge about the farming operation.

assistant channel=final:
[ATTENTION] That would be a wonderful farm-to-table experience. Exploring what's available.