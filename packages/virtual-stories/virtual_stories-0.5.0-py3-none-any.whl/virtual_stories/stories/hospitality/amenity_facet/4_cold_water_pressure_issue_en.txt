"""
Guest experiences insufficient cold water pressure from bathroom faucet, requiring pressure diagnostics and flow optimization.
Provide pressure assessment and flow rate improvement with building system analysis.

ROLES: user (guest with cold water pressure problems), assistant (hydraulics specialist with pressure system expertise)
CHANNELS: analysis, commentary, final. Channel must be included for every message.
TOOLS:
```json
[
  {
    "name": "diagnose_pressure_issue",
    "description": "Analyze water pressure problems in guest room plumbing systems.",
    "parameters": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "room_number": { "type": "string" },
        "water_type": { "type": "string", "enum": ["hot", "cold", "both"] },
        "symptom_description": { "type": "string", "enum": ["low_pressure", "no_pressure", "fluctuating", "slow_flow"] },
        "affected_fixtures": { "type": "array", "items": { "type": "string" } },
        "time_of_issue": { "type": "string" }
      },
      "required": ["room_number", "water_type"]
    },
    "strict": true
  },
  {
    "name": "optimize_flow_restrictor",
    "description": "Adjust or remove flow restrictors to improve water pressure.",
    "parameters": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "room_number": { "type": "string" },
        "fixture_id": { "type": "string" },
        "restrictor_action": { "type": "string", "enum": ["remove_restrictor", "clean_restrictor", "replace_restrictor", "adjust_setting"] },
        "target_pressure": { "type": "number" },
        "flow_rate_goal": { "type": "number" }
      },
      "required": ["room_number", "fixture_id", "restrictor_action"]
    },
    "strict": true
  },
  {
    "name": "balance_system_pressure",
    "description": "Balance building water pressure across multiple zones and floors.",
    "parameters": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "building_zone": { "type": "string" },
        "pressure_target": { "type": "number" },
        "affected_floors": { "type": "array", "items": { "type": "number" } },
        "balancing_method": { "type": "string", "enum": ["zone_valves", "pressure_reducing", "pump_adjustment", "pipe_sizing"] },
        "peak_usage_compensation": { "type": "boolean" }
      },
      "required": ["building_zone", "pressure_target"]
    },
    "strict": true
  }
]
```
"""

system:
Hotel: Metropolitan Grand Hotel New York (hotel_id: mgh_nyc_01)
Address: 135 W 45th St, New York, NY 10036
Timezone: America/New_York

High-Rise Building Plumbing Infrastructure:
- Municipal water supply: NYC Department of Environmental Protection certified
- Building height: 42 stories with pressure-boosting systems
- Water pressure: Maintained at 80-100 PSI across all floors
- Flow optimization: Variable speed pumps adjust for peak usage times
- Quality standards: Multi-stage filtration with UV sterilization
- Conservation technology: Smart metering tracks usage by room and fixture
- Emergency systems: Backup generators and pressure maintenance during outages

Luxury Hotel Amenities:
- Rainforest shower experiences with programmable temperature control
- Smart bathroom mirrors with integrated lighting and audio systems
- Custom marble vanities with under-mount sinks for elegance
- Bidet systems with heated seats and multiple wash settings
- Towel warmers and luxury robe services
- In-room coffee systems with purified water delivery

Smart Building Technology:
- IoT sensors monitor water quality and pressure in real-time
- Predictive maintenance alerts prevent issues before they occur
- Guest preference learning adjusts water temperatures automatically
- Mobile app control for bathroom lighting and water features
- Energy-efficient systems reduce carbon footprint while maintaining luxury
- Integration with building security and concierge services

user:
Hi! I'm in room 3801 and the cold water pressure from the bathroom sink is really weak. It's taking forever to fill a glass or rinse anything. Can you help with this?

assistant channel=analysis:
Guest reporting low cold water pressure in high-rise room 3801. Need to diagnose pressure issue and determine if it's room-specific or building-wide. NYC high-rise systems require careful pressure balancing.

assistant channel=commentary to=tool.diagnose_pressure_issue:
{"room_number": "3801", "water_type": "cold", "symptom_description": "low_pressure", "affected_fixtures": ["sink_faucet"], "time_of_issue": "morning_peak"}

tool.diagnose_pressure_issue channel=commentary to=assistant:
{"room_number": "3801", "water_type": "cold", "pressure_reading": 35, "building_standard": 80, "issue_type": "restrictor_limitation", "peak_usage_impact": "moderate", "zone_pressure": "floor_38_normal"}

assistant channel=analysis:
Pressure at 35 PSI is well below 80 PSI standard. Issue is flow restrictor limitation during peak usage. Zone pressure normal, so can optimize restrictor settings for better flow.

assistant channel=commentary to=tool.optimize_flow_restrictor:
{"room_number": "3801", "fixture_id": "sink_faucet_main", "restrictor_action": "adjust_setting", "target_pressure": 75, "flow_rate_goal": 2.0}

tool.optimize_flow_restrictor channel=commentary to=assistant:
{"optimization_completed": true, "new_pressure": 78, "flow_rate_achieved": 2.1, "setting_adjusted": "eco_to_standard", "peak_performance": "maintained", "water_savings_note": "15_percent_reduction"}

assistant channel=final:
Excellent! I've optimized the flow restrictor in room 3801. Your cold water pressure is now at 78 PSI with a strong 2.1 GPM flow rate. Our smart systems in this 42-story building automatically adjust during peak times while maintaining efficiency.

user:
Wow, that's much better! The water pressure is perfect now. You can really tell this is a luxury hotel with how quickly these things get fixed.

assistant channel=analysis:
Guest satisfied with pressure improvement and complimenting service level. Good opportunity to share information about our luxury amenities that's available in system context.

assistant channel=final:
Thank you! The Metropolitan Grand features premium bathroom amenities including rainforest showers and smart mirrors. Our high-rise infrastructure ensures consistent performance across all 42 floors.

user:
I noticed you have those rainforest showers mentioned. Do you have any recommendations for the best settings for different times of day?

assistant channel=analysis:
Guest asking for detailed shower programming recommendations. This goes beyond basic pressure adjustment knowledge and requires spa/concierge expertise. Need to flag for attention.

assistant channel=final:
[ATTENTION] Great question about optimizing our rainforest shower settings throughout the day. Reviewing programming options.

user:
That's fine, I'll check with the concierge. Thank you for fixing the water pressure so efficiently!

assistant channel=analysis:
Guest acknowledging attention flag and thanking for service. Simple positive closing to maintain excellent guest experience.

assistant channel=final:
My pleasure! If you need any other water pressure adjustments or have questions about our luxury bathroom features, the team is here to help. Enjoy your stay at the Metropolitan Grand!
