import{bm as y,ad as v,ah as O,z as c,R,U as z,V as $,W as E,B as w,aS as I,ai as A,aj as J,ak as V,al as k,am as q,an as B,I as F,bu as P}from"./index-DNZysKmJ.js";import{j as t}from"./@radix-CliVkFaa.js";import{S as D}from"./plus-CS72uBlh.js";import{S as _}from"./trash-DEQyKF3P.js";import{a as d,b as H,C as x}from"./index.esm-BcJnCn7I.js";import{S as U}from"./info-CxU5aob4.js";function Z(e){return e.type==="string"}function K(e){return e.type==="string"&&e.enum!==void 0}function M(e){return e.type==="string"&&!!e.sensitive}function b(e){return e.type==="boolean"}function C(e){return e.type==="object"}function N(e){return e.type==="array"}function W(e){return e.type==="integer"}function Y(e){var s;return((s=e.enum)==null?void 0:s.map(n=>n.toString()))||[]}function j(e,s){if(!e.$ref||!s)return e;const n=e.$ref.replace("#/$defs/",""),o=s[n];return o||console.error(`Could not resolve $ref: ${e.$ref}`),o}function G(e,s){return e.title?e.title:O(s)}function me(e,s){const n=Object.entries(e.properties||{}).reduce((o,[a,r])=>{let l="";return r.default?b(r)?l=r.default:C(r)?l=JSON.stringify(r.default):N(r)||y(r.default)?l=r.default:l=r.default.toString():N(r)&&(l=[]),{...o,[a]:l}},{});return s&&Object.entries(s).forEach(([o,a])=>{var l;const r=(l=e.properties)==null?void 0:l[o];r&&b(r)?n[o]=a==="True"?!0:a==="False"?!1:!!a:n[o]=y(a)?a.map(i=>v(i)||y(i)?JSON.stringify(i):i):v(a)?JSON.stringify(a):a}),n}function xe(e){const s=Object.keys(e).reduce((n,o)=>(n[o]=c.string().trim().min(1),n),{});return c.object(s)}function je(e){if(!e.properties)return c.object({});const s=e.required||[],n=e.properties,o=Object.keys(n).reduce((a,r)=>{const l=n[r];if(!l)return a;const i=L(r,s);return a[r]=T(l,e.$defs,i),a},{});return c.object(o)}function T(e,s,n,o=!1){let a=S(e,s);if(a.anyOf){const l=a.anyOf.find(i=>i.type!==null);l&&(a=S(l,s))}switch(a.allOf&&(a=S(a.allOf[0],s)),a.type){case"string":return n?c.string().trim():c.string().trim().min(1,"Required");case"boolean":return n?c.union([c.literal(""),c.boolean()]):c.boolean();case"array":{if(o)return n?c.union([c.literal(""),p]):p;const l=c.array(T(a.items||{},s,!1,!0));return n?l:l.min(1)}case"object":return n?c.union([c.literal(""),p]):p;case"integer":return n?c.union([c.literal(""),c.preprocess(l=>Number(l),c.number().int())]):c.preprocess(l=>Number(l),c.number().int());default:return n?c.union([c.literal(""),c.string()]):c.string().min(1,"Required")}}function L(e,s){return!s.includes(e)}const p=c.string().refine(e=>{try{return JSON.parse(e),!0}catch{return!1}},{message:"Invalid JSON"}).transform(e=>e===""?e:JSON.parse(e));function S(e,s){if(!e.$ref||!s)return e;const n=e.$ref.split("/").pop();return!n||!s[n]?e:s[n]}function Q({schema:e,fieldName:s}){const n=e.description;return n?t.jsx(R,{children:t.jsxs(z,{children:[t.jsx($,{type:"button",children:t.jsx(U,{className:"size-4 shrink-0 fill-theme-text-secondary"})}),t.jsx(E,{className:"z-20 max-w-[400px] bg-theme-surface-primary p-5 text-text-sm text-theme-text-primary",children:t.jsxs("div",{className:"space-y-4",children:[t.jsx("p",{className:"w-fit rounded-sm bg-primary-25 px-1 py-0.5 font-mono text-primary-400",children:s}),t.jsx("p",{children:n})]})})]})}):null}function f({label:e,isOptional:s,schema:n,fieldName:o}){return t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsxs("p",{children:[e,!s&&t.jsx("span",{className:"text-theme-text-error","aria-label":"required",children:"*"})]}),n&&o&&t.jsx(Q,{schema:n,fieldName:o})]})}function X({name:e,label:s,isOptional:n,schema:o,definitions:a}){const r=d(),{fields:l,append:i,remove:u}=H({name:e,control:r.control});return t.jsxs("div",{className:"space-y-3",children:[!!s&&t.jsx("label",{className:"text-text-sm",children:t.jsx(f,{label:s,isOptional:n,schema:o,fieldName:e})}),t.jsx("ul",{className:"space-y-5",children:l.map((h,m)=>t.jsxs("li",{className:"flex w-full items-center gap-4 [&>div]:w-full",children:[t.jsx(ae,{isNested:!0,name:`${e}.${m}`,schema:o,isOptional:n,definitions:a}),t.jsxs(w,{className:"h-7 w-7",emphasis:"subtle",size:"sm",type:"button",onClick:()=>u(m),children:[t.jsx(_,{className:"h-5 w-5 fill-primary-900"}),t.jsx("span",{className:"sr-only",children:"remove"})]})]},h.id))}),t.jsxs(w,{className:"h-7 w-7",emphasis:"subtle",type:"button",onClick:()=>i(""),children:[t.jsx(D,{className:"h-5 w-5 fill-primary-900"}),t.jsx("p",{className:"sr-only",children:"Add Item"})]})]})}function ee({name:e,isOptional:s,label:n,schema:o}){var l;const a=d(),r=a.formState.errors[e];return t.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[!!n&&t.jsx("label",{htmlFor:e,className:"text-text-sm",children:t.jsx(f,{label:n,isOptional:s,schema:o,fieldName:e})}),t.jsx(x,{control:a.control,name:e,render:({field:{onChange:i,value:u,...h}})=>t.jsx(I,{id:e,checked:u,onCheckedChange:m=>i(m),...h})}),r&&t.jsx("p",{className:"text-text-sm text-error-500",children:(l=r.message)==null?void 0:l.toString()})]})}function re({name:e,label:s,isOptional:n,schema:o,enumValues:a}){var i;const r=d(),l=r.formState.errors[e];return t.jsxs("div",{className:"space-y-0.5",children:[!!s&&t.jsx("label",{htmlFor:e,className:"text-text-sm",children:t.jsx(f,{label:s,isOptional:n,schema:o,fieldName:e})}),t.jsx(x,{control:r.control,name:e,render:({field:{onChange:u,ref:h,...m}})=>t.jsxs(A,{...m,onValueChange:u,children:[t.jsx(J,{"data-error":l?"true":"false",className:"h-7 max-w-full truncate border border-neutral-300 px-2 text-left text-text-sm data-[error=true]:border-error-500",children:t.jsx(V,{placeholder:"Select Option"})}),t.jsx(k,{children:t.jsx(q,{viewportClassName:"max-h-[300px]",children:a.map(g=>t.jsx(B,{className:"space-x-2",value:g,children:g},g))})})]})}),l&&t.jsx("p",{className:"text-text-sm text-error-500",children:(i=l.message)==null?void 0:i.toString()})]})}function te({name:e,isOptional:s,label:n,schema:o}){var l;const a=d(),r=a.formState.errors[e];return t.jsxs("div",{className:"space-y-0.5",children:[!!n&&t.jsx("label",{htmlFor:e,className:"text-text-sm",children:t.jsx(f,{label:n,isOptional:s,schema:o,fieldName:e})}),t.jsx(x,{control:a.control,name:e,render:({field:i})=>t.jsx(F,{inputSize:"md",className:"w-full data-[error=true]:border-error-500",id:e,...i,type:"number","data-error":r?"true":"false"})}),r&&t.jsx("p",{className:"text-text-sm text-error-500",children:(l=r.message)==null?void 0:l.toString()})]})}function se({name:e,label:s,isOptional:n,schema:o}){var l;const a=d(),r=a.formState.errors[e];return t.jsxs("div",{className:"space-y-0.5",children:[!!s&&t.jsx("label",{htmlFor:e,className:"text-text-sm",children:t.jsx(f,{label:s,isOptional:n,schema:o,fieldName:e})}),t.jsx(x,{control:a.control,name:e,render:({field:i})=>t.jsx("textarea",{rows:4,placeholder:"Please paste your JSON",className:P({inputSize:"md",className:"h-auto w-full resize-none font-mono data-[error=true]:border-error-500"}),id:e,...i,"data-error":r?"true":"false"})}),r&&t.jsx("p",{className:"text-text-sm text-error-500",children:(l=r.message)==null?void 0:l.toString()})]})}function ne({name:e,isOptional:s,label:n,schema:o}){var l;const a=d(),r=a.formState.errors[e];return t.jsxs("div",{className:"space-y-0.5",children:[!!n&&t.jsx("label",{htmlFor:e,className:"text-text-sm",children:t.jsx(f,{label:n,isOptional:s,schema:o,fieldName:e})}),t.jsx(x,{control:a.control,name:e,render:({field:i})=>t.jsx(F,{inputSize:"md",className:"w-full data-[error=true]:border-error-500",id:e,...i,"data-error":r?"true":"false"})}),r&&t.jsx("p",{className:"text-text-sm text-error-500",children:(l=r.message)==null?void 0:l.toString()})]})}function le({name:e,label:s,isOptional:n,schema:o}){var l;const a=d(),r=a.formState.errors[e];return t.jsxs("div",{className:"space-y-0.5",children:[!!s&&t.jsx("label",{htmlFor:e,className:"text-text-sm",children:t.jsx(f,{label:s,isOptional:n,schema:o,fieldName:e})}),t.jsx(x,{control:a.control,name:e,render:({field:i})=>t.jsx(F,{placeholder:"Use {{<SECRET_NAME>.<SECRET_KEY>}} to reference a secret",inputSize:"md",className:"w-full placeholder:font-mono data-[error=true]:border-error-500",id:e,...i,type:"text","data-error":r?"true":"false"})}),r&&t.jsx("p",{className:"text-text-sm text-error-500",children:(l=r.message)==null?void 0:l.toString()})]})}function ae({schema:e,name:s,isOptional:n,definitions:o,isNested:a}){let r=j(e,o);a&&r.items&&(r=j(r.items,o)),a&&r.prefixItems&&(r=j(r.prefixItems[0],o));const l=a?"":G(r,s);if(r.anyOf){const i=r.anyOf.find(u=>u.type!==null);if(i){const u=j(i,o);r={...r,...u}}}if(r.allOf){const i=j(r.allOf[0],o);r={...r,...i}}if(K(r))return t.jsx(re,{name:s,label:l,schema:r,isOptional:n,enumValues:Y(r)});if(M(r))return t.jsx(le,{name:s,label:l,schema:r,isOptional:n});if(W(r))return t.jsx(te,{name:s,label:l,schema:r,isOptional:n});if(Z(r))return t.jsx(ne,{name:s,label:l,schema:r,isOptional:n});if(b(r))return t.jsx(ee,{name:s,label:l,schema:r,isOptional:n});if(C(r)||N(r)&&a)return t.jsx(se,{name:s,label:l,schema:r,isOptional:n});if(N(r))return t.jsx(X,{definitions:o,name:s,label:l,schema:r,isOptional:n})}export{ae as D,me as a,L as b,je as g,xe as z};
