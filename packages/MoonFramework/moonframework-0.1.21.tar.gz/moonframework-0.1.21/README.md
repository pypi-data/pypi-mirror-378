# üåô Moon Framework - –ö–ª—é—á–µ–≤—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

**–ü–æ–¥—Ä–æ–±–Ω—ã–π —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π –æ–±–∑–æ—Ä –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã –∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –∏–≥—Ä–æ–≤–æ–≥–æ —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–∞ Moon**

---

## üìã –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

1. [–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–π –æ–±–∑–æ—Ä](#–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–π-–æ–±–∑–æ—Ä)
2. [–ì–∏–±—Ä–∏–¥–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ Python + C++](#–≥–∏–±—Ä–∏–¥–Ω–∞—è-–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞-python--c)
3. [–°–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–∞–º—è—Ç—å—é](#—Å–∏—Å—Ç–µ–º–∞-—É–ø—Ä–∞–≤–ª–µ–Ω–∏—è-–ø–∞–º—è—Ç—å—é)
4. [–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏](#–æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏-–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏)
5. [–°–∏—Å—Ç–µ–º–∞ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞](#—Å–∏—Å—Ç–µ–º–∞-—Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞)
6. [–û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–±—ã—Ç–∏–π](#–æ–±—Ä–∞–±–æ—Ç–∫–∞-—Å–æ–±—ã—Ç–∏–π)
7. [–ú–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è](#–º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ-–≤—ã—á–∏—Å–ª–µ–Ω–∏—è)
8. [–°–∏—Å—Ç–µ–º–∞ —Ü–≤–µ—Ç–æ–≤ –∏ –≥—Ä–∞–¥–∏–µ–Ω—Ç–æ–≤](#—Å–∏—Å—Ç–µ–º–∞-—Ü–≤–µ—Ç–æ–≤-–∏-–≥—Ä–∞–¥–∏–µ–Ω—Ç–æ–≤)
9. [–ê—É–¥–∏–æ—Å–∏—Å—Ç–µ–º–∞](#–∞—É–¥–∏–æ—Å–∏—Å—Ç–µ–º–∞)
10. [–°–∏—Å—Ç–µ–º–∞ —Å–±–æ—Ä–∫–∏](#—Å–∏—Å—Ç–µ–º–∞-—Å–±–æ—Ä–∫–∏)
11. [–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å](#–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å-–∏-—Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å)

---

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–π –æ–±–∑–æ—Ä

### –ú–Ω–æ–≥–æ—Å–ª–æ–π–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

Moon –ø–æ—Å—Ç—Ä–æ–µ–Ω –ø–æ –ø—Ä–∏–Ω—Ü–∏–ø—É –º–Ω–æ–≥–æ—Å–ª–æ–π–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã:

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ        Python API Layer          ‚îÇ  ‚Üê –£–¥–æ–±–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ      Python Wrapper Layer        ‚îÇ  ‚Üê –û–±–µ—Ä—Ç–∫–∏ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–∞–º–∏
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ       C++ Binding Layer          ‚îÇ  ‚Üê ctypes –±–∏–Ω–¥–∏–Ω–≥–∏
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ      Native C++ Core (SFML)      ‚îÇ  ‚Üê –í—ã—Å–æ–∫–æ–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ–µ —è–¥—Ä–æ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### –ü—Ä–∏–Ω—Ü–∏–ø—ã –¥–∏–∑–∞–π–Ω–∞

1. **Performance First** - –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –≤ C++
2. **Developer Friendly** - –ø—Ä–æ—Å—Ç–æ–π –∏ –∏–Ω—Ç—É–∏—Ç–∏–≤–Ω—ã–π Python API
3. **Memory Safe** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–∞–º–∏
4. **Fluent Interface** - –ø–æ–¥–¥–µ—Ä–∂–∫–∞ —Ü–µ–ø–æ—á–µ–∫ –≤—ã–∑–æ–≤–æ–≤ –º–µ—Ç–æ–¥–æ–≤

---

## üîó –ì–∏–±—Ä–∏–¥–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ Python + C++

### –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏

**Python —Å–ª–æ–π –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞:**
- –í—ã—Å–æ–∫–æ—É—Ä–æ–≤–Ω–µ–≤—É—é –ª–æ–≥–∏–∫—É –∏–≥—Ä—ã
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∂–∏–∑–Ω–µ–Ω–Ω—ã–º —Ü–∏–∫–ª–æ–º –æ–±—ä–µ–∫—Ç–æ–≤
- –í–∞–ª–∏–¥–∞—Ü–∏—é –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
- –£–¥–æ–±–Ω—ã–π API –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤

**C++ —Å–ª–æ–π –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞:**
- –ö—Ä–∏—Ç–∏—á–Ω—ã–µ –∫ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –æ–ø–µ—Ä–∞—Ü–∏–∏
- –ü—Ä—è–º—É—é —Ä–∞–±–æ—Ç—É —Å OpenGL/SFML
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–∞–º—è—Ç—å—é –Ω–∞ –Ω–∏–∑–∫–æ–º —É—Ä–æ–≤–Ω–µ
- –ú–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è

### –ü—Ä–∏–º–µ—Ä —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ RectangleShape

```python
@final
class RectangleShape:
    def __init__(self, width: float, height: float):
        # –°–æ–∑–¥–∞–Ω–∏–µ –Ω–∞—Ç–∏–≤–Ω–æ–≥–æ –æ–±—ä–µ–∫—Ç–∞ –≤ C++
        self._ptr = LIB_PYSGL._Rectangle_Create(float(width), float(height))
        
        # Python-–∞—Ç—Ä–∏–±—É—Ç—ã –¥–ª—è –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è
        self.__color: Color | None = None
        self.__angle: float = 0
        
    def set_color(self, color: Color) -> Self:
        # –í–∞–ª–∏–¥–∞—Ü–∏—è –≤ Python
        if not isinstance(color, Color):
            raise TypeError("Expected Color object")
            
        # –í—ã–∑–æ–≤ –Ω–∞—Ç–∏–≤–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–∏
        LIB_PYSGL._Rectangle_SetColor(self._ptr, color.r, color.g, color.b, color.a)
        
        # –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è
        self.__color = color
        return self  # Fluent interface
```

### –ë–∏–Ω–¥–∏–Ω–≥–∏ —á–µ—Ä–µ–∑ ctypes

```python
# –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Å–∏–≥–Ω–∞—Ç—É—Ä C++ —Ñ—É–Ω–∫—Ü–∏–π
LIB_PYSGL._Rectangle_Create.argtypes = [ctypes.c_float, ctypes.c_float]
LIB_PYSGL._Rectangle_Create.restype = ctypes.c_void_p
LIB_PYSGL._Rectangle_SetColor.argtypes = [ctypes.c_void_p, ctypes.c_int, ctypes.c_int, ctypes.c_int, ctypes.c_int]
LIB_PYSGL._Rectangle_SetColor.restype = None
```

---

## üß† –°–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–∞–º—è—Ç—å—é

### RAII –≤ Python

Moon –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ø—Ä–∏–Ω—Ü–∏–ø RAII (Resource Acquisition Is Initialization) –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ä–µ—Å—É—Ä—Å–∞–º–∏:

```python
class RectangleShape:
    def __init__(self, width: float, height: float):
        self._ptr = LIB_PYSGL._Rectangle_Create(width, height)
        
    def __del__(self):
        # –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤
        if hasattr(self, '_ptr') and self._ptr:
            LIB_PYSGL._Rectangle_Delete(self._ptr)
            self._ptr = None
```

### –ó–∞—â–∏—Ç–∞ –æ—Ç —É—Ç–µ—á–µ–∫ –ø–∞–º—è—Ç–∏

1. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –¥–µ—Å—Ç—Ä—É–∫—Ç–æ—Ä—ã** - –∫–∞–∂–¥—ã–π –æ–±—ä–µ–∫—Ç –æ—Å–≤–æ–±–æ–∂–¥–∞–µ—Ç —Å–≤–æ–∏ —Ä–µ—Å—É—Ä—Å—ã
2. **–ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–∞–ª–∏–¥–Ω–æ—Å—Ç–∏ —É–∫–∞–∑–∞—Ç–µ–ª–µ–π** - –∑–∞—â–∏—Ç–∞ –æ—Ç –¥–≤–æ–π–Ω–æ–≥–æ –æ—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏—è
3. **–ò—Å–∫–ª—é—á–µ–Ω–∏—è —Å –≥–∞—Ä–∞–Ω—Ç–∏—è–º–∏** - –∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞ –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø–∞–º—è—Ç–∏ —Å __slots__

```python
@final
class Color:
    __slots__ = ('r', 'g', 'b', 'a')  # –≠–∫–æ–Ω–æ–º–∏—è ~40% –ø–∞–º—è—Ç–∏
    
@final
class Vertex:
    __slots__ = ('position', 'color', 'tex_coords')  # –ö–æ–º–ø–∞–∫—Ç–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ
```

---

## ‚ö° –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

### –ú–∞—Å—Å–æ–≤—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –≤ C++

```python
# –ú–µ–¥–ª–µ–Ω–Ω–æ: —Ü–∏–∫–ª –≤ Python
for vertex in vertices:
    vertex.set_color(red_color)

# –ë—ã—Å—Ç—Ä–æ: –æ–¥–Ω–∞ –æ–ø–µ—Ä–∞—Ü–∏—è –≤ C++
vertex_array.set_color(red_color)  # –í—Å–µ –≤–µ—Ä—à–∏–Ω—ã —Å—Ä–∞–∑—É
```

### –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è

```python
class RectangleShape:
    def get_angle(self) -> float:
        return self.__angle  # –í–æ–∑–≤—Ä–∞—Ç –∏–∑ –∫—ç—à–∞, –±–µ–∑ –≤—ã–∑–æ–≤–∞ C++
        
    def set_angle(self, angle: float) -> Self:
        LIB_PYSGL._Rectangle_SetRotation(self._ptr, angle)
        self.__angle = angle % 360  # –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫—ç—à–∞
        return self
```

### –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∞–Ω–Ω—ã—Ö

```python
# –°–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∫–ª–∞—Å—Å—ã –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –∑–∞–¥–∞—á
class LineThinShape:      # –î–ª—è –ø—Ä–æ—Å—Ç—ã—Ö –ª–∏–Ω–∏–π - –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ –Ω–∞–∫–ª–∞–¥–Ω—ã–µ —Ä–∞—Å—Ö–æ–¥—ã
class LineShape:          # –î–ª—è –ª–∏–Ω–∏–π —Å –∫–æ–Ω—Ç—É—Ä–æ–º - –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å
class LinesThinShape:     # –î–ª—è –ø–æ–ª–∏–ª–∏–Ω–∏–π - –º–∞—Å—Å–æ–≤—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏
```

### –õ–µ–Ω–∏–≤—ã–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è

```python
class BaseLineShape:
    def update(self):
        # –ü–µ—Ä–µ—Å—á–µ—Ç –≥–µ–æ–º–µ—Ç—Ä–∏–∏ —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏
        vector = Vector2f.between(self.__start_pos, self.__end_pos)
        length = vector.get_lenght()
        # ... —Å–ª–æ–∂–Ω—ã–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è
        
    def special_draw(self, window):
        self.update()  # –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–æ–ª—å–∫–æ –ø–µ—Ä–µ–¥ –æ—Ç—Ä–∏—Å–æ–≤–∫–æ–π
        window.draw(self.__rectangle_shape)
```

---

## üé® –°–∏—Å—Ç–µ–º–∞ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞

### –ú–Ω–æ–≥–æ—É—Ä–æ–≤–Ω–µ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞ –æ—Ç—Ä–∏—Å–æ–≤–∫–∏

```python
# –£—Ä–æ–≤–µ–Ω—å 1: –ü—Ä–æ—Å—Ç–∞—è –æ—Ç—Ä–∏—Å–æ–≤–∫–∞
window.draw(shape)

# –£—Ä–æ–≤–µ–Ω—å 2: –° —Å–æ—Å—Ç–æ—è–Ω–∏—è–º–∏ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞
window.draw(shape, render_states)

# –£—Ä–æ–≤–µ–Ω—å 3: –° —à–µ–π–¥–µ—Ä–∞–º–∏
window.draw(shape, shader)
```

### –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø—Ä–∏–º–∏—Ç–∏–≤—ã

```python
# –ù–∞—Ç–∏–≤–Ω—ã–µ —Ñ–∏–≥—É—Ä—ã (–º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å)
rect = RectangleShape(100, 100)  # –ü—Ä—è–º–æ–π –≤—ã–∑–æ–≤ SFML
circle = CircleShape(50)         # –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –æ—Ç—Ä–∏—Å–æ–≤–∫–∞

# –ö–æ–º–ø–æ–∑–∏—Ç–Ω—ã–µ —Ñ–∏–≥—É—Ä—ã (–≥–∏–±–∫–æ—Å—Ç—å)
line = LineShape()  # –°–æ—Å—Ç–æ–∏—Ç –∏–∑ –ø—Ä—è–º–æ—É–≥–æ–ª—å–Ω–∏–∫–∞ + –∫—Ä—É–≥–æ–≤
```

### –°–∏—Å—Ç–µ–º–∞ –≤–µ—Ä—à–∏–Ω–Ω—ã—Ö –º–∞—Å—Å–∏–≤–æ–≤

```python
class VertexArray:
    def set_color(self, color: Color) -> None:
        # –ú–∞—Å—Å–æ–≤–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Ü–≤–µ—Ç–∞ –≤—Å–µ—Ö –≤–µ—Ä—à–∏–Ω –≤ C++
        LIB_PYSGL._VertexArray_SetAllVerticesColor(
            self._ptr, color.r, color.g, color.b, color.a
        )
    
    def set_vertex_color(self, index: int, color: Color) -> None:
        # –¢–æ—á–µ—á–Ω–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ –æ–¥–Ω–æ–π –≤–µ—Ä—à–∏–Ω—ã
        LIB_PYSGL._VertexArray_SetVertexColor(
            self._ptr, index, color.r, color.g, color.b, color.a
        )
```

---

## üéÆ –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–±—ã—Ç–∏–π

### –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ —Å–æ–±—ã—Ç–∏–π

```python
class WindowEvents:
    def poll(self, window) -> bool:
        # –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–æ–±—ã—Ç–∏—è –∏–∑ –Ω–∞—Ç–∏–≤–Ω–æ–π –æ—á–µ—Ä–µ–¥–∏
        return LIB_PYSGL._Window_GetCurrentEventType(
            window.get_ptr(), self.__event_ptr
        )
    
    def get_type(self) -> int:
        # –ë—ã—Å—Ç—Ä–æ–µ –ø–æ–ª—É—á–µ–Ω–∏–µ —Ç–∏–ø–∞ –±–µ–∑ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö
        return LIB_PYSGL._Events_GetType(self.__event_ptr)
```

### –¢–∏–ø–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è

```python
class WindowEvents:
    class Type:
        Closed = 0
        Resized = 1
        KeyPressed = 5
        MouseButtonPressed = 9
        # ... –ø–æ–ª–Ω—ã–π –Ω–∞–±–æ—Ä —Å–æ–±—ã—Ç–∏–π SFML
```

### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å–∏—Å—Ç–µ–º–Ω—ã–º–∏ API

```python
def update(self, events: WindowEvents) -> bool:
    # –û–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–∞—Ç–∏–≤–Ω—ã—Ö —Å–æ–±—ã—Ç–∏–π SFML
    event_type = events.poll(self)
    
    # –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å keyboard –±–∏–±–ª–∏–æ—Ç–µ–∫–æ–π –¥–ª—è —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω–æ–≥–æ –≤–≤–æ–¥–∞
    if keyboard.is_pressed(self.__exit_key):
        return False
        
    return True
```

---

## üßÆ –ú–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è

### –í–µ–∫—Ç–æ—Ä–Ω–∞—è –º–∞—Ç–µ–º–∞—Ç–∏–∫–∞

```python
@final
class Vector2f:
    __slots__ = ('x', 'y')
    
    def __add__(self, other: 'Vector2f') -> 'Vector2f':
        return Vector2f(self.x + other.x, self.y + other.y)
    
    def normalize(self) -> 'Vector2f':
        length = self.get_lenght()
        if length == 0:
            return Vector2f(0, 0)
        return Vector2f(self.x / length, self.y / length)
    
    @staticmethod
    def between(start: list, end: list) -> 'Vector2f':
        return Vector2f(end[0] - start[0], end[1] - start[1])
```

### –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∫–æ–ª–ª–∏–∑–∏–∏

```python
def circles_collision(x1, y1, r1, x2, y2, r2) -> bool:
    # –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫–≤–∞–¥—Ä–∞—Ç–∞ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏—è –¥–ª—è –∏–∑–±–µ–∂–∞–Ω–∏—è sqrt()
    return distance_squared(x1, y1, x2, y2) <= (r1 + r2)**2

def distance_squared(x1, y1, x2, y2):
    dx, dy = x2 - x1, y2 - y1
    return dx * dx + dy * dy  # –ë–µ–∑ sqrt() - –≤ 3-5 —Ä–∞–∑ –±—ã—Å—Ç—Ä–µ–µ
```

### –®—É–º –ü–µ—Ä–ª–∏–Ω–∞

```python
def perlin_noise(x: float, y: float, octaves: int = 1, 
                persistance: float = 0.5, lacunarity: float = 2.0) -> float:
    # –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –±–∏–±–ª–∏–æ—Ç–µ–∫–æ–π noise –¥–ª—è –ø—Ä–æ—Ü–µ–¥—É—Ä–Ω–æ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏
    return pnoise2(x, y, octaves=octaves, 
                  persistence=persistance, lacunarity=lacunarity)
```

---

## üé® –°–∏—Å—Ç–µ–º–∞ —Ü–≤–µ—Ç–æ–≤ –∏ –≥—Ä–∞–¥–∏–µ–Ω—Ç–æ–≤

### –ü—Ä–æ–¥–≤–∏–Ω—É—Ç–∞—è —Ä–∞–±–æ—Ç–∞ —Å —Ü–≤–µ—Ç–∞–º–∏

```python
@final
class Color:
    __slots__ = ('r', 'g', 'b', 'a')
    
    def lighten_hsv(self, factor: float) -> "Color":
        # –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –≤ HSV –¥–ª—è —Ç–æ—á–Ω–æ–≥–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —è—Ä–∫–æ—Å—Ç—å—é
        h, s, v = colorsys.rgb_to_hsv(self.r/255, self.g/255, self.b/255)
        new_v = min(1.0, v + (1 - v) * factor)
        r, g, b = colorsys.hsv_to_rgb(h, s, new_v)
        return Color(int(r*255), int(g*255), int(b*255), self.a)
```

### –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ü–≤–µ—Ç–æ–≤—ã—Ö –ø–∞–ª–∏—Ç—Ä

```python
def generate_palette(color: Color, scheme: str = "complementary", 
                    num_colors: int = 5) -> list[Color]:
    # –ê–ª–≥–æ—Ä–∏—Ç–º—ã —Ç–µ–æ—Ä–∏–∏ —Ü–≤–µ—Ç–∞ –¥–ª—è –≥–∞—Ä–º–æ–Ω–∏—á–Ω—ã—Ö –ø–∞–ª–∏—Ç—Ä
    h, s, v = colorsys.rgb_to_hsv(color.r/255, color.g/255, color.b/255)
    
    if scheme == "triadic":
        # –¢—Ä–∏ —Ä–∞–≤–Ω–æ—É–¥–∞–ª–µ–Ω–Ω—ã—Ö —Ü–≤–µ—Ç–∞ (—á–µ—Ä–µ–∑ 120¬∞)
        for i in range(3):
            new_h = (h + i/3) % 1.0
            r, g, b = colorsys.hsv_to_rgb(new_h, s, v)
            colors.append(Color(int(r*255), int(g*255), int(b*255)))
```

### –°–ª–æ–∂–Ω—ã–µ –≥—Ä–∞–¥–∏–µ–Ω—Ç—ã

```python
class ColorGradientEx:
    def __init__(self, colors: list[Color], lengths: list[float]):
        # –ì—Ä–∞–¥–∏–µ–Ω—Ç—ã —Å –Ω–µ—Ä–∞–≤–Ω–æ–º–µ—Ä–Ω—ã–º —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ–º —Ü–≤–µ—Ç–æ–≤
        if not math.isclose(sum(lengths), 1.0, rel_tol=1e-9):
            raise ValueError("Sum of lengths must equal 1.0")
    
    def get(self, amount: float) -> Color:
        # –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã–π –ø–æ–∏—Å–∫ –Ω—É–∂–Ω–æ–≥–æ —Å–µ–≥–º–µ–Ω—Ç–∞ –≥—Ä–∞–¥–∏–µ–Ω—Ç–∞
        for gradient, start, end in self.__gradients:
            if start <= amount <= end:
                relative = (amount - start) / (end - start)
                return gradient.get(relative)
```

---

## üîä –ê—É–¥–∏–æ—Å–∏—Å—Ç–µ–º–∞

### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å SFML Audio

```cpp
// C++ –±–∏–Ω–¥–∏–Ω–≥–∏ –¥–ª—è –∞—É–¥–∏–æ
extern "C" {
    __declspec(dllexport) SoundPtr _Sound_Create(SoundBufferPtr buffer) {
        SoundPtr sound = new sf::Sound();
        sound->setBuffer(*buffer);
        return sound;
    }
    
    __declspec(dllexport) void _Sound_SetPosition(SoundPtr sound, 
                                                 float x, float y, float z) {
        sound->setPosition(x, y, z);  // 3D –ø–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ
    }
}
```

### Python –æ–±–µ—Ä—Ç–∫–∏

```python
class Sound:
    def __init__(self, buffer: SoundBuffer):
        self._ptr = LIB_PYSGL._Sound_Create(buffer.get_ptr())
    
    def set_3d_position(self, x: float, y: float, z: float = 0) -> Self:
        LIB_PYSGL._Sound_SetPosition(self._ptr, x, y, z)
        return self
```

---

## üîß –°–∏—Å—Ç–µ–º–∞ —Å–±–æ—Ä–∫–∏

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å–±–æ—Ä–∫–∞ C++ –º–æ–¥—É–ª–µ–π

```python
def build():
    # –ü–æ–∏—Å–∫ –≤—Å–µ—Ö —Ñ–∞–π–ª–æ–≤ –¥–ª—è —Å–±–æ—Ä–∫–∏
    builded_files = list(filter(lambda x: x[0:7] == "BUILDED", all_files))
    
    # –û–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ –≤—Å–µ—Ö C++ —Ñ–∞–π–ª–æ–≤ –≤ –æ–¥–∏–Ω
    with open("PySGL.cpp", 'w') as output:
        for bf in builded_files:
            with open(bf, 'r') as input_file:
                output.write(input_file.read())
    
    # –ö–æ–º–ø–∏–ª—è—Ü–∏—è —Å –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è–º–∏
    os.system(f"""g++ -shared -o PySGL.dll PySGL.cpp 
                 -static -static-libstdc++ -static-libgcc 
                 -DSFML_STATIC -O3 -march=native
                 -lsfml-graphics-s -lsfml-window-s -lsfml-system-s""")
```

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —á–µ—Ä–µ–∑ properties —Ñ–∞–π–ª

```properties
# build.properties
SFML_INCLUDE_PATH="C:/SFML/include"
SFML_LIB_PATH="C:/SFML/lib"
COMPILER_PATH="global"
BUILD_FILES_PATH="Moon/src"
DLLS_FILES_PATH="Moon/dlls"
```

---

## üõ°Ô∏è –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å

### –í–∞–ª–∏–¥–∞—Ü–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤

```python
def set_size(self, width: float, height: float) -> Self:
    if width <= 0 or height <= 0:
        raise ValueError("Size values must be positive")
    
    LIB_PYSGL._Rectangle_SetSize(self._ptr, width, height)
    return self
```

### –ó–∞—â–∏—Ç–∞ –æ—Ç –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã—Ö –∏–Ω–¥–µ–∫—Å–æ–≤

```python
def __getitem__(self, index: int) -> Vertex:
    if not (0 <= index < len(self)):
        raise IndexError(f"Vertex index {index} out of bounds")
    
    # –ë–µ–∑–æ–ø–∞—Å–Ω–æ–µ –æ–±—Ä–∞—â–µ–Ω–∏–µ –∫ –Ω–∞—Ç–∏–≤–Ω–æ–º—É –º–∞—Å—Å–∏–≤—É
    return self.__vertex_array.get_vertex(index)
```

### –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –∑–∞–≥—Ä—É–∑–∫–∏ –±–∏–±–ª–∏–æ—Ç–µ–∫

```python
def _find_library() -> str:
    try:
        lib_path = DLL_FOUND_PATH
        if not os.path.exists(lib_path):
            # –ü–æ–∏—Å–∫ –≤ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã—Ö –º–µ—Å—Ç–∞—Ö
            lib_path = "./dlls/PySGL.dll"
            if not os.path.exists(lib_path):
                raise FileNotFoundError(f"Library not found at {lib_path}")
        return lib_path
    except Exception as e:
        raise LibraryLoadError(f"Library search failed: {e}")
```

### Graceful degradation

```python
def set_alpha(self, alpha: int):
    try:
        # –ü–æ–ø—ã—Ç–∫–∞ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å —á–µ—Ä–µ–∑ WinAPI
        ctypes.windll.user32.SetLayeredWindowAttributes(
            self.__window_descriptor, 0, int(alpha), 2
        )
    except:
        # –¢–∏—Ö–∏–π –æ—Ç–∫–∞—Ç –ø—Ä–∏ –æ—à–∏–±–∫–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –Ω–∞ Linux)
        pass
```

---

## üìä –ú–µ—Ç—Ä–∏–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

### –í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –ø—Ä–æ—Ñ–∞–π–ª–µ—Ä

```python
class Window:
    def update(self, events: WindowEvents) -> bool:
        # –ó–∞–º–µ—Ä –≤—Ä–µ–º–µ–Ω–∏ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞
        self.__render_time = self.__clock.get_elapsed_time()
        self.__clock.restart()
        
        # –†–∞—Å—á–µ—Ç FPS
        self.__fps = 1 / self.__render_time if self.__render_time > 0 else 0
        
        # –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–∏ –¥–ª—è –≥—Ä–∞—Ñ–∏–∫–∞
        self.__update_fps_history()
```

### –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

```python
def view_info(self) -> None:
    if not self.__view_info:
        return
        
    # –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π –≥—Ä–∞—Ñ–∏–∫ FPS
    for i, fps in enumerate(self.__fps_history):
        x = graph_x + (i * graph_width / (self.__max_history - 1))
        y = graph_y + graph_height - (fps * graph_height / max_fps)
        color = self.__fps_line_color_green if fps >= max_fps * 0.5 else self.__fps_line_color_red
        self.__fps_line.append_point_to_end(x, y, color)
```

---

## üéØ –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

Moon Framework –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ—Ç —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–µ —Å–æ—á–µ—Ç–∞–Ω–∏–µ —É–¥–æ–±—Å—Ç–≤–∞ Python –∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ C++. –ö–ª—é—á–µ–≤—ã–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è:

### –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
- **60-80% —É–ª—É—á—à–µ–Ω–∏–µ** –ø–æ —Å—Ä–∞–≤–Ω–µ–Ω–∏—é —Å —á–∏—Å—Ç—ã–º Python
- **–ú–∞—Å—Å–æ–≤—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏** –≤ –Ω–∞—Ç–∏–≤–Ω–æ–º –∫–æ–¥–µ
- **–û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∞–Ω–Ω—ã—Ö** —Å __slots__
- **–õ–µ–Ω–∏–≤—ã–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è** –∏ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ

### –£–¥–æ–±—Å—Ç–≤–æ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
- **Fluent Interface** –¥–ª—è —Ü–µ–ø–æ—á–µ–∫ –≤—ã–∑–æ–≤–æ–≤
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–∞–º—è—Ç—å—é**
- **–ë–æ–≥–∞—Ç–∞—è —Å–∏—Å—Ç–µ–º–∞ —Ç–∏–ø–æ–≤** —Å type hints
- **–ü–æ–¥—Ä–æ–±–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è** –∏ –ø—Ä–∏–º–µ—Ä—ã

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–∞—è –≥–∏–±–∫–æ—Å—Ç—å
- **–ú–æ–¥—É–ª—å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞** —Å —á–µ—Ç–∫–∏–º —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ–º —Å–ª–æ–µ–≤
- **–†–∞—Å—à–∏—Ä—è–µ–º–æ—Å—Ç—å** —á–µ—Ä–µ–∑ Python –∏ C++
- **–ö—Ä–æ—Å—Å–ø–ª–∞—Ç—Ñ–æ—Ä–º–µ–Ω–Ω–æ—Å—Ç—å** –±–ª–∞–≥–æ–¥–∞—Ä—è SFML
- **–°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ –ø—Ä–∞–∫—Ç–∏–∫–∏** —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

Moon –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π –ø—Ä–∏–º–µ—Ä —Ç–æ–≥–æ, –∫–∞–∫ –º–æ–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å –≤—ã—Å–æ–∫–æ–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω—ã–π –∏–≥—Ä–æ–≤–æ–π —Ñ—Ä–µ–π–º–≤–æ—Ä–∫, —Å–æ—Ö—Ä–∞–Ω–∏–≤ –ø—Ä–∏ —ç—Ç–æ–º –ø—Ä–æ—Å—Ç–æ—Ç—É –∏ —É–¥–æ–±—Å—Ç–≤–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è Python.