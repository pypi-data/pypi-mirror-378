    <!DOCTYPE html>
    <html lang="no">
    <head>
            <meta charset="utf-8">
            <title>Simulering</title>
            <link rel="stylesheet" href="/static/style.css">
    </head>
    <body>
    
    <div class="container">
        <form method="post" id="sideform" class="simulator-form">
            <input type="hidden" name="prev_sim" value="{{ selected_simulator_key }}">
            <input type="hidden" id="firstLoad" value="{{ '1' if not report_html else '0' }}">
            <div class="sidebar">
                <label for="simulator">Velg simulator:</label>
                <select name="simulator" id="simulator" onchange="document.getElementById('sideform').submit()">
                    {% for key, simobj in simulators.items() %}
                        <option value="{{ key }}" {% if key == selected_simulator_key %}selected{% endif %}>{{ simobj.name }}</option>
                    {% endfor %}
                </select>
                <div style="margin: 1em 0;">
                    <input type="checkbox" id="autoCalc" name="autoCalc">
                    <label for="autoCalc">Automatisk beregning</label>
                </div>
                <input type="submit" value="Beregn">
                <button type="button" onclick="downloadInput()">Last ned input</button>
                <input type="file" id="uploadInputFile" accept="application/json" style="display:none">
                <button type="button" onclick="document.getElementById('uploadInputFile').click()">Last opp input</button>
            </div>
            <div class="main">
                <h1>{{ simulators[selected_simulator_key].name }}</h1>
                <section class="input-section">
                    <div class="section-title">Inndata</div>
                    {{ input_html|safe }}
                </section>
                <section class="report-section">
                    <div class="section-title">Rapport</div>
                    <div id="report_html_container">{{ report_html|safe }}</div>
                </section>
            </div>
        </form>
    </div>

    <script>
        window.input_json = {{ input_json|tojson }};
        window.input_fields = {{ input_fields|tojson }};
    </script>
    <script src="/static/main.js"></script>
    <script>
        console.log('window.uploadInputFile:', typeof window.uploadInputFile);
        if (typeof window.uploadInputFile !== 'function') {
            alert('uploadInputFile er IKKE tilgjengelig i global scope!');
        } else {
            console.log('uploadInputFile er tilgjengelig i global scope.');
        }
    </script>
    </body>
    </html>
