"use strict";(self.webpackChunk_atoti_jupyterlab_extension=self.webpackChunk_atoti_jupyterlab_extension||[]).push([[9086],{29086:(e,t,r)=>{r.r(t),r.d(t,{default:()=>v});var a=r(74389),n=r(93280),i=r.n(n),o=r(88525),s=r.n(o),l=r(93345),c=r(95889),d=r(32376),p=r(91230),h=r(99988),f=r(75499),u=r(38977),x=r(834),y=r(73649),m=r(71244);i().register(s());const v=(0,x.withLoadingOverlay)((0,x.withoutIrrelevantRenders)((0,d.c)((0,l.memo)((e=>{const{formatMessage:t}=(0,c.useIntl)(),{cube:r,data:n,metaData:i,widgetState:o}=e,[s]=(0,u.i)("style.members"),d=t({id:"aui.total"}),x=(0,l.useMemo)((()=>(0,m.Z)({cube:r,data:n,metaData:i,widgetState:o,captionForTotals:d,userTupleStyles:s})),[r,n,i,o,d,s]),v=(0,l.useMemo)((()=>(e=>e?(0,y.w)(e.subplots):{})(i)),[i]),g=(0,l.useRef)();return(0,a.Y)(f.Kl,{...e,onContextMenu:function(){const t=g.current?(0,p.h)([],g.current,{type:"contextmenu",numberOfTraces:x.length}):[],r=(0,h.d)({selectedPointsByTrace:t,traces:x,data:n});e.onSelectionChange?.(r)},traces:x,layout:v,cube:r,data:n,metaData:i,onInitialized:function(e,t){return t.on("plotly_treemapclick",(()=>!1)),t.on("plotly_hover",(({points:e})=>{g.current=e[0]})),t.on("plotly_unhover",(()=>{g.current=void 0})),!1}})})))))},88525:(e,t,r)=>{e.exports=r(13540)},42127:(e,t,r)=>{var a=r(47335).rb,n=r(47335).ay,i=r(4862),o=r(10649).u,s=r(69935),l=r(50977),c=r(65513),d=r(44904).extendFlat,p=r(52973).k;e.exports={labels:l.labels,parents:l.parents,values:l.values,branchvalues:l.branchvalues,count:l.count,level:l.level,maxdepth:l.maxdepth,tiling:{packing:{valType:"enumerated",values:["squarify","binary","dice","slice","slice-dice","dice-slice"],dflt:"squarify",editType:"plot",description:["Determines d3 treemap solver.","For more info please refer to https://github.com/d3/d3-hierarchy#treemap-tiling"].join(" ")},squarifyratio:{valType:"number",min:1,dflt:1,editType:"plot",description:["When using *squarify* `packing` algorithm, according to https://github.com/d3/d3-hierarchy/blob/v3.1.1/README.md#squarify_ratio","this option specifies the desired aspect ratio of the generated rectangles.","The ratio must be specified as a number greater than or equal to one.","Note that the orientation of the generated rectangles (tall or wide)","is not implied by the ratio; for example, a ratio of two will attempt","to produce a mixture of rectangles whose width:height ratio is either 2:1 or 1:2.","When using *squarify*, unlike d3 which uses the Golden Ratio i.e. 1.618034,","Plotly applies 1 to increase squares in treemap layouts."].join(" ")},flip:{valType:"flaglist",flags:["x","y"],dflt:"",editType:"plot",description:["Determines if the positions obtained from solver are flipped on each axis."].join(" ")},pad:{valType:"number",min:0,dflt:3,editType:"plot",description:["Sets the inner padding (in px)."].join(" ")},editType:"calc"},marker:d({pad:{t:{valType:"number",min:0,editType:"plot",description:["Sets the padding form the top (in px)."].join(" ")},l:{valType:"number",min:0,editType:"plot",description:["Sets the padding form the left (in px)."].join(" ")},r:{valType:"number",min:0,editType:"plot",description:["Sets the padding form the right (in px)."].join(" ")},b:{valType:"number",min:0,editType:"plot",description:["Sets the padding form the bottom (in px)."].join(" ")},editType:"calc"},colors:l.marker.colors,pattern:p,depthfade:{valType:"enumerated",values:[!0,!1,"reversed"],editType:"style",description:["Determines if the sector colors are faded towards","the background from the leaves up to the headers.","This option is unavailable when a `colorscale` is present,","defaults to false when `marker.colors` is set,","but otherwise defaults to true.","When set to *reversed*, the fading direction is inverted,","that is the top elements within hierarchy are drawn with fully saturated colors","while the leaves are faded towards the background color."].join(" ")},line:l.marker.line,cornerradius:{valType:"number",min:0,dflt:0,editType:"plot",description:["Sets the maximum rounding of corners (in px)."].join(" ")},editType:"calc"},i("marker",{colorAttr:"colors",anim:!1})),pathbar:{visible:{valType:"boolean",dflt:!0,editType:"plot",description:["Determines if the path bar is drawn","i.e. outside the trace `domain` and","with one pixel gap."].join(" ")},side:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot",description:["Determines on which side of the the treemap the","`pathbar` should be presented."].join(" ")},edgeshape:{valType:"enumerated",values:[">","<","|","/","\\"],dflt:">",editType:"plot",description:["Determines which shape is used for edges between `barpath` labels."].join(" ")},thickness:{valType:"number",min:12,editType:"plot",description:["Sets the thickness of `pathbar` (in px). If not specified the `pathbar.textfont.size` is used","with 3 pixles extra padding on each side."].join(" ")},textfont:d({},s.textfont,{description:"Sets the font used inside `pathbar`."}),editType:"calc"},text:s.text,textinfo:l.textinfo,texttemplate:n({editType:"plot"},{keys:c.eventDataKeys.concat(["label","value"])}),hovertext:s.hovertext,hoverinfo:l.hoverinfo,hovertemplate:a({},{keys:c.eventDataKeys}),textfont:s.textfont,insidetextfont:s.insidetextfont,outsidetextfont:d({},s.outsidetextfont,{description:["Sets the font used for `textinfo` lying outside the sector.","This option refers to the root of the hierarchy","presented on top left corner of a treemap graph.","Please note that if a hierarchy has multiple root nodes,","this option won't have any effect and `insidetextfont` would be used."].join(" ")}),textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right"],dflt:"top left",editType:"plot",description:["Sets the positions of the `text` elements."].join(" ")},sort:s.sort,root:l.root,domain:o({name:"treemap",trace:!0,editType:"calc"})}},1481:(e,t,r)=>{var a=r(36925);t.name="treemap",t.plot=function(e,r,n,i){a.plotBasePlot(t.name,e,r,n,i)},t.clean=function(e,r,n,i){a.cleanBasePlot(t.name,e,r,n,i)}},73935:(e,t,r)=>{var a=r(44677);t._=function(e,t){return a.calc(e,t)},t.t=function(e){return a._runCrossTraceCalc("treemap",e)}},65513:e=>{e.exports={CLICK_TRANSITION_TIME:750,CLICK_TRANSITION_EASING:"poly",eventDataKeys:["currentPath","root","entry","percentRoot","percentEntry","percentParent"],gapWithPathbar:1}},29192:(e,t,r)=>{var a=r(38338),n=r(42127),i=r(84127),o=r(10649).N,s=r(55021).handleText,l=r(16678).TEXTPAD,c=r(19368).handleMarkerDefaults,d=r(39743),p=d.hasColorscale,h=d.handleDefaults;e.exports=function(e,t,r,d){function f(r,i){return a.coerce(e,t,n,r,i)}var u=f("labels"),x=f("parents");if(u&&u.length&&x&&x.length){var y=f("values");y&&y.length?f("branchvalues"):f("count"),f("level"),f("maxdepth"),"squarify"===f("tiling.packing")&&f("tiling.squarifyratio"),f("tiling.flip"),f("tiling.pad");var m=f("text");f("texttemplate"),t.texttemplate||f("textinfo",a.isArrayOrTypedArray(m)?"text+label":"label"),f("hovertext"),f("hovertemplate");var v=f("pathbar.visible");s(e,t,d,f,"auto",{hasPathbar:v,moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),f("textposition");var g=-1!==t.textposition.indexOf("bottom");c(e,t,d,f),(t._hasColorscale=p(e,"marker","colors")||(e.marker||{}).coloraxis)?h(e,t,d,f,{prefix:"marker.",cLetter:"c"}):f("marker.depthfade",!(t.marker.colors||[]).length);var b=2*t.textfont.size;f("marker.pad.t",g?b/4:b),f("marker.pad.l",b/4),f("marker.pad.r",b/4),f("marker.pad.b",g?b:b/4),f("marker.cornerradius"),t._hovered={marker:{line:{width:2,color:i.contrast(d.paper_bgcolor)}}},v&&(f("pathbar.thickness",t.pathbar.textfont.size+2*l),f("pathbar.side"),f("pathbar.edgeshape")),f("sort"),f("root.color"),o(t,d,f),t._length=null}else t.visible=!1}},65836:(e,t,r)=>{var a=r(21132),n=r(86355),i=r(56993).clearMinTextSize,o=r(42470).resizeText,s=r(60538);e.exports=function(e,t,r,l,c){var d,p,h=c.type,f=c.drawDescendants,u=e._fullLayout,x=u["_"+h+"layer"],y=!r;i(h,u),(d=x.selectAll("g.trace."+h).data(t,(function(e){return e[0].trace.uid}))).enter().append("g").classed("trace",!0).classed(h,!0),d.order(),!u.uniformtext.mode&&n.hasTransition(r)?(l&&(p=l()),a.transition().duration(r.duration).ease(r.easing).each("end",(function(){p&&p()})).each("interrupt",(function(){p&&p()})).each((function(){x.selectAll("g.trace").each((function(t){s(e,t,this,r,f)}))}))):(d.each((function(t){s(e,t,this,r,f)})),u.uniformtext.mode&&o(e,x.selectAll(".trace"),h)),y&&d.exit().remove()}},59057:(e,t,r)=>{var a=r(21132),n=r(38338),i=r(16566),o=r(38854),s=r(8342),l=r(17397).styleOne,c=r(65513),d=r(86355),p=r(97118),h=!0;e.exports=function(e,t,r,f,u){var x=u.barDifY,y=u.width,m=u.height,v=u.viewX,g=u.viewY,b=u.pathSlice,T=u.toMoveInsideSlice,_=u.strTransform,k=u.hasTransition,w=u.handleSlicesExit,S=u.makeUpdateSliceInterpolator,I=u.makeUpdateTextInterpolator,Y={},X=e._context.staticPlot,D=e._fullLayout,L=t[0],M=L.trace,O=L.hierarchy,C=y/M._entryDepth,P=d.listPath(r.data,"id"),z=s(O.copy(),[y,m],{packing:"dice",pad:{inner:0,top:0,left:0,right:0,bottom:0}}).descendants();(z=z.filter((function(e){var t=P.indexOf(e.data.id);return-1!==t&&(e.x0=C*t,e.x1=C*(t+1),e.y0=x,e.y1=x+m,e.onPathbar=!0,!0)}))).reverse(),(f=f.data(z,d.getPtId)).enter().append("g").classed("pathbar",!0),w(f,h,Y,[y,m],b),f.order();var A=f;k&&(A=A.transition().each("end",(function(){var t=a.select(this);d.setSliceCursor(t,e,{hideOnRoot:!1,hideOnLeaves:!1,isTransitioning:!1})}))),A.each((function(s){s._x0=v(s.x0),s._x1=v(s.x1),s._y0=g(s.y0),s._y1=g(s.y1),s._hoverX=v(s.x1-Math.min(y,m)/2),s._hoverY=g(s.y1-m/2);var f=a.select(this),u=n.ensureSingle(f,"path","surface",(function(e){e.style("pointer-events",X?"none":"all")}));k?u.transition().attrTween("d",(function(e){var t=S(e,h,Y,[y,m]);return function(e){return b(t(e))}})):u.attr("d",b),f.call(p,r,e,t,{styleOne:l,eventDataKeys:c.eventDataKeys,transitionTime:c.CLICK_TRANSITION_TIME,transitionEasing:c.CLICK_TRANSITION_EASING}).call(d.setSliceCursor,e,{hideOnRoot:!1,hideOnLeaves:!1,isTransitioning:e._transitioning}),u.call(l,s,M,e,{hovered:!1}),s._text=(d.getPtLabel(s)||"").split("<br>").join(" ")||"";var x=n.ensureSingle(f,"g","slicetext"),w=n.ensureSingle(x,"text","",(function(e){e.attr("data-notex",1)})),L=n.ensureUniformFontSize(e,d.determineTextFont(M,s,D.font,{onPathbar:!0}));w.text(s._text||" ").classed("slicetext",!0).attr("text-anchor","start").call(i.font,L).call(o.convertToTspans,e),s.textBB=i.bBox(w.node()),s.transform=T(s,{fontSize:L.size,onPathbar:!0}),s.transform.fontSize=L.size,k?w.transition().attrTween("transform",(function(e){var t=I(e,h,Y,[y,m]);return function(e){return _(t(e))}})):w.attr("transform",_(s))}))}},7355:(e,t,r)=>{var a=r(21132),n=r(38338),i=r(16566),o=r(38854),s=r(8342),l=r(17397).styleOne,c=r(65513),d=r(86355),p=r(97118),h=r(65099).formatSliceLabel,f=!1;e.exports=function(e,t,r,u,x){var y=x.width,m=x.height,v=x.viewX,g=x.viewY,b=x.pathSlice,T=x.toMoveInsideSlice,_=x.strTransform,k=x.hasTransition,w=x.handleSlicesExit,S=x.makeUpdateSliceInterpolator,I=x.makeUpdateTextInterpolator,Y=x.prevEntry,X=e._context.staticPlot,D=e._fullLayout,L=t[0].trace,M=-1!==L.textposition.indexOf("left"),O=-1!==L.textposition.indexOf("right"),C=-1!==L.textposition.indexOf("bottom"),P=!C&&!L.marker.pad.t||C&&!L.marker.pad.b,z=s(r,[y,m],{packing:L.tiling.packing,squarifyratio:L.tiling.squarifyratio,flipX:L.tiling.flip.indexOf("x")>-1,flipY:L.tiling.flip.indexOf("y")>-1,pad:{inner:L.tiling.pad,top:L.marker.pad.t,left:L.marker.pad.l,right:L.marker.pad.r,bottom:L.marker.pad.b}}).descendants(),A=1/0,j=-1/0;z.forEach((function(e){var t=e.depth;t>=L._maxDepth?(e.x0=e.x1=(e.x0+e.x1)/2,e.y0=e.y1=(e.y0+e.y1)/2):(A=Math.min(A,t),j=Math.max(j,t))})),u=u.data(z,d.getPtId),L._maxVisibleLayers=isFinite(j)?j-A+1:0,u.enter().append("g").classed("slice",!0),w(u,f,{},[y,m],b),u.order();var E=null;if(k&&Y){var R=d.getPtId(Y);u.each((function(e){null===E&&d.getPtId(e)===R&&(E={x0:e.x0,x1:e.x1,y0:e.y0,y1:e.y1})}))}var N=function(){return E||{x0:0,x1:y,y0:0,y1:m}},B=u;return k&&(B=B.transition().each("end",(function(){var t=a.select(this);d.setSliceCursor(t,e,{hideOnRoot:!0,hideOnLeaves:!1,isTransitioning:!1})}))),B.each((function(s){var u=d.isHeader(s,L);s._x0=v(s.x0),s._x1=v(s.x1),s._y0=g(s.y0),s._y1=g(s.y1),s._hoverX=v(s.x1-L.marker.pad.r),s._hoverY=g(C?s.y1-L.marker.pad.b/2:s.y0+L.marker.pad.t/2);var x=a.select(this),w=n.ensureSingle(x,"path","surface",(function(e){e.style("pointer-events",X?"none":"all")}));k?w.transition().attrTween("d",(function(e){var t=S(e,f,N(),[y,m]);return function(e){return b(t(e))}})):w.attr("d",b),x.call(p,r,e,t,{styleOne:l,eventDataKeys:c.eventDataKeys,transitionTime:c.CLICK_TRANSITION_TIME,transitionEasing:c.CLICK_TRANSITION_EASING}).call(d.setSliceCursor,e,{isTransitioning:e._transitioning}),w.call(l,s,L,e,{hovered:!1}),s.x0===s.x1||s.y0===s.y1?s._text="":s._text=u?P?"":d.getPtLabel(s)||"":h(s,r,L,t,D)||"";var Y=n.ensureSingle(x,"g","slicetext"),z=n.ensureSingle(Y,"text","",(function(e){e.attr("data-notex",1)})),A=n.ensureUniformFontSize(e,d.determineTextFont(L,s,D.font)),j=s._text||" ",E=u&&-1===j.indexOf("<br>");z.text(j).classed("slicetext",!0).attr("text-anchor",O?"end":M||E?"start":"middle").call(i.font,A).call(o.convertToTspans,e),s.textBB=i.bBox(z.node()),s.transform=T(s,{fontSize:A.size,isHeader:u}),s.transform.fontSize=A.size,k?z.transition().attrTween("transform",(function(e){var t=I(e,f,N(),[y,m]);return function(e){return _(t(e))}})):z.attr("transform",_(s))})),E}},39832:e=>{e.exports=function e(t,r,a){var n;a.swapXY&&(n=t.x0,t.x0=t.y0,t.y0=n,n=t.x1,t.x1=t.y1,t.y1=n),a.flipX&&(n=t.x0,t.x0=r[0]-t.x1,t.x1=r[0]-n),a.flipY&&(n=t.y0,t.y0=r[1]-t.y1,t.y1=r[1]-n);var i=t.children;if(i)for(var o=0;o<i.length;o++)e(i[o],r,a)}},13540:(e,t,r)=>{e.exports={moduleType:"trace",name:"treemap",basePlotModule:r(1481),categories:[],animatable:!0,attributes:r(42127),layoutAttributes:r(56998),supplyDefaults:r(29192),supplyLayoutDefaults:r(69169),calc:r(73935)._,crossTraceCalc:r(73935).t,plot:r(56521),style:r(17397).style,colorbar:r(44795),meta:{description:["Visualize hierarchal data from leaves (and/or outer branches) towards root","with rectangles. The treemap sectors are determined by the entries in","*labels* or *ids* and in *parents*."].join(" ")}}},56998:e=>{e.exports={treemapcolorway:{valType:"colorlist",editType:"calc",description:["Sets the default treemap slice colors. Defaults to the main","`colorway` used for trace colors. If you specify a new","list here it can still be extended with lighter and darker","colors, see `extendtreemapcolors`."].join(" ")},extendtreemapcolors:{valType:"boolean",dflt:!0,editType:"calc",description:["If `true`, the treemap slice colors (whether given by `treemapcolorway` or","inherited from `colorway`) will be extended to three times its","original length by first repeating every color 20% lighter then","each color 20% darker. This is intended to reduce the likelihood","of reusing the same color when you have many slices, but you can","set `false` to disable.","Colors provided in the trace, using `marker.colors`, are never","extended."].join(" ")}}},69169:(e,t,r)=>{var a=r(38338),n=r(56998);e.exports=function(e,t){function r(r,i){return a.coerce(e,t,n,r,i)}r("treemapcolorway",t.colorway),r("extendtreemapcolors")}},8342:(e,t,r)=>{var a=r(96795),n=r(39832);e.exports=function(e,t,r){var i,o=r.flipX,s=r.flipY,l="dice-slice"===r.packing,c=r.pad[s?"bottom":"top"],d=r.pad[o?"right":"left"],p=r.pad[o?"left":"right"],h=r.pad[s?"top":"bottom"];l&&(i=d,d=c,c=i,i=p,p=h,h=i);var f=a.treemap().tile(function(e,t){switch(e){case"squarify":return a.treemapSquarify.ratio(t);case"binary":return a.treemapBinary;case"dice":return a.treemapDice;case"slice":return a.treemapSlice;default:return a.treemapSliceDice}}(r.packing,r.squarifyratio)).paddingInner(r.pad.inner).paddingLeft(d).paddingRight(p).paddingTop(c).paddingBottom(h).size(l?[t[1],t[0]]:t)(e);return(l||o||s)&&n(f,t,{swapXY:l,flipX:o,flipY:s}),f}},56521:(e,t,r)=>{var a=r(65836),n=r(7355);e.exports=function(e,t,r,i){return a(e,t,r,i,{type:"treemap",drawDescendants:n})}},60538:(e,t,r)=>{var a=r(21132),n=r(25025).GW,i=r(86355),o=r(38338),s=r(16678).TEXTPAD,l=r(64228).toMoveInsideBar,c=r(56993).recordMinTextSize,d=r(65513),p=r(59057);function h(e){return i.isHierarchyRoot(e)?"":i.getPtId(e)}e.exports=function(e,t,r,f,u){var x=e._fullLayout,y=t[0],m=y.trace,v="icicle"===m.type,g=y.hierarchy,b=i.findEntryWithLevel(g,m.level),T=a.select(r),_=T.selectAll("g.pathbar"),k=T.selectAll("g.slice");if(!b)return _.remove(),void k.remove();var w=i.isHierarchyRoot(b),S=!x.uniformtext.mode&&i.hasTransition(f),I=i.getMaxDepth(m),Y=x._size,X=m.domain,D=Y.w*(X.x[1]-X.x[0]),L=Y.h*(X.y[1]-X.y[0]),M=D,O=m.pathbar.thickness,C=m.marker.line.width+d.gapWithPathbar,P=m.pathbar.visible?m.pathbar.side.indexOf("bottom")>-1?L+C:-(O+C):0,z={x0:M,x1:M,y0:P,y1:P+O},A=function(e,t,r){var a=m.tiling.pad,n=function(e){return e-a<=t.x0},i=function(e){return e+a>=t.x1},o=function(e){return e-a<=t.y0},s=function(e){return e+a>=t.y1};return e.x0===t.x0&&e.x1===t.x1&&e.y0===t.y0&&e.y1===t.y1?{x0:e.x0,x1:e.x1,y0:e.y0,y1:e.y1}:{x0:n(e.x0-a)?0:i(e.x0-a)?r[0]:e.x0,x1:n(e.x1+a)?0:i(e.x1+a)?r[0]:e.x1,y0:o(e.y0-a)?0:s(e.y0-a)?r[1]:e.y0,y1:o(e.y1+a)?0:s(e.y1+a)?r[1]:e.y1}},j=null,E={},R={},N=null,B=function(e,t){return t?E[h(e)]:R[h(e)]};y.hasMultipleRoots&&w&&I++,m._maxDepth=I,m._backgroundColor=x.paper_bgcolor,m._entryDepth=b.data.depth,m._atRootLevel=w;var H=-D/2+Y.l+Y.w*(X.x[1]+X.x[0])/2,q=-L/2+Y.t+Y.h*(1-(X.y[1]+X.y[0])/2),K=function(e){return H+e},F=function(e){return q+e},U=F(0),W=K(0),G=function(e){return W+e},V=function(e){return U+e};function Z(e,t){return e+","+t}var J=G(0),Q=function(e){e.x=Math.max(J,e.x)},$=m.pathbar.edgeshape,ee=m[v?"tiling":"marker"].pad,te=function(e){return-1!==m.textposition.indexOf(e)},re=te("top"),ae=te("left"),ne=te("right"),ie=te("bottom"),oe=function(e,t){var r=e.x0,a=e.x1,n=e.y0,i=e.y1,o=e.textBB,d=re||t.isHeader&&!ie?"start":ie?"end":"middle",p=te("right"),h=te("left")||t.onPathbar?-1:p?1:0;if(t.isHeader){if((r+=(v?ee:ee.l)-s)>=(a-=(v?ee:ee.r)-s)){var f=(r+a)/2;r=f,a=f}var u;ie?n<(u=i-(v?ee:ee.b))&&u<i&&(n=u):n<(u=n+(v?ee:ee.t))&&u<i&&(i=u)}var y=l(r,a,n,i,o,{isHorizontal:!1,constrained:!0,angle:0,anchor:d,leftToRight:h});return y.fontSize=t.fontSize,y.targetX=K(y.targetX),y.targetY=F(y.targetY),isNaN(y.targetX)||isNaN(y.targetY)?{}:(r!==a&&n!==i&&c(m.type,y,x),{scale:y.scale,rotate:y.rotate,textX:y.textX,textY:y.textY,anchorX:y.anchorX,anchorY:y.anchorY,targetX:y.targetX,targetY:y.targetY})},se=function(e,t){for(var r,a=0,n=e;!r&&a<I;)a++,(n=n.parent)?r=B(n,t):a=I;return r||{}},le=function(e,t,r,a,i){var s,l=B(e,t);if(l)s=l;else if(t)s=z;else if(j)if(e.parent){var c=N||r;c&&!t?s=A(e,c,a):(s={},o.extendFlat(s,se(e,t)))}else s=o.extendFlat({},e),v&&("h"===i.orientation?i.flipX?s.x0=e.x1:s.x1=0:i.flipY?s.y0=e.y1:s.y1=0);else s={};return n(s,{x0:e.x0,x1:e.x1,y0:e.y0,y1:e.y1})},ce=function(e,t,r,a){var s=B(e,t),l={},d=function(e,t,r,a){if(t)return E[h(g)]||z;var n=R[m.level]||r;return function(e){return e.data.depth-b.data.depth<I}(e)?A(e,n,a):{}}(e,t,r,a);o.extendFlat(l,{transform:oe({x0:d.x0,x1:d.x1,y0:d.y0,y1:d.y1,textBB:e.textBB,_text:e._text},{isHeader:i.isHeader(e,m)})}),s?l=s:e.parent&&o.extendFlat(l,se(e,t));var p=e.transform;return e.x0!==e.x1&&e.y0!==e.y1&&c(m.type,p,x),n(l,{transform:{scale:p.scale,rotate:p.rotate,textX:p.textX,textY:p.textY,anchorX:p.anchorX,anchorY:p.anchorY,targetX:p.targetX,targetY:p.targetY}})},de=function(e,t,r,i,o){var s=i[0],l=i[1];S?e.exit().transition().each((function(){var e=a.select(this);e.select("path.surface").transition().attrTween("d",(function(e){var r=function(e,t,r,a){var i,o=B(e,t);if(t)i=z;else{var s=B(b,t);i=s?A(e,s,a):{}}return n(o,i)}(e,t,0,[s,l]);return function(e){return o(r(e))}})),e.select("g.slicetext").attr("opacity",0)})).remove():e.exit().remove()},pe=function(e){var t=e.transform;return e.x0!==e.x1&&e.y0!==e.y1&&c(m.type,t,x),o.getTextTransform({textX:t.textX,textY:t.textY,anchorX:t.anchorX,anchorY:t.anchorY,targetX:t.targetX,targetY:t.targetY,scale:t.scale,rotate:t.rotate})};S&&(_.each((function(e){E[h(e)]={x0:e.x0,x1:e.x1,y0:e.y0,y1:e.y1},e.transform&&(E[h(e)].transform={textX:e.transform.textX,textY:e.transform.textY,anchorX:e.transform.anchorX,anchorY:e.transform.anchorY,targetX:e.transform.targetX,targetY:e.transform.targetY,scale:e.transform.scale,rotate:e.transform.rotate})})),k.each((function(e){R[h(e)]={x0:e.x0,x1:e.x1,y0:e.y0,y1:e.y1},e.transform&&(R[h(e)].transform={textX:e.transform.textX,textY:e.transform.textY,anchorX:e.transform.anchorX,anchorY:e.transform.anchorY,targetX:e.transform.targetX,targetY:e.transform.targetY,scale:e.transform.scale,rotate:e.transform.rotate}),!j&&i.isEntry(e)&&(j=e)}))),N=u(e,t,b,k,{width:D,height:L,viewX:K,viewY:F,pathSlice:function(e){var t=K(e.x0),r=K(e.x1),a=F(e.y0),n=F(e.y1),i=r-t,o=n-a;if(!i||!o)return"";var s=m.marker.cornerradius||0,l=Math.min(s,i/2,o/2);l&&e.data&&e.data.data&&e.data.data.label&&(re&&(l=Math.min(l,ee.t)),ae&&(l=Math.min(l,ee.l)),ne&&(l=Math.min(l,ee.r)),ie&&(l=Math.min(l,ee.b)));var c=function(e,t){return l?"a"+Z(l,l)+" 0 0 1 "+Z(e,t):""};return"M"+Z(t,a+l)+c(l,-l)+"L"+Z(r-l,a)+c(l,l)+"L"+Z(r,n-l)+c(-l,l)+"L"+Z(t+l,n)+c(-l,-l)+"Z"},toMoveInsideSlice:oe,prevEntry:j,makeUpdateSliceInterpolator:le,makeUpdateTextInterpolator:ce,handleSlicesExit:de,hasTransition:S,strTransform:pe}),m.pathbar.visible?p(e,t,b,_,{barDifY:P,width:M,height:O,viewX:G,viewY:V,pathSlice:function(e){var t=G(Math.max(Math.min(e.x0,e.x0),0)),r=G(Math.min(Math.max(e.x1,e.x1),M)),a=V(e.y0),n=V(e.y1),i=O/2,o={},s={};o.x=t,s.x=r,o.y=s.y=(a+n)/2;var l={x:t,y:a},c={x:r,y:a},d={x:r,y:n},p={x:t,y:n};return">"===$?(l.x-=i,c.x-=i,d.x-=i,p.x-=i):"/"===$?(d.x-=i,p.x-=i,o.x-=i/2,s.x-=i/2):"\\"===$?(l.x-=i,c.x-=i,o.x-=i/2,s.x-=i/2):"<"===$&&(o.x-=i,s.x-=i),Q(l),Q(p),Q(o),Q(c),Q(d),Q(s),"M"+Z(l.x,l.y)+"L"+Z(c.x,c.y)+"L"+Z(s.x,s.y)+"L"+Z(d.x,d.y)+"L"+Z(p.x,p.y)+"L"+Z(o.x,o.y)+"Z"},toMoveInsideSlice:oe,makeUpdateSliceInterpolator:le,makeUpdateTextInterpolator:ce,handleSlicesExit:de,hasTransition:S,strTransform:pe}):_.remove()}},17397:(e,t,r)=>{var a=r(21132),n=r(84127),i=r(38338),o=r(86355),s=r(56993).resizeText,l=r(20302);function c(e,t,r,a,s){var c,d,p=(s||{}).hovered,h=t.data.data,f=h.i,u=h.color,x=o.isHierarchyRoot(t),y=1;if(p)c=r._hovered.marker.line.color,d=r._hovered.marker.line.width;else if(x&&u===r.root.color)y=100,c="rgba(0,0,0,0)",d=0;else if(c=i.castOption(r,f,"marker.line.color")||n.defaultLine,d=i.castOption(r,f,"marker.line.width")||0,!r._hasColorscale&&!t.onPathbar){var m=r.marker.depthfade;if(m){var v,g=n.combine(n.addOpacity(r._backgroundColor,.75),u);if(!0===m){var b=o.getMaxDepth(r);v=isFinite(b)?o.isLeaf(t)?0:r._maxVisibleLayers-(t.data.depth-r._entryDepth):t.data.height+1}else v=t.data.depth-r._entryDepth,r._atRootLevel||v++;if(v>0)for(var T=0;T<v;T++){var _=.5*T/v;u=n.combine(n.addOpacity(g,_),u)}}}e.call(l,t,r,a,u).style("stroke-width",d).call(n.stroke,c).style("opacity",y)}e.exports={style:function(e){var t=e._fullLayout._treemaplayer.selectAll(".trace");s(e,t,"treemap"),t.each((function(t){var r=a.select(this),n=t[0].trace;r.style("opacity",n.opacity),r.selectAll("path.surface").each((function(t){a.select(this).call(c,t,n,e,{hovered:!1})}))}))},styleOne:c}}}]);