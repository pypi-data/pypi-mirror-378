"use strict";(self.webpackChunk_atoti_jupyterlab_extension=self.webpackChunk_atoti_jupyterlab_extension||[]).push([[7509],{57509:(e,t,i)=>{i.d(t,{FiltersBarDateRangePicker:()=>b});var a=i(74389),n=i(74667),r=i(24870),o=i.n(r),d=i(93345),s=i(22431),l=i(83156),m=i(27847),p=i(27695),c=i(27107),u=i(73995),g=i(23162),D=i(32352),y=i(99871),f=i(71623);const v=e=>{const{node:t,isSingleDate:i,pickerRef:n}=e;return(0,a.FD)("div",{ref:n,style:{display:"flex",paddingLeft:6,paddingRight:10,paddingBottom:8},children:[!i&&(0,a.Y)("div",{style:{paddingTop:"8px"},children:(0,a.Y)(f.g,{...e,containerRef:n})}),(0,a.FD)("div",{css:{display:"flex",flexDirection:"column"},children:[t,(0,a.Y)(y.LegendForDatesWithData,{style:{alignSelf:"flex-end"}})]})]})};var P=i(53953);const{useToken:h}=n.theme,x=(e,t)=>e?t?114:94:t?194:174,b=({filter:e,onFilterChanged:t,serverKey:i,cube:n,mdxInView:r,filtersAbove:f,queryContext:b,style:R})=>{const{dimensionName:T,hierarchyName:k,levelName:N}=e,{token:C}=h(),[O,S]=(0,d.useState)(!1),w=(0,d.useRef)(null),Y=(0,d.useRef)(null);(0,s.A)(Y,(e=>{e.target&&e.target instanceof Node&&(w.current?.contains(e.target)||S(!1))}));const{startDate:F,endDate:M}="dateRange"===e.type?e:"timePeriodToDate"===e.type?(0,m.P)(e.timePeriod):(0,p.K)(e.timePeriod,e.numberOfTimePeriods,e.previousOrNextMode),_=F&&M?[o()(F),o()(M)]:null,I="dateRange"===e.type?void 0:"timePeriodToDate"===e.type?"toDate":e.previousOrNextMode,[{numberOfTimePeriods:L,timePeriod:A},E]=(0,d.useReducer)(c.k9,{},(()=>(0,u.$)(e,n))),K=i=>{E({type:"timePeriodChanged",timePeriod:i}),"timePeriodToDate"!==e.type&&"previousOrNextTimePeriods"!==e.type||t({...e,timePeriod:i})},j=i=>{E({type:"numberOfTimePeriodsChanged",numberOfTimePeriods:i}),"previousOrNextTimePeriods"===e.type&&t({...e,numberOfTimePeriods:i})},q=i=>{switch(i){case"toDate":t({...e,type:"timePeriodToDate",timePeriod:A});break;case"previous":case"next":t({...e,type:"previousOrNextTimePeriods",previousOrNextMode:i,timePeriod:A,numberOfTimePeriods:L});break;case void 0:t({...e,type:"dateRange",isRollingDate:!1})}},B=(0,g.n)({dimensionName:T,hierarchyName:k,levelIndex:(0,l.Z)({cube:n,dimensionName:T,hierarchyName:k,levelName:N}),serverKey:i,cube:n,mdxInView:r,filters:f,queryContext:b}),V="dateRange"===e.type&&e.isSingleDate,W=i=>{const a="dateRange"===e.type?{...e,...i}:{...e,...i,type:"dateRange",isRollingDate:!1};t(a)},X={open:O,onClick:()=>S(!0),style:{paddingInline:C.paddingXS},placement:"bottomLeft",bordered:!1,allowClear:!0,datesWithData:B};return(0,a.FD)(P.o,{ref:w,style:{...R,width:x(V,e.isExclusionFilter)},label:e.levelName,isActive:O,children:[e.isExclusionFilter&&(0,a.Y)(D.y,{style:{flexShrink:0,marginLeft:C.marginSM,opacity:F?"initial":"0.4"}}),V?(0,a.Y)(y.SingleDatePicker,{...X,value:F?o()(F):null,onChange:e=>{const t=e,i=t?{startDate:t.toDate(),endDate:t.toDate()}:{startDate:void 0,endDate:void 0};W(i)},panelRender:e=>(0,a.Y)(v,{node:e,isSingleDate:!0,pickerRef:Y})}):(0,a.Y)(y.DateRangePicker,{...X,allowEmpty:[!0,!0],value:_,onChange:e=>{const[t,i]=e||[],a=t&&i?{startDate:t.toDate(),endDate:i.toDate()}:{startDate:void 0,endDate:void 0};W(a)},panelRender:e=>(0,a.Y)("div",{onMouseDown:e=>{e.stopPropagation()},children:(0,a.Y)(v,{node:e,isSingleDate:!1,timePeriod:A,onTimePeriodChanged:K,pickerRef:Y,relativeTimeMode:I,onRelativeTimeModeChanged:q,numberOfTimePeriods:L,onNumberOfTimePeriodsChanged:j})})})]})}}}]);