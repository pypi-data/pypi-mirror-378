"use strict";(self.webpackChunk_atoti_jupyterlab_extension=self.webpackChunk_atoti_jupyterlab_extension||[]).push([[8314],{72777:(e,t,a)=>{a.d(t,{U:()=>n});var r=a(73510),i=a(67373);const n=(e,t)=>{if(!e?.style?.areAxisTitlesVisible)return{};const a={},{mapping:n}=e;return(0,r.W)(t).forEach((([e,t])=>{const r=t?n[t]:void 0,o=[];r?.forEach((t=>{!(0,i.isMeasureInMapping)(t)||"yaxis2"===e&&n.verticalSubplots?.[0]?(0,i.isHierarchyInMapping)(t)&&o.push(t.levelName):o.push(t.caption??t.measureName)})),a[e]={title:{text:o.join(", "),standoff:20}}})),a}},85957:(e,t,a)=>{a.d(t,{M:()=>r});const r=(e,t)=>{const a={};return[["x"],["y"]].forEach((([r])=>{const{keys:i,captions:n}=e["x"===r?"horizontal":"vertical"];for(let e=0;e<i.length;e++){const i="x"===r?e+1:2*e+1,o=`${r}axis${1===i?"":i}`,l={title:n[e],...t?.fontSize&&{titlefont:{size:t?.fontSize}},...t?.[r]};a[o]=l}})),a}},10355:(e,t,a)=>{a.d(t,{u:()=>r});const r=(e,t)=>{const a={};if(!e.orderedAxis.isTimeAxis)return a;a[t]={};const r=Boolean(e.orderMode),i=e.orderedAxis.isSorted;if(r&&!i)return a[t]={type:"category"},a;const n=e.orderedAxis.captions.length;return a[t]={type:"date",tickformat:e.d3DateFormat??"%Y-%m-%d",nticks:n<5?n:void 0},e.orderMode?.endsWith("DESC")&&(a[t].autorange="reversed"),a}},61219:(e,t,a)=>{a.d(t,{C:()=>n});var r=a(90147),i=a(31529);const n=(e,{axes:t,fontSize:a})=>void 0===a?e:(0,r.produce)(e,(e=>{for(const a of t)a in e||(e[a]={});for(const t in e)t.startsWith("xaxis")||t.startsWith("yaxis")?(0,i.set)(e,[t,"tickfont","size"],a):t.startsWith("polar")&&(0,i.set)(e,[t,"angularaxis","tickfont","size"],a)}))},58314:(e,t,a)=>{a.r(t),a.d(t,{default:()=>w});var r=a(74389),i=a(93280),n=a.n(i),o=a(37677),l=a.n(o),s=a(93345),c=a(95889),p=a(32376),d=a(75499),u=a(834),f=a(73649),x=a(85957),h=a(10355),v=a(72777),y=a(61219),m=a(81367);const g={xaxis:"xAxis",yaxis:"values"};var b=a(94478);n().register(l());const w=(0,u.withLoadingOverlay)((0,u.withoutIrrelevantRenders)((0,p.c)((0,s.memo)((e=>{const{cube:t,data:a,metaData:i,widgetState:n}=e,{formatMessage:o}=(0,c.useIntl)(),l=o({id:"aui.total"}),p=(0,s.useMemo)((()=>(0,b.V)({cube:t,data:a,metaData:i,widgetState:n,captionForTotals:l})),[t,a,i,n,l]),u=(0,s.useMemo)((()=>((e,t)=>{if(!e)return{};let a=(0,m.Z)({xaxis:{gridcolor:"transparent"}},(0,f.w)(e.subplots),(0,x.M)(e.subplots,{fontSize:t?.style?.axisLabelFontSize}),(0,h.u)(e,"xaxis"),(0,v.U)(t,g),{showlegend:t?.plotly?.layout?.showlegend??!0});return a=(0,y.C)(a,{axes:["xaxis","yaxis"],fontSize:t?.style?.axisLabelFontSize}),a})(i,n)),[i,n]);return(0,r.Y)(d.Kl,{...e,traces:p,layout:u,cube:t,data:a,metaData:i})})))))},81367:(e,t,a)=>{a.d(t,{Z:()=>n});var r=a(90147),i=a(31529);const n=function(e,...t){return(0,r.produce)(e??{},(e=>{(0,i.defaultsDeep)(e,...t)}))}},37677:(e,t,a)=>{e.exports=a(65124)},10666:e=>{e.exports={INCREASING:{COLOR:"#3D9970",SYMBOL:"▲"},DECREASING:{COLOR:"#FF4136",SYMBOL:"▼"}}},35141:(e,t,a)=>{var r=a(86390),i=a(56471),n=a(84127),o=a(38338).fillText,l=a(18402).getLineWidth,s=a(57547).hoverLabelText,c=a(15726).BADNUM;function p(e,t,a,i,n){var l,p,d,u,f,x,h,v=e.cd,y=v[0].trace,m=v[0].t,g="closest"===i,b="waterfall"===y.type,w=e.maxHoverDistance,S=e.maxSpikeDistance;"h"===y.orientation?(l=a,p=t,d="y",u="x",f=N,x=z):(l=t,p=a,d="x",u="y",x=N,f=z);var T=y[d+"period"],k=g||T;function M(e){return D(e,-1)}function L(e){return D(e,1)}function D(e,t){var a=e.w;return e[d]+t*a/2}function C(e){return e[d+"End"]-e[d+"Start"]}var A=g?M:T?function(e){return e.p-C(e)/2}:function(e){return Math.min(M(e),e.p-m.bardelta/2)},I=g?L:T?function(e){return e.p+C(e)/2}:function(e){return Math.max(L(e),e.p+m.bardelta/2)};function O(e,t,a){return n.finiteRange&&(a=0),r.inbox(e-l,t-l,a+Math.min(1,Math.abs(t-e)/h)-1)}function z(e){return O(A(e),I(e),w)}function E(e){var t=e[u];if(b){var a=Math.abs(e.rawS)||0;p>0?t+=a:p<0&&(t-=a)}return t}function N(e){var t=p,a=e.b,i=E(e);return r.inbox(a-t,i-t,w+(i-t)/(i-a)-1)}var _=e[d+"a"],j=e[u+"a"];h=Math.abs(_.r2c(_.range[1])-_.r2c(_.range[0]));var B=r.getDistanceFunction(i,f,x,(function(e){return(f(e)+x(e))/2}));if(r.getClosest(v,B,e),!1!==e.index&&v[e.index].p!==c){k||(A=function(e){return Math.min(M(e),e.p-m.bargroupwidth/2)},I=function(e){return Math.max(L(e),e.p+m.bargroupwidth/2)});var F=v[e.index],H=y.base?F.b+F.s:F.s;e[u+"0"]=e[u+"1"]=j.c2p(F[u],!0),e[u+"LabelVal"]=H;var V=m.extents[m.extents.round(F.p)];e[d+"0"]=_.c2p(g?A(F):V[0],!0),e[d+"1"]=_.c2p(g?I(F):V[1],!0);var R=void 0!==F.orig_p;return e[d+"LabelVal"]=R?F.orig_p:F.p,e.labelLabel=s(_,e[d+"LabelVal"],y[d+"hoverformat"]),e.valueLabel=s(j,e[u+"LabelVal"],y[u+"hoverformat"]),e.baseLabel=s(j,F.b,y[u+"hoverformat"]),e.spikeDistance=(function(e){var t=p,a=e.b,i=E(e);return r.inbox(a-t,i-t,S+(i-t)/(i-a)-1)}(F)+function(e){return O(M(e),L(e),S)}(F))/2,e[d+"Spike"]=_.c2p(F.p,!0),o(F,y,e),e.hovertemplate=y.hovertemplate,e}}function d(e,t){var a=t.mcc||e.marker.color,r=t.mlcc||e.marker.line.color,i=l(e,t);return n.opacity(a)?a:n.opacity(r)&&i?r:void 0}e.exports={hoverPoints:function(e,t,a,r,n){var o=p(e,t,a,r,n);if(o){var l=o.cd,s=l[0].trace,c=l[o.index];return o.color=d(s,c),i.getComponentMethod("errorbars","hoverInfo")(c,s,o),[o]}},hoverOnBars:p,getTraceColor:d}},25511:e=>{function t(e,t,a,r,i){var n=t.c2p(r?e.s0:e.p0,!0),o=t.c2p(r?e.s1:e.p1,!0),l=a.c2p(r?e.p0:e.s0,!0),s=a.c2p(r?e.p1:e.s1,!0);return i?[(n+o)/2,(l+s)/2]:r?[o,(l+s)/2]:[(n+o)/2,s]}e.exports=function(e,a){var r,i=e.cd,n=e.xaxis,o=e.yaxis,l=i[0].trace,s="funnel"===l.type,c="h"===l.orientation,p=[];if(!1===a)for(r=0;r<i.length;r++)i[r].selected=0;else for(r=0;r<i.length;r++){var d=i[r],u="ct"in d?d.ct:t(d,n,o,c,s);a.contains(u,!1,r,e)?(p.push({pointNumber:r,x:n.c2d(d.x),y:o.c2d(d.y)}),d.selected=1):d.selected=0}return p}},88143:(e,t,a)=>{var r=a(88442),i=a(34231).line,n=a(13492),o=a(68765).axisHoverFormat,l=a(47335).rb,s=a(47335).ay,c=a(86185),p=a(44904).extendFlat,d=a(84127);function u(e){return{marker:{color:p({},r.marker.color,{arrayOk:!1,editType:"style",description:"Sets the marker color of all "+e+" values."}),line:{color:p({},r.marker.line.color,{arrayOk:!1,editType:"style",description:"Sets the line color of all "+e+" values."}),width:p({},r.marker.line.width,{arrayOk:!1,editType:"style",description:"Sets the line width of all "+e+" values."}),editType:"style"},editType:"style"},editType:"style"}}e.exports={measure:{valType:"data_array",dflt:[],editType:"calc",description:["An array containing types of values.","By default the values are considered as 'relative'.","However; it is possible to use 'total' to compute the sums.","Also 'absolute' could be applied to reset the computed total","or to declare an initial value where needed."].join(" ")},base:{valType:"number",dflt:null,arrayOk:!1,editType:"calc",description:["Sets where the bar base is drawn (in position axis units)."].join(" ")},x:r.x,x0:r.x0,dx:r.dx,y:r.y,y0:r.y0,dy:r.dy,xperiod:r.xperiod,yperiod:r.yperiod,xperiod0:r.xperiod0,yperiod0:r.yperiod0,xperiodalignment:r.xperiodalignment,yperiodalignment:r.yperiodalignment,xhoverformat:o("x"),yhoverformat:o("y"),hovertext:r.hovertext,hovertemplate:l({},{keys:c.eventDataKeys}),hoverinfo:p({},n.hoverinfo,{flags:["name","x","y","text","initial","delta","final"]}),textinfo:{valType:"flaglist",flags:["label","text","initial","delta","final"],extras:["none"],editType:"plot",arrayOk:!1,description:["Determines which trace information appear on the graph.","In the case of having multiple waterfalls, totals","are computed separately (per trace)."].join(" ")},texttemplate:s({editType:"plot"},{keys:c.eventDataKeys.concat(["label"])}),text:r.text,textposition:r.textposition,insidetextanchor:r.insidetextanchor,textangle:r.textangle,textfont:r.textfont,insidetextfont:r.insidetextfont,outsidetextfont:r.outsidetextfont,constraintext:r.constraintext,cliponaxis:r.cliponaxis,orientation:r.orientation,offset:r.offset,width:r.width,increasing:u("increasing"),decreasing:u("decreasing"),totals:u("intermediate sums and total"),connector:{line:{color:p({},i.color,{dflt:d.defaultLine}),width:p({},i.width,{editType:"plot"}),dash:i.dash,editType:"plot"},mode:{valType:"enumerated",values:["spanning","between"],dflt:"between",editType:"plot",description:["Sets the shape of connector lines."].join(" ")},visible:{valType:"boolean",dflt:!0,editType:"plot",description:["Determines if connector lines are drawn. "].join(" ")},editType:"plot"},offsetgroup:r.offsetgroup,alignmentgroup:r.alignmentgroup,zorder:r.zorder}},34063:(e,t,a)=>{var r=a(57547),i=a(2881),n=a(38338).mergeArray,o=a(8478),l=a(15726).BADNUM;function s(e){return"a"===e||"absolute"===e}function c(e){return"t"===e||"total"===e}e.exports=function(e,t){var a,p,d,u,f,x,h=r.getFromId(e,t.xaxis||"x"),v=r.getFromId(e,t.yaxis||"y");"h"===t.orientation?(a=h.makeCalcdata(t,"x"),d=v.makeCalcdata(t,"y"),u=i(t,v,"y",d),f=!!t.yperiodalignment,x="y"):(a=v.makeCalcdata(t,"y"),d=h.makeCalcdata(t,"x"),u=i(t,h,"x",d),f=!!t.xperiodalignment,x="x"),p=u.vals;for(var y,m=Math.min(p.length,a.length),g=new Array(m),b=0,w=!1,S=0;S<m;S++){var T=a[S]||0,k=!1;(a[S]!==l||c(t.measure[S])||s(t.measure[S]))&&S+1<m&&(a[S+1]!==l||c(t.measure[S+1])||s(t.measure[S+1]))&&(k=!0);var M=g[S]={i:S,p:p[S],s:T,rawS:T,cNext:k};s(t.measure[S])?(b=M.s,M.isSum=!0,M.dir="totals",M.s=b):c(t.measure[S])?(M.isSum=!0,M.dir="totals",M.s=b):(M.isSum=!1,M.dir=M.rawS<0?"decreasing":"increasing",y=M.s,M.s=b+y,b+=y),"totals"===M.dir&&(w=!0),f&&(g[S].orig_p=d[S],g[S][x+"End"]=u.ends[S],g[S][x+"Start"]=u.starts[S]),t.ids&&(M.id=String(t.ids[S])),M.v=(t.base||0)+b}return g.length&&(g[0].hasTotals=w),n(t.text,g,"tx"),n(t.hovertext,g,"htx"),o(g,t),g}},86185:e=>{e.exports={eventDataKeys:["initial","delta","final"]}},98748:(e,t,a)=>{var r=a(21261).setGroupPositions;e.exports=function(e,t){var a,i,n=e._fullLayout,o=e._fullData,l=e.calcdata,s=t.xaxis,c=t.yaxis,p=[],d=[],u=[];for(i=0;i<o.length;i++){var f=o[i];!0===f.visible&&f.xaxis===s._id&&f.yaxis===c._id&&"waterfall"===f.type&&(a=l[i],"h"===f.orientation?u.push(a):d.push(a),p.push(a))}var x={mode:n.waterfallmode,norm:n.waterfallnorm,gap:n.waterfallgap,groupgap:n.waterfallgroupgap};for(r(e,s,c,d,x),r(e,c,s,u,x),i=0;i<p.length;i++){a=p[i];for(var h=0;h<a.length;h++){var v=a[h];!1===v.isSum&&(v.s0+=0===h?0:a[h-1].s),h+1<a.length&&(a[h].nextP0=a[h+1].p0,a[h].nextS0=a[h+1].s0)}}}},8168:(e,t,a)=>{var r=a(38338),i=a(17468),n=a(55021).handleText,o=a(44150),l=a(40004),s=a(88143),c=a(84127),p=a(10666),d=p.INCREASING.COLOR,u=p.DECREASING.COLOR;function f(e,t,a){e(t+".marker.color",a),e(t+".marker.line.color",c.defaultLine),e(t+".marker.line.width")}e.exports={supplyDefaults:function(e,t,a,i){function c(a,i){return r.coerce(e,t,s,a,i)}if(o(e,t,i,c)){l(e,t,i,c),c("xhoverformat"),c("yhoverformat"),c("measure"),c("orientation",t.x&&!t.y?"h":"v"),c("base"),c("offset"),c("width"),c("text"),c("hovertext"),c("hovertemplate");var p=c("textposition");n(e,t,i,c,p,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),"none"!==t.textposition&&(c("texttemplate"),t.texttemplate||c("textinfo")),f(c,"increasing",d),f(c,"decreasing",u),f(c,"totals","#4499FF"),c("connector.visible")&&(c("connector.mode"),c("connector.line.width")&&(c("connector.line.color"),c("connector.line.dash"))),c("zorder")}else t.visible=!1},crossTraceDefaults:function(e,t){var a,n;function o(e){return r.coerce(n._input,n,s,e)}if("group"===t.waterfallmode)for(var l=0;l<e.length;l++)a=(n=e[l])._input,i(a,n,t,o)}}},88635:e=>{e.exports=function(e,t){return e.x="xVal"in t?t.xVal:t.x,e.y="yVal"in t?t.yVal:t.y,"initial"in t&&(e.initial=t.initial),"delta"in t&&(e.delta=t.delta),"final"in t&&(e.final=t.final),t.xa&&(e.xaxis=t.xa),t.ya&&(e.yaxis=t.ya),e}},79074:(e,t,a)=>{var r=a(57547).hoverLabelText,i=a(84127).opacity,n=a(35141).hoverOnBars,o=a(10666),l=o.INCREASING.SYMBOL,s=o.DECREASING.SYMBOL;e.exports=function(e,t,a,o,c){var p=n(e,t,a,o,c);if(p){var d=p.cd,u=d[0].trace,f="h"===u.orientation,x=f?"x":"y",h=f?e.xa:e.ya,v=d[p.index],y=v.isSum?v.b+v.s:v.rawS;p.initial=v.b+v.s-y,p.delta=y,p.final=p.initial+p.delta;var m=k(Math.abs(p.delta));p.deltaLabel=y<0?"("+m+")":m,p.finalLabel=k(p.final),p.initialLabel=k(p.initial);var g=v.hi||u.hoverinfo,b=[];if(g&&"none"!==g&&"skip"!==g){var w="all"===g,S=g.split("+"),T=function(e){return w||-1!==S.indexOf(e)};v.isSum||(!T("final")||T(f?"x":"y")||b.push(p.finalLabel),T("delta")&&(y<0?b.push(p.deltaLabel+" "+s):b.push(p.deltaLabel+" "+l)),T("initial")&&b.push("Initial: "+p.initialLabel))}return b.length&&(p.extraText=b.join("<br>")),p.color=function(e,t){var a=e[t.dir].marker,r=a.color,n=a.line.color,o=a.line.width;return i(r)?r:i(n)&&o?n:void 0}(u,v),[p]}function k(e){return r(h,e,u[x+"hoverformat"])}}},65124:(e,t,a)=>{e.exports={attributes:a(88143),layoutAttributes:a(4966),supplyDefaults:a(8168).supplyDefaults,crossTraceDefaults:a(8168).crossTraceDefaults,supplyLayoutDefaults:a(99505),calc:a(34063),crossTraceCalc:a(98748),plot:a(37833),style:a(80789).style,hoverPoints:a(79074),eventData:a(88635),selectPoints:a(25511),moduleType:"trace",name:"waterfall",basePlotModule:a(84340),categories:["bar-like","cartesian","svg","oriented","showLegend","zoomScale"],meta:{description:["Draws waterfall trace which is useful graph to displays the","contribution of various elements (either positive or negative)","in a bar chart. The data visualized by the span of the bars is","set in `y` if `orientation` is set to *v* (the default) and the","labels are set in `x`.","By setting `orientation` to *h*, the roles are interchanged."].join(" ")}}},4966:e=>{e.exports={waterfallmode:{valType:"enumerated",values:["group","overlay"],dflt:"group",editType:"calc",description:["Determines how bars at the same location coordinate","are displayed on the graph.","With *group*, the bars are plotted next to one another","centered around the shared location.","With *overlay*, the bars are plotted over one another,","you might need to reduce *opacity* to see multiple bars."].join(" ")},waterfallgap:{valType:"number",min:0,max:1,editType:"calc",description:["Sets the gap (in plot fraction) between bars of","adjacent location coordinates."].join(" ")},waterfallgroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc",description:["Sets the gap (in plot fraction) between bars of","the same location coordinate."].join(" ")}}},99505:(e,t,a)=>{var r=a(38338),i=a(4966);e.exports=function(e,t,a){var n=!1;function o(a,n){return r.coerce(e,t,i,a,n)}for(var l=0;l<a.length;l++){var s=a[l];if(s.visible&&"waterfall"===s.type){n=!0;break}}n&&(o("waterfallmode"),o("waterfallgap",.2),o("waterfallgroupgap"))}},37833:(e,t,a)=>{var r=a(21132),i=a(38338),n=a(16566),o=a(15726).BADNUM,l=a(64228),s=a(56993).clearMinTextSize;e.exports=function(e,t,a,c){var p=e._fullLayout;s("waterfall",p),l.plot(e,t,a,c,{mode:p.waterfallmode,norm:p.waterfallmode,gap:p.waterfallgap,groupgap:p.waterfallgroupgap}),function(e,t,a,l){var s=t.xaxis,c=t.yaxis;i.makeTraceGroups(l,a,"trace bars").each((function(a){var l=r.select(this),p=a[0].trace,d=i.ensureSingle(l,"g","lines");if(p.connector&&p.connector.visible){var u="h"===p.orientation,f=p.connector.mode,x=d.selectAll("g.line").data(i.identity);x.enter().append("g").classed("line",!0),x.exit().remove();var h=x.size();x.each((function(a,l){if(l===h-1||a.cNext){var p=function(e,t,a,r){var i=[],n=[],o=r?t:a,l=r?a:t;return i[0]=o.c2p(e.s0,!0),n[0]=l.c2p(e.p0,!0),i[1]=o.c2p(e.s1,!0),n[1]=l.c2p(e.p1,!0),i[2]=o.c2p(e.nextS0,!0),n[2]=l.c2p(e.nextP0,!0),r?[i,n]:[n,i]}(a,s,c,u),d=p[0],x=p[1],v="";d[0]!==o&&x[0]!==o&&d[1]!==o&&x[1]!==o&&("spanning"===f&&!a.isSum&&l>0&&(v+=u?"M"+d[0]+","+x[1]+"V"+x[0]:"M"+d[1]+","+x[0]+"H"+d[0]),"between"!==f&&(a.isSum||l<h-1)&&(v+=u?"M"+d[1]+","+x[0]+"V"+x[1]:"M"+d[0]+","+x[1]+"H"+d[1]),d[2]!==o&&x[2]!==o&&(v+=u?"M"+d[1]+","+x[1]+"V"+x[2]:"M"+d[1]+","+x[1]+"H"+d[2])),""===v&&(v="M0,0Z"),i.ensureSingle(r.select(this),"path").attr("d",v).call(n.setClipUrl,t.layerClipId,e)}}))}else d.remove()}))}(e,t,a,c)}},80789:(e,t,a)=>{var r=a(21132),i=a(16566),n=a(84127),o=a(53951).DESELECTDIM,l=a(42470),s=a(56993).resizeText,c=l.styleTextPoints;e.exports={style:function(e,t,a){var l=a||r.select(e).selectAll('g[class^="waterfalllayer"]').selectAll("g.trace");s(e,l,"waterfall"),l.style("opacity",(function(e){return e[0].trace.opacity})),l.each((function(t){var a=r.select(this),l=t[0].trace;a.selectAll(".point > path").each((function(e){if(!e.isBlank){var t=l[e.dir].marker;r.select(this).call(n.fill,t.color).call(n.stroke,t.line.color).call(i.dashLine,t.line.dash,t.line.width).style("opacity",l.selectedpoints&&!e.selected?o:1)}})),c(a,l,e),a.selectAll(".lines").each((function(){var e=l.connector.line;i.lineGroupStyle(r.select(this).selectAll("path"),e.width,e.color,e.dash)}))}))}}}}]);