# æºä»£ç ç›®å½• (src/)

æœ¬ç›®å½•åŒ…å«é¡¹ç›®çš„æ‰€æœ‰æºä»£ç ï¼ŒæŒ‰åŠŸèƒ½æ¨¡å—ç»„ç»‡ã€‚

## ğŸ“ ç›®å½•ç»“æ„

### core/ - æ ¸å¿ƒåŠŸèƒ½æ¨¡å—
åŒ…å«æœç´¢å¼•æ“çš„æ ¸å¿ƒåŠŸèƒ½å®ç°ï¼š

- **enhanced_search_engine.py** - ä¸»æœç´¢å¼•æ“ç±»ï¼Œæ•´åˆæ‰€æœ‰æœç´¢åŠŸèƒ½
- **database.py** - æ•°æ®åº“æ“ä½œå’Œç®¡ç†ï¼Œå¤„ç†ä»£ç ç´¢å¼•çš„å­˜å‚¨
- **semantic_search.py** - è¯­ä¹‰æœç´¢å®ç°ï¼ŒåŸºäºå‘é‡åµŒå…¥
- **tree_parser.py** - ä»£ç è§£æå™¨ï¼Œä½¿ç”¨Tree-sitterè¿›è¡Œè¯­æ³•åˆ†æ
- **indexer.py** - ç´¢å¼•æ„å»ºå™¨ï¼Œè´Ÿè´£ä»£ç æ–‡ä»¶çš„ç´¢å¼•åŒ–

### api/ - APIæœåŠ¡æ¨¡å—
æä¾›å„ç§æ¥å£æœåŠ¡ï¼š

- **api_server.py** - REST APIæœåŠ¡å™¨ï¼Œæä¾›HTTPæ¥å£
- **api_wsgi.py** - WSGIåº”ç”¨åŒ…è£…å™¨ï¼Œç”¨äºç”Ÿäº§éƒ¨ç½²
- **web.py** - Webç•Œé¢æœåŠ¡å™¨ï¼Œæä¾›ç”¨æˆ·å‹å¥½çš„æœç´¢ç•Œé¢

### mcp/ - MCPåè®®æ¨¡å—
å®ç°Model Context Protocolæ”¯æŒï¼š

- **mcp_server.py** - æ ‡å‡†MCPæœåŠ¡å™¨å®ç°
- **fastmcp_server.py** - ä¼˜åŒ–çš„å¿«é€ŸMCPæœåŠ¡å™¨

### tools/ - å·¥å…·å’Œæ¼”ç¤º
è¾…åŠ©å·¥å…·å’Œæ¼”ç¤ºç¨‹åºï¼š

- **demo.py** - æ¼”ç¤ºç¨‹åºï¼Œå±•ç¤ºæœç´¢å¼•æ“çš„åŸºæœ¬åŠŸèƒ½

### config/ - é…ç½®æ–‡ä»¶
ç³»ç»Ÿé…ç½®æ–‡ä»¶ï¼š

- **config.yaml** - ä¸»é…ç½®æ–‡ä»¶ï¼ŒåŒ…å«æ•°æ®åº“ã€æœç´¢ç­‰é…ç½®
- **mcp_config.yaml** - MCPæœåŠ¡ä¸“ç”¨é…ç½®æ–‡ä»¶

## ğŸ”§ æ¨¡å—ä¾èµ–å…³ç³»

```
enhanced_search_engine.py
â”œâ”€â”€ database.py
â”œâ”€â”€ semantic_search.py
â”œâ”€â”€ tree_parser.py
â””â”€â”€ indexer.py

api_server.py
â”œâ”€â”€ database.py
â””â”€â”€ semantic_search.py

web.py
â”œâ”€â”€ database.py
â””â”€â”€ semantic_search.py

mcp_server.py
â”œâ”€â”€ database.py
â””â”€â”€ semantic_search.py
```

## ğŸš€ ä½¿ç”¨è¯´æ˜

### æ ¸å¿ƒæ¨¡å—ä½¿ç”¨
```python
from src.core.enhanced_search_engine import EnhancedSearchEngine

# åˆå§‹åŒ–æœç´¢å¼•æ“
engine = EnhancedSearchEngine()

# æ‰§è¡Œæœç´¢
results = engine.search("function definition")
```

### APIæœåŠ¡ä½¿ç”¨
```bash
# å¯åŠ¨REST APIæœåŠ¡
python src/api/api_server.py

# å¯åŠ¨Webç•Œé¢
python src/api/web.py
```

### MCPæœåŠ¡ä½¿ç”¨
```bash
# å¯åŠ¨MCPæœåŠ¡å™¨
python src/mcp/mcp_server.py

# å¯åŠ¨å¿«é€ŸMCPæœåŠ¡å™¨
python src/mcp/fastmcp_server.py
```

## ğŸ“ å¼€å‘æ³¨æ„äº‹é¡¹

1. **å¯¼å…¥è·¯å¾„**: ä½¿ç”¨ç›¸å¯¹å¯¼å…¥æˆ–ç»å¯¹å¯¼å…¥ï¼Œç¡®ä¿æ¨¡å—é—´æ­£ç¡®å¼•ç”¨
2. **é…ç½®ç®¡ç†**: æ‰€æœ‰é…ç½®åº”é€šè¿‡config/ç›®å½•ä¸­çš„YAMLæ–‡ä»¶ç®¡ç†
3. **é”™è¯¯å¤„ç†**: æ¯ä¸ªæ¨¡å—éƒ½åº”åŒ…å«é€‚å½“çš„é”™è¯¯å¤„ç†å’Œæ—¥å¿—è®°å½•
4. **æ–‡æ¡£**: ä¿æŒä»£ç æ³¨é‡Šå’Œæ–‡æ¡£çš„æ›´æ–°

## ğŸ§ª æµ‹è¯•

æ¯ä¸ªæ¨¡å—éƒ½åº”æœ‰å¯¹åº”çš„æµ‹è¯•æ–‡ä»¶åœ¨test/ç›®å½•ä¸­ã€‚è¿è¡Œæµ‹è¯•å‰ç¡®ä¿å·²å®‰è£…æ‰€æœ‰ä¾èµ–ã€‚