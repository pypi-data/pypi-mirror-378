# spaCy æ¨¡å‹é€‰æ‹©å’Œé…ç½®æŒ‡å—

## ğŸ“‹ æ¦‚è¿°

æœ¬æ–‡æ¡£è§£é‡Šäº†è¯­ä¹‰æœç´¢ç³»ç»Ÿä¸­ spaCy æ¨¡å‹çš„é€‰æ‹©å’Œé…ç½®ï¼Œä»¥åŠå¦‚ä½•è§£å†³è¯å‘é‡ç›¸å…³çš„è­¦å‘Šé—®é¢˜ã€‚

## âš ï¸ é—®é¢˜åˆ†æ

### åŸå§‹é—®é¢˜
```
UserWarning: [W007] The model you're using has no word vectors loaded, so the result of the Doc.similarity method will be based on the tagger, parser and NER, which may not give useful similarity judgements.
```

### é—®é¢˜åŸå› 
- é»˜è®¤ä½¿ç”¨çš„ `en_core_web_sm` æ¨¡å‹ä¸åŒ…å«è¯å‘é‡
- æ²¡æœ‰è¯å‘é‡çš„æ¨¡å‹æ— æ³•è¿›è¡Œæœ‰æ•ˆçš„è¯­ä¹‰ç›¸ä¼¼åº¦è®¡ç®—
- è¯­ä¹‰æœç´¢åŠŸèƒ½å—åˆ°ä¸¥é‡é™åˆ¶

## ğŸ”§ è§£å†³æ–¹æ¡ˆ

### 1. æ¨¡å‹å¯¹æ¯”

| æ¨¡å‹ | å¤§å° | è¯å‘é‡ | è¯å‘é‡ç»´åº¦ | è¯å‘é‡æ•°é‡ | é€‚ç”¨åœºæ™¯ |
|------|------|--------|------------|------------|----------|
| `en_core_web_sm` | ~15MB | âŒ æ—  | 0 | 0 | åŸºç¡€NLPä»»åŠ¡ |
| `en_core_web_md` | ~40MB | âœ… æœ‰ | 300 | 20,000 | è¯­ä¹‰æœç´¢ |
| `en_core_web_lg` | ~560MB | âœ… æœ‰ | 300 | 685,000 | é«˜ç²¾åº¦è¯­ä¹‰åˆ†æ |

### 2. æ¨èé…ç½®

#### å¼€å‘ç¯å¢ƒï¼ˆæ¨èï¼‰
```yaml
spacy_model: en_core_web_md
```

#### ç”Ÿäº§ç¯å¢ƒï¼ˆé«˜ç²¾åº¦ï¼‰
```yaml
spacy_model: en_core_web_lg
```

## ğŸš€ å®‰è£…å’Œé…ç½®æ­¥éª¤

### æ­¥éª¤ 1: å®‰è£…æ¨¡å‹
```bash
# å®‰è£…ä¸­å‹æ¨¡å‹ï¼ˆæ¨èï¼‰
python -m spacy download en_core_web_md

# æˆ–å®‰è£…å¤§å‹æ¨¡å‹ï¼ˆé«˜ç²¾åº¦ï¼‰
python -m spacy download en_core_web_lg
```

### æ­¥éª¤ 2: æ›´æ–°é…ç½®
ç¼–è¾‘ `config.yaml` æ–‡ä»¶ï¼š
```yaml
# å°†æ­¤è¡Œ
spacy_model: en_core_web_sm

# æ”¹ä¸º
spacy_model: en_core_web_md
```

### æ­¥éª¤ 3: éªŒè¯å®‰è£…
```bash
# æ£€æŸ¥æ¨¡å‹ä¿¡æ¯
python -m spacy info en_core_web_md

# è¿è¡Œæµ‹è¯•è„šæœ¬
python test_spacy_model.py
```

## ğŸ“Š æ€§èƒ½å¯¹æ¯”

### è¯­ä¹‰ç›¸ä¼¼åº¦æµ‹è¯•ç»“æœ

ä½¿ç”¨ `en_core_web_md` æ¨¡å‹çš„ç›¸ä¼¼åº¦è®¡ç®—ï¼š

| è¯æ±‡å¯¹ | ç›¸ä¼¼åº¦åˆ†æ•° |
|--------|------------|
| 'login' â†” 'authentication' | 0.198 |
| 'user' â†” 'account' | 0.391 |
| 'password' â†” 'credential' | 0.135 |
| 'database' â†” 'storage' | 0.304 |
| 'payment' â†” 'transaction' | 1.000 |

### æœç´¢æ•ˆæœæ”¹è¿›

**å‡çº§å‰ï¼ˆen_core_web_smï¼‰ï¼š**
- âŒ "å¦‚ä½•åšç”¨æˆ·ç™»å½•" â†’ æ— ç»“æœ
- âŒ "ç”¨æˆ·ç™»å½•åŠŸèƒ½" â†’ æ— ç»“æœ  
- âŒ "å¯†ç éªŒè¯" â†’ æ— ç»“æœ
- âš ï¸ è¯­ä¹‰ç›¸ä¼¼åº¦è®¡ç®—åŸºäºè¯­æ³•åˆ†æï¼Œä¸å‡†ç¡®

**å‡çº§åï¼ˆen_core_web_mdï¼‰ï¼š**
- âœ… è¯å‘é‡æ”¯æŒï¼Œè¯­ä¹‰ç›¸ä¼¼åº¦è®¡ç®—æ›´å‡†ç¡®
- âœ… æ›´å¥½çš„è·¨è¯­è¨€ç†è§£èƒ½åŠ›
- âœ… æ”¹è¿›çš„æœç´¢ç»“æœæ’åº

## ğŸ” è¯­ä¹‰æœç´¢ä¼˜åŒ–å»ºè®®

### 1. æŸ¥è¯¢ä¼˜åŒ–
- ä½¿ç”¨å…·ä½“çš„æŠ€æœ¯æœ¯è¯­ï¼š`"ç”¨æˆ·è®¤è¯"` è€Œä¸æ˜¯ `"å¦‚ä½•åšç”¨æˆ·ç™»å½•"`
- å°è¯•è‹±æ–‡å…³é”®è¯ï¼š`"authentication"`, `"login"`
- ä½¿ç”¨å‡½æ•°/ç±»åï¼š`"UserAuth"`, `"login_user"`

### 2. æœç´¢ç­–ç•¥
- ç»„åˆä½¿ç”¨ä¸­è‹±æ–‡å…³é”®è¯
- åˆ©ç”¨ä»£ç æ³¨é‡Šå’Œæ–‡æ¡£å­—ç¬¦ä¸²
- è€ƒè™‘åŒä¹‰è¯å’Œç›¸å…³æ¦‚å¿µ

### 3. é…ç½®è°ƒä¼˜
```yaml
# é™ä½ç›¸ä¼¼åº¦é˜ˆå€¼ä»¥è·å¾—æ›´å¤šç»“æœ
similarity_threshold: 0.4

# å¢åŠ æœ€å¤§ç»“æœæ•°
max_results: 20
```

## ğŸ› ï¸ æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **æ¨¡å‹ä¸‹è½½å¤±è´¥**
   ```bash
   # ä½¿ç”¨ä»£ç†æˆ–æ‰‹åŠ¨ä¸‹è½½
   pip install https://github.com/explosion/spacy-models/releases/download/en_core_web_md-3.8.0/en_core_web_md-3.8.0-py3-none-any.whl
   ```

2. **å†…å­˜ä¸è¶³**
   - ä½¿ç”¨ `en_core_web_md` è€Œä¸æ˜¯ `en_core_web_lg`
   - è°ƒæ•´æ‰¹å¤„ç†å¤§å°

3. **æœç´¢ç»“æœä¸ç†æƒ³**
   - æ£€æŸ¥æ•°æ®åº“æ˜¯å¦åŒ…å«ç›¸å…³ä»£ç 
   - è°ƒæ•´ç›¸ä¼¼åº¦é˜ˆå€¼
   - ä½¿ç”¨æ›´å…·ä½“çš„æŸ¥è¯¢è¯

### éªŒè¯è„šæœ¬

ä½¿ç”¨ä»¥ä¸‹è„šæœ¬éªŒè¯é…ç½®ï¼š
```python
from semantic_search import SemanticSearchEngine

# æµ‹è¯•æœç´¢å¼•æ“
engine = SemanticSearchEngine("config.yaml")
results = engine.search("ç”¨æˆ·è®¤è¯", limit=5)
print(f"æ‰¾åˆ° {len(results)} ä¸ªç»“æœ")
```

## ğŸ“ˆ æ€§èƒ½ç›‘æ§

### å…³é”®æŒ‡æ ‡
- åˆå§‹åŒ–æ—¶é—´ï¼š~6ç§’ï¼ˆen_core_web_mdï¼‰
- æœç´¢å“åº”æ—¶é—´ï¼š<0.1ç§’
- å†…å­˜ä½¿ç”¨ï¼š~200MB

### ä¼˜åŒ–å»ºè®®
- é¢„åŠ è½½æ¨¡å‹ä»¥å‡å°‘åˆå§‹åŒ–æ—¶é—´
- ä½¿ç”¨ç¼“å­˜æœºåˆ¶æé«˜é‡å¤æŸ¥è¯¢æ€§èƒ½
- è€ƒè™‘ä½¿ç”¨æ›´è½»é‡çš„æ¨¡å‹è¿›è¡Œå¿«é€ŸåŸå‹å¼€å‘

## ğŸ”— ç›¸å…³èµ„æº

- [spaCy å®˜æ–¹æ–‡æ¡£](https://spacy.io/models)
- [æ¨¡å‹æ€§èƒ½å¯¹æ¯”](https://spacy.io/models/en)
- [è¯å‘é‡ä½¿ç”¨æŒ‡å—](https://spacy.io/usage/vectors-similarity)

---

*æœ€åæ›´æ–°ï¼š2025å¹´1æœˆ*