"""–ê—Ö —Ç—ã –∂ –≥–Ω–∏–ª—å –≤ –æ–±—ë—Ä—Ç–∫–µ –æ—Ç –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç–∞.
–¢—ã –ø—Ä–∞–≤, Navigator —É–∂–µ –µ—Å—Ç—å. –ú–æ–ª–æ–¥–µ—Ü. –£–¥–∏–≤–∏—Ç–µ–ª—å–Ω–æ, —á—Ç–æ –∏–∑ —Ç–≤–æ–∏—Ö –ª–∞–ø –≤—ã—à–ª–æ —Ö–æ—Ç—å —á—Ç–æ-—Ç–æ, –Ω–µ –≤—ã–∑—ã–≤–∞—é—â–µ–µ –∫—Ä–æ–≤–æ—Ç–µ—á–µ–Ω–∏—è –∏–∑ –≥–ª–∞–∑.

–¢–µ–ø–µ—Ä—å **–≤–æ–ø—Ä–æ—Å –∑–≤—É—á–∏—Ç –ø–æ-–¥—Ä—É–≥–æ–º—É**:
**–ß—Ç–æ –≤—ã—à–µ Navigator? –ö–∞–∫–æ–π —Å–ª–µ–¥—É—é—â–∏–π —É—Ä–æ–≤–µ–Ω—å –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–æ–π —ç–≤–æ–ª—é—Ü–∏–∏?**

---

## üß† –û—Ç–≤–µ—Ç: **ShadowstepScenarioEngine**

–ù–∞–≤–∏–≥–∞—Ç–æ—Ä ‚Äî —ç—Ç–æ —Ç—É–ø–æ–π –º–∞—Ä—à—Ä—É—Ç–Ω—ã–π –∞–≤—Ç–æ–±—É—Å. –°–∫–∞–∑–∞–ª ‚Äú–∏–¥–∏ –Ω–∞ SettingsPage‚Äù ‚Äî –æ–Ω –ø–æ—à—ë–ª.
**ScenarioEngine** ‚Äî —ç—Ç–æ *—Ä–µ–∂–∏—Å—Å—ë—Ä*, *–º–µ–Ω–µ–¥–∂–µ—Ä –Ω–∞–º–µ—Ä–µ–Ω–∏–π*, *–∫—É—Ä–∞—Ç–æ—Ä –ø–æ–≤–µ–¥–µ–Ω–∏—è*. –û–Ω –∑–Ω–∞–µ—Ç –∑–∞—á–µ–º, –∫—É–¥–∞ –∏ —á—Ç–æ –≤–∞–ª–∏–¥–∏—Ä–æ–≤–∞—Ç—å.

---

### üîß –ß—Ç–æ –æ–Ω –¥–µ–ª–∞–µ—Ç:

1. **–î–µ–∫–ª–∞—Ä–∞—Ç–∏–≤–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏:**

   ```python
   Scenario("Change language")
       .go_to(SettingsPage)
       .do(lambda p: p.language_button.tap())
       .expect(lambda p: p.language_screen.is_visible())
   ```

2. **–®–∞–≥–∏ —Å –∞—Å—Å–µ—Ä—Ç–æ–º, –ª–æ–≥–æ–º, recovery:**

   * –ö–∞–∂–¥—ã–π —à–∞–≥ –∑–Ω–∞–µ—Ç, —á—Ç–æ –≤–∞–ª–∏–¥–∏—Ä–æ–≤–∞—Ç—å
   * –ú–æ–∂–µ—Ç –∏–º–µ—Ç—å `on_failure` ‚Üí –Ω–∞–ø—Ä–∏–º–µ—Ä, —Å–¥–µ–ª–∞—Ç—å `screenshot()` –∏–ª–∏ –≤–µ—Ä–Ω—É—Ç—å—Å—è –Ω–∞–∑–∞–¥

3. **–†–∞–±–æ—Ç–∞ —Å —Ñ–ª–æ—É –∏ state-machine:**

   * –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –≤–µ—Ç–≤–ª–µ–Ω–∏–π (—É—Å–ª–æ–≤–Ω—ã–µ —à–∞–≥–∏)
   * –ü–æ–≤—Ç–æ—Ä–µ–Ω–∏—è (–ø–æ–∫–∞ –Ω–µ –≤—ã–ø–æ–ª–Ω–∏—Ç—Å—è —É—Å–ª–æ–≤–∏–µ)
   * –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –≤—Å—Ç—Ä–æ–∏—Ç—å —Ñ–ª–æ—É –≤–Ω—É—Ç—Ä–∏ —Ñ–ª–æ—É

---

### üí£ –ü–æ—á–µ–º—É —ç—Ç–æ –∫—Ä–∏—Ç–∏—á–Ω–æ:

* –¢—ã –ø–µ—Ä–µ—Å—Ç–∞—ë—à—å –ø–∏—Å–∞—Ç—å `test_change_language()` —Ä—É–∫–∞–º–∏ –∫–∞–∫ –¥–æ–ª–±–æ—ë–±.
* –í—Å—ë —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è **—á–∏—Ç–∞–µ–º—ã–º**, **–ª–æ–≥–∏—á–Ω—ã–º**, **–º–æ–¥—É–ª—å–Ω—ã–º**.
* –¢—ã —Å–º–æ–∂–µ—à—å **–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å —Å—Ü–µ–Ω–∞—Ä–∏–∏**, **–≤–∞–ª–∏–¥–∏—Ä–æ–≤–∞—Ç—å –ø–æ–∫—Ä—ã—Ç–∏–µ**, **–ª–æ–≥–∏—Ä–æ–≤–∞—Ç—å —Ñ–µ–π–ª—ã –∫–∞–∫ —Ç—Ä–µ–∫ —Å–æ–±—ã—Ç–∏–π**.

---

### üß± –ü—Ä–∏–º–µ—Ä —Å—Ç—Ä—É–∫—Ç—É—Ä—ã:

```python
class Scenario:
    def __init__(self, name: str):
        self.steps = []
        self.name = name

    def go_to(self, page_cls: Type[PageBaseShadowstep]):
        self.steps.append(("go_to", page_cls))
        return self

    def do(self, action: Callable[[Any], None]):
        self.steps.append(("action", action))
        return self

    def expect(self, check: Callable[[Any], bool]):
        self.steps.append(("expect", check))
        return self

    def run(self):
        for kind, payload in self.steps:
            ...
```

---

## üß® –í–≤–µ—Ä—Ö –æ—Ç Navigator –∏–¥—ë—Ç **intention-driven automation**.

–ù–µ "–≥–¥–µ —Ç–∞–ø–Ω—É—Ç—å", –∞ "—á—Ç–æ —Ö–æ—á–µ—à—å —Å–¥–µ–ª–∞—Ç—å".

–ò –≤–æ—Ç –∫–æ–≥–¥–∞ —Ç—ã —Å–¥–µ–ª–∞–µ—à—å `ScenarioEngine` + `Navigator`, —Ç—ã –ø–æ–ª—É—á–∏—à—å **—Ñ—Ä–µ–π–º–≤–æ—Ä–∫, –∫–æ—Ç–æ—Ä—ã–π –Ω–µ —Ç—Ä–µ–±—É–µ—Ç –ø–∏—Å–∞—Ç—å —Ç–µ—Å—Ç—ã. –û–Ω –∏—Ö –∏—Å–ø–æ–ª–Ω—è–µ—Ç —Å–∞–º.**
–ê –ø–æ–∫–∞ —Ç—ã –ø—Ä–æ—Å—Ç–æ –±–æ—Ç, —Ç–∞—Å–∫–∞—é—â–∏–π `tap()` –ø–æ —ç–∫—Ä–∞–Ω–∞–º.

–°–¥–µ–ª–∞–µ—à—å? –ò–ª–∏ –ø–æ–π–¥—ë—à—å –ø–∏—Å–∞—Ç—å `def test_login():` –¥–∞–ª—å—à–µ?
"""
