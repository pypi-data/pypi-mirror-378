import{_ as N}from"./DepNdJqZ.js";import{D as z,V as U}from"./CEjUWhr1.js";import{u as I}from"./DSKYwBdE.js";import{u as P,V as S,D as Q,a as R}from"./Dl6276N_.js";import{d as $,r as u,j as k,o as j,t as p,v as r,z as e,J as v,K as C,U as o,aQ as J,A as t,V as w,L as D,M as K,N as O,O as b,P as q,Q as G,B as V,y as _,R as H,x as W}from"./Drw0dDXY.js";import"./DlAUqK2U.js";import"./BN2GUHPa.js";import"./CM2z5-Yq.js";const X=$({__name:"ScannersList",setup(B){const i=I(),d=P(),y=u(!0),n=u(!1),c=u(!1),a=u(null),F=[{title:"Name",value:"name",align:"left",width:"10%"},{title:"Endpoint",value:"endpoint",align:"left"},{title:"Actions",value:"actions",align:"center",width:"5%"}],x=[{title:"Edit",action:l=>A(l),icon:"mdi-pencil-outline",color:"primary",divider:!0},{title:"Delete",action:l=>M(l),icon:"mdi-delete",color:"red"}],L=k(()=>i.scanners),h=k(()=>a.value===null?"Are you sure you would like to delete this scanner?":`Are you sure you would like to delete the '${a.value.name}' scanner?`),A=l=>{a.value=l,c.value=!0},E=()=>{c.value=!1,a.value=null},M=l=>{a.value=l,n.value=!0},T=()=>{if(a.value!==null)try{i.deleteScanner(a.value.endpoint),d.reportSuccess("Scanner deleted successfully.")}catch{d.reportError("Failed to delete scanner. Please try again.")}finally{a.value=null}};return j(()=>{y.value=!1}),(l,m)=>(r(),p("div",null,[e(o(z),{"model-value":o(n),"onUpdate:modelValue":m[0]||(m[0]=s=>J(n)?n.value=s:null),title:o(h),"cancel-button-text":"Cancel","confirm-button-text":"Delete","cancel-icon":"mdi-close","confirm-icon":"mdi-check","confirm-button-color":"secondary","card-icon":"mdi-trash-can-outline",onConfirm:T,onCancel:m[1]||(m[1]=s=>a.value=null)},null,8,["model-value","title"]),o(c)===!0?(r(),v(S,{key:0,variant:"outlined",class:"pa-4 mb-4"},{default:t(()=>[e(N,{scanner:o(a),"is-edit-mode":!0,onCloseForm:E},null,8,["scanner"])]),_:1})):C("",!0),e(S,{variant:"outlined"},{default:t(()=>[e(U,{loading:o(y),headers:F,items:o(L),"items-per-page":-1,"hide-default-footer":"","loading-text":"Loading scanners...","no-data-text":"No scanners added",density:"compact"},{"item.name":t(({item:s})=>[V(_(s.name),1)]),"item.endpoint":t(({item:s})=>[W("code",null,_(s.endpoint),1)]),"item.actions":t(({item:s})=>[e(w,{variant:"text",size:"small",icon:!0},{default:t(()=>[e(D,{icon:"mdi-dots-vertical"}),e(K,{activator:"parent",location:"bottom"},{default:t(()=>[e(O,{density:"compact",class:"py-0"},{default:t(()=>[(r(),p(b,null,q(x,(f,g)=>(r(),p(b,{key:`item-${f.title}-${g}`},[e(G,{onClick:Y=>f.action(s)},{default:t(()=>[e(D,{start:"",size:"small",icon:f.icon},null,8,["icon"]),V(" "+_(f.title),1)]),_:2},1032,["onClick"]),g!==x.length-1?(r(),v(H,{key:0})):C("",!0)],64))),64))]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1032,["loading","items"])]),_:1})]))}}),re=$({__name:"index",setup(B){const i=u(!1),d=[{text:"Scanners",disabled:!0,to:"/scanners",exact:!0}];return(y,n)=>(r(),p("div",null,[e(o(Q),{breadcrumbs:d,class:"mb-5"}),e(S,{variant:"outlined",class:"my-4"},{default:t(()=>[e(R,null,{default:t(()=>[o(i)===!1?(r(),v(w,{key:0,color:"accent","prepend-icon":"mdi-plus",onClick:n[0]||(n[0]=c=>i.value=!o(i))},{default:t(()=>n[2]||(n[2]=[V(" New ")])),_:1})):(r(),v(N,{key:1,onCloseForm:n[1]||(n[1]=c=>i.value=!1)}))]),_:1})]),_:1}),e(X)]))}});export{re as default};
